<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>小TiD笔记</title>
  
  <subtitle>一个有想法的博客</subtitle>
  <link href="https://www.tidnotes.top/atom.xml" rel="self"/>
  
  <link href="https://www.tidnotes.top/"/>
  <updated>2024-06-02T11:54:09.000Z</updated>
  <id>https://www.tidnotes.top/</id>
  
  <author>
    <name>TiDra</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>[Linux]nfs共享与挂载</title>
    <link href="https://www.tidnotes.top/post/nfs%E5%85%B1%E4%BA%AB%E4%B8%8E%E6%8C%82%E8%BD%BD/"/>
    <id>https://www.tidnotes.top/post/nfs%E5%85%B1%E4%BA%AB%E4%B8%8E%E6%8C%82%E8%BD%BD/</id>
    <published>2024-06-02T11:54:09.000Z</published>
    <updated>2024-06-02T11:54:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>记录用于 pve、openwrt 以及 centos 的nfs文件共享以及文件夹挂载，nfs相关的防火墙 iptables、firewall 设置。</p><span id="more"></span><h2 id="开启文件共享"><a href="#开启文件共享" class="headerlink" title="开启文件共享"></a>开启文件共享</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>准备好共享的文件目录，安装nfs服务，各linux的命令如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pve\Debian\Ubuntu</span></span><br><span class="line">apt-get install nfs-server nfs-common</span><br><span class="line"></span><br><span class="line"><span class="comment"># centos</span></span><br><span class="line">yum install nfs-utils</span><br><span class="line"></span><br><span class="line"><span class="comment"># openwrt</span></span><br><span class="line">opkg update</span><br><span class="line">opkg install nfs-server</span><br></pre></td></tr></table></figure><blockquote><p>pve可以直接在pve服务器上安装，或者独立创建一个容器或虚拟机作为专用的nfs服务器</p><p>如果直接pve提供nfs服务，需要在pve节点上新建一个目录：磁盘 → 目录 → 创建: 目录 ，按需填写需要挂载的盘分区等即可<br><img src="/../img/nfs-pve.png" class="lazyload" data-srcset="/../img/nfs-pve.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="pve创建目录"></p><p>如果使用pve节点服务器上已有的目录也可以，注意目录权限以及安全问题</p></blockquote><h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p>按需要修改，新增 <code>/etc/exports</code> 条目</p><p>例如：</p><figure class="highlight plaintext"><figcaption><span>/etc/exports</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># [共享的目录]  [主机名1或IP地址1(参数1,参数2)] [主机名2或IP地址2(参数3,参数4)]</span><br><span class="line">/test 192.168.1.0/24(rw,sync,no_root_squash)</span><br></pre></td></tr></table></figure><ol><li><p>授权IP或主机</p><ul><li>可以写IP：10.10.10.1</li><li>可以写网段：10.10.0.0&#x2F;16</li><li>可以写主机名：client.lab.com</li><li>可以写域：*.lab.com</li><li>可以所有，用 <code>*</code> 表示</li></ul></li><li><p>参数列表</p></li></ol><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>ro</td><td>只读访问</td></tr><tr><td>rw</td><td>读写访问</td></tr><tr><td>sync</td><td>资料同步写入到内存与硬盘当中</td></tr><tr><td>async</td><td>资料会先暂存于内存当中，而非直接写入硬盘</td></tr><tr><td>secure</td><td>NFS通过1024以下的安全TCP&#x2F;IP端口发送</td></tr><tr><td>insecure</td><td>NFS通过1024以上的端口发送</td></tr><tr><td>wdelay</td><td>如果多个用户要写入NFS目录，则归组写入（默认）</td></tr><tr><td>no_wdelay</td><td>如果多个用户要写入NFS目录，则立即写入，当使用async时，无需此设置</td></tr><tr><td>hide</td><td>在NFS共享目录中不共享其子目录</td></tr><tr><td>no_hide</td><td>共享NFS目录的子目录</td></tr><tr><td>subtree_check</td><td>如果共享&#x2F;usr&#x2F;bin之类的子目录时，强制NFS检查父目录的权限（默认）</td></tr><tr><td>no_subtree_check</td><td>和上面相对，不检查父目录权限</td></tr><tr><td>all_squash</td><td>共享文件的UID和GID映射匿名用户anonymous，适合公用目录</td></tr><tr><td>no_all_squash</td><td>保留共享文件的UID和GID（默认）</td></tr><tr><td>root_squash</td><td>root用户的所有请求映射成如anonymous用户一样的权限（默认）</td></tr><tr><td>no_root_squash</td><td>root用户具有根目录的完全管理访问权限</td></tr></tbody></table><h3 id="启动并设置自启动"><a href="#启动并设置自启动" class="headerlink" title="启动并设置自启动"></a>启动并设置自启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/nfs-kernel-server start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">systemctl start nfs-server.service </span><br><span class="line">systemctl <span class="built_in">enable</span> nfs-server.service</span><br></pre></td></tr></table></figure><h3 id="发布并查看共享目录"><a href="#发布并查看共享目录" class="headerlink" title="发布并查看共享目录"></a>发布并查看共享目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发布共享（如果修改了/etc/exports 配置文件，此命令表示重读一遍/etc/exports,并生效）</span></span><br><span class="line">exportfs -rv</span><br><span class="line"><span class="comment"># 本机查看共享</span></span><br><span class="line">showmount -e</span><br><span class="line"><span class="comment"># 客户端查看共享</span></span><br><span class="line">showmount -e 192.168.1.1</span><br></pre></td></tr></table></figure><h2 id="挂载nfs目录"><a href="#挂载nfs目录" class="headerlink" title="挂载nfs目录"></a>挂载nfs目录</h2><ol><li>直接命令挂载<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /test</span><br><span class="line">mount -t nfs 192.168.1.1:/test  /test</span><br></pre></td></tr></table></figure></li><li>开机自动挂载<ul><li>修改 <code>/etc/fstab</code><figure class="highlight plaintext"><figcaption><span>/etc/fstab</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.1:/test      /test      nfs     defaults        0       0</span><br></pre></td></tr></table></figure></li><li>对 <code>/etc/fstab</code> 内容立即生效<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -a</span><br></pre></td></tr></table></figure></li></ul></li><li>取消挂载命令<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount /test</span><br></pre></td></tr></table></figure></li></ol><h2 id="防火墙问题"><a href="#防火墙问题" class="headerlink" title="防火墙问题"></a>防火墙问题</h2><p>如果客户端无法看到服务端共享，请注意防火墙是否开启或对应的端口是否放行</p><p>nfs服务需要开启 <code>mountd</code>，<code>nfs</code>，<code>nlockmgr</code>，<code>portmapper</code>，<code>rquotad</code> 这5个服务：<code>nfs</code> 固定为2049，<code>portmapper</code> 固定为111，其他的3个服务是用的随机端口。</p><blockquote><p>nfs服务查看端口命令 <code>rpcinfo -p</code></p></blockquote><ol><li>固定nfs端口，修改 <code>/etc/sysconfig/nfs</code><figure class="highlight plaintext"><figcaption><span>/etc/sysconfig/nfs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MOUNTD_PORT=4001　　</span><br><span class="line">STATD_PORT=4002</span><br><span class="line">LOCKD_TCPPORT=4003</span><br><span class="line">LOCKD_UDPPORT=4003</span><br><span class="line">RQUOTAD_PORT=4004</span><br></pre></td></tr></table></figure></li><li>放开端口<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># iptables</span></span><br><span class="line">iptables -I INPUT 5 -p tcp -m tcp --dport 111 -j ACCEPT</span><br><span class="line">iptables -I INPUT 5 -p udp -m udp --dport 111 -j ACCEPT</span><br><span class="line">iptables -I INPUT 5 -p tcp -m tcp --dport 2049 -j ACCEPT</span><br><span class="line">iptables -I INPUT 5 -p udp -m udp --dport 2049 -j ACCEPT</span><br><span class="line">iptables -I INPUT 5 -p tcp -m tcp --dport 4001:4004 -j ACCEPT</span><br><span class="line">iptables -I INPUT 5 -p udp -m udp --dport 4001:4004 -j ACCEPT</span><br><span class="line">systemctl restart iptables</span><br><span class="line">iptables -nvL –line</span><br><span class="line"></span><br><span class="line"><span class="comment"># firewall</span></span><br><span class="line">firewall-cmd --permanent --add-port=111/tcp</span><br><span class="line">firewall-cmd --permanent --add-port=111/udp</span><br><span class="line">firewall-cmd --permanent --add-port=2049/tcp</span><br><span class="line">firewall-cmd --permanent --add-port=2049/udp </span><br><span class="line">firewall-cmd --permanent --add-port=40001-40004/tcp</span><br><span class="line">firewall-cmd --permanent --add-port=40001-40004/udp</span><br><span class="line">firewall-cmd --reload</span><br><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure></li><li>重启 nfs、rpcbind 服务</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;记录用于 pve、openwrt 以及 centos 的nfs文件共享以及文件夹挂载，nfs相关的防火墙 iptables、firewall 设置。&lt;/p&gt;</summary>
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="工具" scheme="https://www.tidnotes.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    <category term="Linux" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/Linux/"/>
    
    
    <category term="openwrt" scheme="https://www.tidnotes.top/tags/openwrt/"/>
    
    <category term="nfs" scheme="https://www.tidnotes.top/tags/nfs/"/>
    
  </entry>
  
  <entry>
    <title>[JS]控制台多样式输出</title>
    <link href="https://www.tidnotes.top/post/JS-%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%A4%9A%E6%A0%B7%E5%BC%8F%E8%BE%93%E5%87%BA/"/>
    <id>https://www.tidnotes.top/post/JS-%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%A4%9A%E6%A0%B7%E5%BC%8F%E8%BE%93%E5%87%BA/</id>
    <published>2024-05-15T15:35:42.000Z</published>
    <updated>2024-05-15T15:35:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>近期在对博客主题中的控制台输出做修改优化，发现 <code>console.log</code> 可以有挺多的玩法，记录一下以供后续改进。</p><span id="more"></span><blockquote><p>不同的环境可能会有所差异，本文使用环境为 <code>Microsoft Edge 124.0.2478.97</code> ，具体显示效果需自行体验。</p></blockquote><h2 id="基本说明"><a href="#基本说明" class="headerlink" title="基本说明"></a>基本说明</h2><h3 id="console输出函数"><a href="#console输出函数" class="headerlink" title="console输出函数"></a>console输出函数</h3><p><code>console</code> 常用输出函数有以下几种：</p><table>  <thead>    <tr>      <th>类型</th>      <th>函数</th>      <th>说明</th>    </tr>  </thead>  <tbody>    <tr>      <td rowspan="5">通用</td>      <td>console.log(...)</td>      <td rowspan="5">直接输出内容，差别在于输出的颜色与图标不同</td>    </tr>    <tr>      <td>console.debug(...)</td>    </tr>    <tr>      <td>console.info(...)</td>    </tr>    <tr>      <td>console.warn(...)</td>    </tr>    <tr>      <td>console.error(...)</td>    </tr>    <tr>      <td>表格</td>      <td>console.table(obj)</td>      <td>将两层嵌套的对象显示为table</td>    </tr>    <tr>      <td rowspan="2">时间差</td>      <td>console.time(str)</td>      <td>标记开始时间</td>    </tr>    <tr>      <td>console.timeEnd(str)</td>      <td>与开始时间做差值显示</td>    </tr>    <tr>      <td>断言</td>      <td>console.assert(bool, ...)</td>      <td>第一个参数为 <code>false</code> 时显示</td>    </tr>    <tr>      <td>次数</td>      <td>console.count(str)</td>      <td>显示出现次数</td>    </tr>    <tr>      <td  rowspan="3">层级</td>      <td>console.group(str)</td>      <td>开始按层级显示</td>    </tr>    <tr>      <td>groupCollapsed(str)</td>      <td>同 <code>console.group()</code> ，显示为折叠状态</td>    </tr>    <tr>      <td>console.groupEnd()</td>      <td>结束层级</td>    </tr>    <tr>      <td>对象</td>      <td>console.dir(obj)</td>      <td>显示对象，同占位符里的 <code>%O</code> </td>    </tr>  </tbody></table><div class="tabs" id="tab-代码样例"><ul class="nav-tabs"><li class="tab active"><a class="#代码样例-1">通用</a></li><li class="tab"><a class="#代码样例-2">表格</a></li><li class="tab"><a class="#代码样例-3">时间差</a></li><li class="tab"><a class="#代码样例-4">断言</a></li><li class="tab"><a class="#代码样例-5">次数</a></li><li class="tab"><a class="#代码样例-6">层级</a></li><li class="tab"><a class="#代码样例-7">对象</a></li></ul><div class="tab-content"><div class="tab-pane active" id="代码样例-1"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;log&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">debug</span>(<span class="string">&quot;debug&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;info&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;warn&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;error&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img src="/../img/console1.png" class="lazyload" data-srcset="/../img/console1.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="console通用显示效果"></p></div><div class="tab-pane" id="代码样例-2"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">table</span>(&#123;</span><br><span class="line">  <span class="string">&quot;a&quot;</span>:&#123;<span class="number">1</span>:<span class="string">&quot;test1&quot;</span>,<span class="number">2</span>:<span class="string">&quot;test2&quot;</span>&#125;,</span><br><span class="line">  <span class="string">&quot;b&quot;</span>:&#123;<span class="number">1</span>:<span class="string">&quot;test3&quot;</span>,<span class="number">2</span>:<span class="string">&quot;test4&quot;</span>&#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img src="/../img/console2.png" class="lazyload" data-srcset="/../img/console2.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="console表格显示效果"></p></div><div class="tab-pane" id="代码样例-3"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&quot;test&quot;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&quot;test&quot;</span>) ,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img src="/../img/console3.png" class="lazyload" data-srcset="/../img/console3.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="console时间差显示效果"></p></div><div class="tab-pane" id="代码样例-4"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">assert</span>(<span class="number">1</span> === <span class="number">4</span>, <span class="string">&quot;1不等于4&quot;</span>);</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img src="/../img/console4.png" class="lazyload" data-srcset="/../img/console4.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="console断言显示效果"></p></div><div class="tab-pane" id="代码样例-5"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">count</span>(<span class="string">&quot;次数&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img src="/../img/console5.png" class="lazyload" data-srcset="/../img/console5.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="console次数显示效果"></p></div><div class="tab-pane" id="代码样例-6"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">group</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1-1&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1-2&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">group</span>(<span class="string">&quot;1-3&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1-3-1&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1-3-2&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">groupEnd</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1-4&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">groupEnd</span>();</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img src="/../img/console6.png" class="lazyload" data-srcset="/../img/console6.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="console层级显示效果"></p></div><div class="tab-pane" id="代码样例-7"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(<span class="variable language_">document</span>.<span class="property">body</span>);</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><p><img src="/../img/console7.png" class="lazyload" data-srcset="/../img/console7.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="console对象显示效果"></p></div></div></div><h3 id="占位符"><a href="#占位符" class="headerlink" title="占位符"></a>占位符</h3><p><code>console.log()</code> 等可以使用 <code>C</code> 语言 <code>printf()</code> 风格的占位符，总共支持以下五种</p><table><thead><tr><th>占位符</th><th>描述</th></tr></thead><tbody><tr><td><code>%s</code></td><td>字符串</td></tr><tr><td><code>%i</code>或<code>%d</code></td><td>整数</td></tr><tr><td><code>%f</code></td><td>浮点数</td></tr><tr><td><code>%o</code>或<code>%O</code></td><td>对象，对于<code>DOM节点</code>输出不一样</td></tr><tr><td><code>%c</code></td><td>样式，作用范围到下一个 <code>%c</code> 或字符结尾</td></tr></tbody></table><h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><h3 id="显示样式"><a href="#显示样式" class="headerlink" title="显示样式"></a>显示样式</h3><p>控制台可以根据设置的样式显示不同的效果，每个 <code>%c</code> 需要对应一种样式，否则可能直接输出字符 “%c” 或 错位显示。</p><p>目前已尝试可以使用的样式类型：</p><table>  <thead>    <tr>      <th>类型</th>      <th>css</th>      <th>备注</th>    </tr>  </thead>  <tbody>    <tr>      <td rowspan="2">字体</td>      <td>color</td>      </td>    </tr>    <tr>      <td>font 以及其每种属性</td>      <td>font: font-style font-weight  font-size/line-height font-family;</td>    </tr>    <tr>      <td>背景</td>      <td>background 以及其每种属性</td>      <td>常用的如：</br>background-color</br>background-image （chrome需要用base64图片格式代替网址）</br>background-repeat</br>background-size</td>    </tr>    <tr>      <td rowspan="3">边框</td>      <td>border 以及其每种属性</td>      <td>border: border-width border-style border-color;</br>border-top等每个方向同</td>    </tr>    <tr>      <td>border-radius</td>      </td>    </tr>    <tr>      <td>border-image</td>      </td>    </tr>    <tr>      <td rowspan="2">边距</td>      <td>padding</td>      <td>padding-top等每个方向同</td>    </tr>    <tr>      <td>margin</td>      <td>margin-top等每个方向同</td>    </tr>  </tbody></table><h3 id="显示logo"><a href="#显示logo" class="headerlink" title="显示logo"></a>显示logo</h3><ol><li>图片logo可以使用 <code>background-image</code> 相关属性处理；</li><li>纯文字logo可以直接多行输出配上样式即可，以下是一些艺术字的生成网页，可以根据需要选择喜欢的艺术字作为logo：<ul><li><a href="https://patorjk.com/software/taag/">https://patorjk.com/software/taag/</a></li><li><a href="http://www.network-science.de/ascii/">http://www.network-science.de/ascii/</a></li><li><a href="https://www.lddgo.net/string/text-to-ascii-art">https://www.lddgo.net/string/text-to-ascii-art</a></li></ul></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;近期在对博客主题中的控制台输出做修改优化，发现 &lt;code&gt;console.log&lt;/code&gt; 可以有挺多的玩法，记录一下以供后续改进。&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://www.tidnotes.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="JavaScript" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="https://www.tidnotes.top/tags/JavaScript/"/>
    
    <category term="前端" scheme="https://www.tidnotes.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>使用npm做静态资源库</title>
    <link href="https://www.tidnotes.top/post/%E4%BD%BF%E7%94%A8npm%E5%81%9A%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%BA%93/"/>
    <id>https://www.tidnotes.top/post/%E4%BD%BF%E7%94%A8npm%E5%81%9A%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%BA%93/</id>
    <published>2024-05-10T06:34:47.000Z</published>
    <updated>2024-05-30T08:35:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>本文用于记录使用 <code>npm</code> 做静态资源库的方法。包括直接使用命令行创建上传以及利用 <code>GitHub</code> 上传（本站主要使用方案）。如只同步部分资源，可以直接查看<a href="#%E5%85%B3%E4%BA%8E%E5%A6%82%E4%BD%95%E5%90%8C%E6%AD%A5%E9%83%A8%E5%88%86%E6%96%87%E4%BB%B6">同步部分文件</a>。</p><span id="more"></span><p><code>npm</code> 资源目前直接访问较慢，使用CDN访问会好很多。本站目前用的是 <code>cdn.cbd.int</code> ，根据自己的需要选择不同的 <a href="#CDN%E8%8A%82%E7%82%B9">CDN节点</a></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ol><li>本文是默认已完成注册 <code>npm</code> 账号； <code>GitHub</code> 已建好仓库。</li><li>不同地区、网络访问CDN节点速度都不一样，且部分CDN节点并不同步全部的仓库，可能无法访问。建完后可以逐一尝试合适的<a href="#CDN%E8%8A%82%E7%82%B9">CDN节点</a>。</li><li>npm的包名必须<strong>全小写</strong>。</li></ol><h2 id="命令行上传"><a href="#命令行上传" class="headerlink" title="命令行上传"></a>命令行上传</h2><ol><li><p>初始化npm设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 移动到需要上传npm的目录</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$NPM_PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换回npm原生源</span></span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmjs.org</span><br><span class="line"></span><br><span class="line"><span class="comment"># 仅第一次使用需要添加用户，之后会提示你输入你的npm账号密码以及注册邮箱</span></span><br><span class="line">npm adduser</span><br><span class="line"><span class="comment"># 非第一次使用直接登录即可，之后会提示你输入你的npm账号密码以及注册邮箱</span></span><br><span class="line">npm login</span><br><span class="line"></span><br><span class="line"><span class="comment"># npm初始化</span></span><br><span class="line">npm init</span><br></pre></td></tr></table></figure><p>执行上述代码后会出现以下图片，填写相关内容后确认会生成文件 <code>package.json</code><br><img src="https://jsd.cdn.zzko.cn/npm/xxfer-pic@1.0.3/a008ab16/npminit.png" class="lazyload" data-srcset="https://jsd.cdn.zzko.cn/npm/xxfer-pic@1.0.3/a008ab16/npminit.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="npm初始化"></p></li><li><p>上传</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure><p>执行上述代码后无错误信息记成功上传到npm库</p></li><li><p>使用 <a href="#CDN%E8%8A%82%E7%82%B9">npm CDN节点</a> 检查是否能正常访问</p></li></ol><h2 id="GitHub上传"><a href="#GitHub上传" class="headerlink" title="GitHub上传"></a>GitHub上传</h2><p>本文主要使用GitHub的手动触发执行action，执行时填写对应的版本号即可。如需要其他触发方式，可以自行修改代码中的 <code>on:</code> 部分</p><ol><li><p>在GitHub仓库中的 <code>.github/workflows/npm-publish.yml</code> 填入以下代码</p><figure class="highlight yml"><figcaption><span>.github/workflows/npm-publish.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Node.js</span> <span class="string">Package</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line">    <span class="attr">inputs:</span></span><br><span class="line">      <span class="attr">version:</span></span><br><span class="line">        <span class="attr">required:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">string</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">publish-npm:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="comment"># If your repository depends on submodule, please see: https://github.com/actions/checkout</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="string">recursive</span></span><br><span class="line">      </span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="number">16</span></span><br><span class="line">          <span class="attr">registry-url:</span> <span class="string">https://registry.npmjs.org/</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">NPM</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.OS</span> <span class="string">&#125;&#125;-npm-cache</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 按需填写json内容</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Create</span> <span class="string">package</span> <span class="string">json</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir npm_workdir</span></span><br><span class="line"><span class="string">          cat &lt;&lt;EOF &gt; npm_workdir/package.json</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            &quot;name&quot;: &quot;tidnotes-blog&quot;,</span></span><br><span class="line"><span class="string">            &quot;version&quot;: &quot;$&#123;&#123; inputs.version &#125;&#125;&quot;,</span></span><br><span class="line"><span class="string">            &quot;description&quot;: &quot;Blog static file from @小TiD笔记&quot;,</span></span><br><span class="line"><span class="string">            &quot;author&quot;: &quot;Tidra(@小TiD笔记)&quot;,</span></span><br><span class="line"><span class="string">            &quot;license&quot;: &quot;MIT&quot;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          EOF</span></span><br><span class="line"><span class="string">          cat npm_workdir/package.json</span></span><br><span class="line"><span class="string"></span>      </span><br><span class="line">      <span class="comment"># 移动需要的文件到npm_workdir</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Move</span> <span class="string">Files</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir npm_workdir/img</span></span><br><span class="line"><span class="string">          mkdir npm_workdir/css</span></span><br><span class="line"><span class="string">          mkdir npm_workdir/js</span></span><br><span class="line"><span class="string">          mkdir npm_workdir/json</span></span><br><span class="line"><span class="string">          mkdir npm_workdir/code</span></span><br><span class="line"><span class="string">          cp -a public/img/* npm_workdir/img/</span></span><br><span class="line"><span class="string">          cp -a public/css/* npm_workdir/css/</span></span><br><span class="line"><span class="string">          cp -a public/js/* npm_workdir/js/</span></span><br><span class="line"><span class="string">          cp -a public/json/* npm_workdir/json/</span></span><br><span class="line"><span class="string">          cp -a public/code/* npm_workdir/code/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">publish</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">NODE_AUTH_TOKEN:</span> <span class="string">$&#123;&#123;secrets.npm_token&#125;&#125;</span></span><br><span class="line">        <span class="attr">working-directory:</span> <span class="string">./npm_workdir</span></span><br></pre></td></tr></table></figure></li><li><p>选择仓库中的 <strong>action</strong> → <strong>Node.js Package</strong> → <strong>Run workflow</strong>，选择分支，填写版本号运行即可。<br>具体的手动触发方式可以参考 <a href="https://docs.github.com/zh/actions/using-workflows/manually-running-a-workflow">GitHub说明</a></p></li></ol><p><img src="/../img/npm-github-action.webp" class="lazyload" data-srcset="/../img/npm-github-action.webp" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="npm-github-action"> </p><h2 id="CDN节点"><a href="#CDN节点" class="headerlink" title="CDN节点"></a>CDN节点</h2><p>目前常用的CDN节点如下，按需要测试取用，后续会持续更新。</p><table><thead><tr><th>CDN节点</th><th>说明</th><th>地区</th><th>速度</th><th>备注</th></tr></thead><tbody><tr><td><a href="https://unpkg.com/:package@:version/:file">https://unpkg.com/:package@:version/:file</a></td><td>unpkg自建</td><td>国际</td><td>一般</td><td></td></tr><tr><td><a href="https://cdn.cbd.int/:package@:version/:file">https://cdn.cbd.int/:package@:version/:file</a></td><td>unpkg自建</td><td>国际</td><td>较快</td><td></td></tr><tr><td><a href="https://gcore.jsdelivr.net/npm/:package@:version/:file">https://gcore.jsdelivr.net/npm/:package@:version/:file</a></td><td>jsd出品</td><td>国际</td><td>一般</td><td></td></tr><tr><td><a href="https://fastly.jsdelivr.net/npm/:package@:version/:file">https://fastly.jsdelivr.net/npm/:package@:version/:file</a></td><td>jsd出品</td><td>国际</td><td>较慢</td><td></td></tr><tr><td><a href="https://cdn.jsdelivr.us/npm/:package@:version/:file">https://cdn.jsdelivr.us/npm/:package@:version/:file</a></td><td>泽瑶CDN</td><td>国际</td><td>一般</td><td></td></tr><tr><td><a href="https://www.jsdelivr.ren/npm/:package@:version/:file">https://www.jsdelivr.ren/npm/:package@:version/:file</a></td><td>泽瑶CDN</td><td>国内</td><td>一般</td><td></td></tr><tr><td><a href="https://jsd.onmicrosoft.cn/npm/:package@:version/:file">https://jsd.onmicrosoft.cn/npm/:package@:version/:file</a></td><td>渺软CDN</td><td>国内</td><td>较快</td><td>回源jsd</td></tr><tr><td><a href="https://npm.onmicrosoft.cn/:package@:version/:file">https://npm.onmicrosoft.cn/:package@:version/:file</a></td><td>渺软CDN</td><td>国内</td><td>较快</td><td>回源unpkg</td></tr><tr><td><a href="https://npm.elemecdn.com/:package@:version/:file">https://npm.elemecdn.com/:package@:version/:file</a></td><td>饿了么</td><td>国内</td><td>未知</td><td>非所有库同步</td></tr><tr><td><a href="https://code.bdstatic.com/npm/:package@:version/:file">https://code.bdstatic.com/npm/:package@:version/:file</a></td><td>百度出品</td><td>国内</td><td>未知</td><td>非所有库同步</td></tr><tr><td><a href="https://unpkg.zhimg.com/:package@:version/:file">https://unpkg.zhimg.com/:package@:version/:file</a></td><td>知乎出品</td><td>国内</td><td>未知</td><td>非所有库同步</td></tr><tr><td><a href="https://registry.npmmirror.com/:package/:version/files/:file">https://registry.npmmirror.com/:package/:version/files/:file</a></td><td>淘宝镜像源</td><td>国内</td><td>未知</td><td>需要手动同步模块，<code>cnpm sync 包名</code></td></tr><tr><td><a href="https://jsd.cdn.zzko.cn/npm/:package@:version/:file">https://jsd.cdn.zzko.cn/npm/:package@:version/:file</a></td><td>泽瑶CDN</td><td>国内</td><td>较快</td><td></td></tr></tbody></table><h2 id="关于如何同步部分文件"><a href="#关于如何同步部分文件" class="headerlink" title="关于如何同步部分文件"></a>关于如何同步部分文件</h2><p>同步部分文件可以设置 <code>.npmignore</code> 、<code>.gitignore</code> 和 <code>package.json</code> 中的 <code>files</code> 字段。</p><blockquote><p>优先级关系：<code>package.json</code> &gt; <code>.npmignore</code> &gt; <code>.gitignore</code></p></blockquote><ol><li><p><code>.npmignore</code> 和 <code>.gitignore</code>：</p><ul><li>在静态资源目录添加<code>.npmignore</code> 和 <code>.gitignore</code> 文件，并添加需要忽略的文件。</li><li>默认会忽略以下文件：<ul><li><code>.*.swp</code></li><li><code>._*</code></li><li><code>.DS_Store</code></li><li><code>.git</code></li><li><code>.hg</code></li><li><code>.npmrc</code></li><li><code>.lock-wscript</code></li><li><code>.svn</code></li><li><code>.wafpickle-*</code></li><li><code>config.gypi</code></li><li><code>CVS</code></li><li><code>npm-debug.log</code></li></ul></li><li>无法忽略以下文件：<ul><li><code>package.json</code></li><li><code>README</code>(and its variants)</li><li><code>CHANGELOG</code>(and its variants)</li><li><code>LICENSE</code>&#x2F;<code>LICENCE</code></li></ul></li></ul></li><li><p><code>package.json</code> 中的 <code>files</code> 字段：</p><ul><li><code>files</code> 字段可以指定需要发布的文件。<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ...<span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;img/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;css/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;js/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;json/&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ul></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文用于记录使用 &lt;code&gt;npm&lt;/code&gt; 做静态资源库的方法。包括直接使用命令行创建上传以及利用 &lt;code&gt;GitHub&lt;/code&gt; 上传（本站主要使用方案）。如只同步部分资源，可以直接查看&lt;a href=&quot;#%E5%85%B3%E4%BA%8E%E5%A6%82%E4%BD%95%E5%90%8C%E6%AD%A5%E9%83%A8%E5%88%86%E6%96%87%E4%BB%B6&quot;&gt;同步部分文件&lt;/a&gt;。&lt;/p&gt;</summary>
    
    
    
    <category term="工具" scheme="https://www.tidnotes.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="npm" scheme="https://www.tidnotes.top/tags/npm/"/>
    
    <category term="GitHub" scheme="https://www.tidnotes.top/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>Hexo添加rss订阅</title>
    <link href="https://www.tidnotes.top/post/Hexo%E6%B7%BB%E5%8A%A0rss%E8%AE%A2%E9%98%85/"/>
    <id>https://www.tidnotes.top/post/Hexo%E6%B7%BB%E5%8A%A0rss%E8%AE%A2%E9%98%85/</id>
    <published>2024-04-16T06:38:01.000Z</published>
    <updated>2024-04-16T08:51:22.142Z</updated>
    
    <content type="html"><![CDATA[<p>Volantis主题并没有自带rss订阅信息，所以根据网上找到的一些Hexo相关内容记录以下Hexo怎么添加rss订阅。</p><span id="more"></span><h2 id="添加步骤"><a href="#添加步骤" class="headerlink" title="添加步骤"></a>添加步骤</h2><ol><li><p>添加插件 <code>hexo-generator-feed</code> ，在博客目录执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-generator-feed</span><br></pre></td></tr></table></figure></li><li><p>在 <code>_config.yml</code> 添加</p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="attr">Plugins:</span></span><br><span class="line">  <span class="string">hexo-generator-feed</span></span><br></pre></td></tr></table></figure></li><li><p>在 <code>_config.yml</code> 或 <code>_config.volantis.yml</code> 添加</p><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Plugins:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="comment"># rss</span></span><br><span class="line">  <span class="attr">feed:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rss</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure></li><li><p>应用生成的 <code>/atom.xml</code> 在对应位置即可</p></li></ol><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>使用 <code>hexo g</code> 进行预览的时候会发现，生成的 <code>xml</code> 文件在chrome浏览器的中文是乱码的，但推送到服务器的部署时会正常显示。<br>目前并没有解决的办法，详见下面链接</p><div class="tag link"><a class="link-card" title="RSS生成的atom.xml乱码问题" href="https://github.com/hexojs/hexo-generator-feed/issues/39"><div class="left"><img src="https://unpkg.com/volantis-static@0.0.1660614606622/media/org.volantis/logo/256/safari.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1660614606622/media/org.volantis/logo/256/safari.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="/></div><div class="right"><p class="text">RSS生成的atom.xml乱码问题</p><p class="url">https://github.com/hexojs/hexo-generator-feed/issues/39</p></div></a></div>]]></content>
    
    
    <summary type="html">&lt;p&gt;Volantis主题并没有自带rss订阅信息，所以根据网上找到的一些Hexo相关内容记录以下Hexo怎么添加rss订阅。&lt;/p&gt;</summary>
    
    
    
    <category term="前端" scheme="https://www.tidnotes.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Hexo相关" scheme="https://www.tidnotes.top/categories/%E5%89%8D%E7%AB%AF/Hexo%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="Hexo" scheme="https://www.tidnotes.top/tags/Hexo/"/>
    
    <category term="Volantis" scheme="https://www.tidnotes.top/tags/Volantis/"/>
    
    <category term="主题" scheme="https://www.tidnotes.top/tags/%E4%B8%BB%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 命令速查</title>
    <link href="https://www.tidnotes.top/post/Hexo-%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/"/>
    <id>https://www.tidnotes.top/post/Hexo-%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/</id>
    <published>2024-04-15T02:52:12.000Z</published>
    <updated>2024-04-15T16:11:28.144Z</updated>
    
    <content type="html"><![CDATA[<p>具体详情查看文章</p><div class="tag link"><a class="link-card" title="Hexo 指令" href="https://hexo.io/zh-cn/docs/commands"><div class="left"><img src="https://unpkg.com/volantis-static@0.0.1660614606622/media/org.volantis/logo/256/safari.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1660614606622/media/org.volantis/logo/256/safari.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="/></div><div class="right"><p class="text">Hexo 指令</p><p class="url">https://hexo.io/zh-cn/docs/commands</p></div></a></div><h2 id="新文章、页面"><a href="#新文章、页面" class="headerlink" title="新文章、页面"></a>新文章、页面</h2><ol><li>文章</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo new &lt;title&gt;</span><br><span class="line"></span><br><span class="line">hexo new <span class="string">&quot;标题&quot;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>页面</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo new page [--path &lt;path&gt;] &lt;title&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建在 source/about/index.md 的标题为 &quot;about&quot; 的页面</span></span><br><span class="line">hexo new page <span class="string">&quot;about&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建在 source/about/me.md 的标题为 &quot;About me&quot; 的页面</span></span><br><span class="line">hexo new page --path about/me <span class="string">&quot;About me&quot;</span></span><br></pre></td></tr></table></figure><h2 id="生成、发布草稿"><a href="#生成、发布草稿" class="headerlink" title="生成、发布草稿"></a>生成、发布草稿</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成</span></span><br><span class="line">hexo new draft &lt;filename&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发布</span></span><br><span class="line">hexo publish &lt;filename&gt;</span><br></pre></td></tr></table></figure><h2 id="预览、启动服务器"><a href="#预览、启动服务器" class="headerlink" title="预览、启动服务器"></a>预览、启动服务器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定端口</span></span><br><span class="line">hexo s -p 8080</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示草稿</span></span><br><span class="line">hexo --draft s</span><br></pre></td></tr></table></figure><h2 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line"></span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br><span class="line"></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><h2 id="清除缓存文件"><a href="#清除缓存文件" class="headerlink" title="清除缓存文件"></a>清除缓存文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;具体详情查看文章&lt;/p&gt;
&lt;div class=&quot;tag link&quot;&gt;&lt;a class=&quot;link-card&quot; title=&quot;Hexo 指令&quot; href=&quot;https://hexo.io/zh-cn/docs/commands&quot;&gt;&lt;div class=&quot;left&quot;&gt;&lt;img</summary>
      
    
    
    
    <category term="前端" scheme="https://www.tidnotes.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Hexo相关" scheme="https://www.tidnotes.top/categories/%E5%89%8D%E7%AB%AF/Hexo%E7%9B%B8%E5%85%B3/"/>
    
    <category term="工具" scheme="https://www.tidnotes.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Hexo" scheme="https://www.tidnotes.top/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Linux修改fs.inotify.max_user_watches</title>
    <link href="https://www.tidnotes.top/post/Linux%E4%BF%AE%E6%94%B9fs-inotify-max-user-watches/"/>
    <id>https://www.tidnotes.top/post/Linux%E4%BF%AE%E6%94%B9fs-inotify-max-user-watches/</id>
    <published>2024-04-15T02:04:35.000Z</published>
    <updated>2024-04-15T02:46:01.552Z</updated>
    
    <content type="html"><![CDATA[<p>目前发现使用 <code>code-server</code> 以及 <code>npm</code> 发现，经常会出现“”xxx unable to watch for file changes in this large workspace” (error ENOSPC)”、“外部文件更改同步可能很慢”、“当前的 inotify(7) 监视限制太低” 等问题。</p><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>系统参数 <code>fs.inotify.max_user_watches</code> 设置值低，限制了每个用户所能创建的 <code>inotify</code> 实例的数量。每个实例可以监视一个或多个文件或目录。当数量超过此限制时，新的监视请求将被拒绝。</p><div class="note "><p><code>Linux</code> 通过 <code>fs.inotify.max_user_watches</code> 参数限制内核中 <code>inotify</code> 子系统的观察者数量。 <code>inotify</code> 是一种文件系统监控机制，它可以用于检测文件或目录的变化，并在事件发生时通知相关的应用程序。</p></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 `fs.inotify.max_user_watches` 参数值</span></span><br><span class="line">sysctl fs.inotify.max_user_watches</span><br></pre></td></tr></table></figure><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><div class="note "><p>需要使用 <strong>管理员权限</strong> 进行修改！</p></div><div class="note warning"><p><code>docker</code> 内修改失败，显示没有权限修改时，需要到宿主机内用管理权限执行以下内容。</p></div><ol><li><p>临时修改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl fs.inotify.max_user_watches=524288</span><br></pre></td></tr></table></figure></li><li><p>永久修改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;fs.inotify.max_user_watches=524288&quot;</span> &gt;&gt; /etc/sysctl.conf &amp;&amp; sysctl -p</span><br></pre></td></tr></table></figure></li></ol><p>如需要排查具体出现这种情况的原因，可以参考</p><div class="tag link"><a class="link-card" title="inotify watch 耗尽" href="https://www.bookstack.cn/read/kubernetes-practice-guide/troubleshooting-handle-runnig-out-of-inotify-watches.md"><div class="left"><img src="https://unpkg.com/volantis-static@0.0.1660614606622/media/org.volantis/logo/256/safari.png" class="lazyload" data-srcset="https://unpkg.com/volantis-static@0.0.1660614606622/media/org.volantis/logo/256/safari.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="/></div><div class="right"><p class="text">inotify watch 耗尽</p><p class="url">https://www.bookstack.cn/read/kubernetes-practice-guide/troubleshooting-handle-runnig-out-of-inotify-watches.md</p></div></a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;目前发现使用 &lt;code&gt;code-server&lt;/code&gt; 以及 &lt;code&gt;npm&lt;/code&gt; 发现，经常会出现“”xxx unable to watch for file changes in this large workspace” (error ENOSPC</summary>
      
    
    
    
    <category term="问题解决" scheme="https://www.tidnotes.top/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
    
    <category term="linux" scheme="https://www.tidnotes.top/tags/linux/"/>
    
    <category term="npm" scheme="https://www.tidnotes.top/tags/npm/"/>
    
    <category term="docker" scheme="https://www.tidnotes.top/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Hexo-Volantis主题优化</title>
    <link href="https://www.tidnotes.top/post/hexo-volantis%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96/"/>
    <id>https://www.tidnotes.top/post/hexo-volantis%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96/</id>
    <published>2024-04-10T12:47:39.000Z</published>
    <updated>2024-04-16T07:08:01.087Z</updated>
    
    <content type="html"><![CDATA[<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>安装hexo并且配置主题volantis</p><h3 id="1-安装hexo并初始化"><a href="#1-安装hexo并初始化" class="headerlink" title="1. 安装hexo并初始化"></a>1. 安装hexo并初始化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> ./blog</span><br><span class="line"><span class="built_in">cd</span> ./blog</span><br><span class="line">hexo init</span><br></pre></td></tr></table></figure><h3 id="2-下载主题并修改hexo主题"><a href="#2-下载主题并修改hexo主题" class="headerlink" title="2. 下载主题并修改hexo主题"></a>2. 下载主题并修改hexo主题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line"><span class="comment"># 加入volantis 6.0主题</span></span><br><span class="line">git submodule add https://github.com/volantis-x/hexo-theme-volantis.git  themes/volantis</span><br><span class="line"><span class="comment"># 如果是volantis 5.8主题可以使用npm命令</span></span><br><span class="line"><span class="comment"># npm i hexo-theme-volantis</span></span><br><span class="line"></span><br><span class="line">vim _config.yaml</span><br><span class="line"><span class="comment"># 修改 theme: volantis</span></span><br></pre></td></tr></table></figure><h3 id="3-创建分页"><a href="#3-创建分页" class="headerlink" title="3. 创建分页"></a>3. 创建分页</h3><p>除归档（archives&#x2F;）能自动创建外，其他分页都需要手动创建</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;about&quot;</span></span><br><span class="line">hexo new page <span class="string">&quot;categories&quot;</span></span><br><span class="line">hexo new page <span class="string">&quot;tags&quot;</span></span><br><span class="line">hexo new page <span class="string">&quot;friends&quot;</span></span><br><span class="line"><span class="built_in">mkdir</span> <span class="built_in">source</span>/_data</span><br><span class="line"><span class="built_in">touch</span> <span class="built_in">source</span>/_data/friends.yml</span><br><span class="line"><span class="built_in">touch</span> <span class="built_in">source</span>/404.md</span><br></pre></td></tr></table></figure><ol><li><p>关于页</p><figure class="highlight md"><figcaption><span>source/about/index.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: docs</span><br><span class="line">seo<span class="emphasis">_title: 关于</span></span><br><span class="line"><span class="emphasis">bottom_</span>meta: false</span><br><span class="line">sidebar: []</span><br><span class="line">valine:</span><br><span class="line"><span class="section">  placeholder: 有什么想对我说的呢？</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure></li><li><p>分类页</p><figure class="highlight md"><figcaption><span>source/categories/index.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: category</span><br><span class="line">index: true</span><br><span class="line"><span class="section">title: 所有分类</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure></li><li><p>分类页</p><figure class="highlight md"><figcaption><span>source/tags/index.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: tag</span><br><span class="line">index: true</span><br><span class="line"><span class="section">title: 所有标签</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure></li><li><p>友链页</p><figure class="highlight md"><figcaption><span>source/friends/index.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: friends # 必须</span><br><span class="line"><span class="section">title: 友情链接 # 可选，这是友链页的标题</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line">这里写友链上方的内容。</span><br><span class="line"></span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line"></span><br><span class="line">这里可以写友链页面下方的文字备注，例如自己的友链规范、示例等。</span><br></pre></td></tr></table></figure><p>友链的数据会读取 <code>source/_data/friends.yml</code> ，文件格式如下：</p><figure class="highlight yaml"><figcaption><span>source/_data/friends.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">group:</span> <span class="comment"># 分组标题</span></span><br><span class="line">  <span class="attr">description:</span>  <span class="comment"># 分组描述</span></span><br><span class="line">  <span class="attr">items:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">title:</span> <span class="comment"># 名称</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="comment"># 头像</span></span><br><span class="line">      <span class="attr">url:</span> <span class="comment"># 链接</span></span><br><span class="line">      <span class="attr">screenshot:</span> <span class="comment"># 截图</span></span><br><span class="line">      <span class="attr">keywords:</span> <span class="comment"># 关键词</span></span><br><span class="line">      <span class="attr">description:</span> <span class="comment"># 描述</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">title:</span> <span class="comment"># 名称</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="comment"># 头像</span></span><br><span class="line">      <span class="attr">url:</span> <span class="comment"># 链接</span></span><br><span class="line">      <span class="attr">screenshot:</span> <span class="comment"># 截图</span></span><br><span class="line">      <span class="attr">keywords:</span> <span class="comment"># 关键词</span></span><br><span class="line">      <span class="attr">description:</span> <span class="comment"># 描述</span></span><br></pre></td></tr></table></figure></li><li><p>404页</p><figure class="highlight md"><figcaption><span>source/404.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">cover: true</span><br><span class="line">robots: noindex,nofollow</span><br><span class="line">sitemap: false</span><br><span class="line">seo<span class="emphasis">_title: 404 Not Found</span></span><br><span class="line"><span class="emphasis">bottom_</span>meta: false</span><br><span class="line">sidebar: []</span><br><span class="line">twikoo:</span><br><span class="line">  path: /404.html</span><br><span class="line"><span class="section">  placeholder: 请留言告诉我您要访问哪个页面找不到了</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line">&#123;% p logo center huge, 404 %&#125;</span><br><span class="line">&#123;% p center bold, 很抱歉，您访问的页面不存在 %&#125;</span><br><span class="line">&#123;% p center small, 可能是输入地址有误或该地址已被删除 %&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="配置站点信息"><a href="#配置站点信息" class="headerlink" title="配置站点信息"></a>配置站点信息</h2><p>在 <code>_config.yml</code> 找到 <code># Site</code> 和 <code># URL</code> 相关内容</p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">小TiD笔记</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">一个有想法的博客</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">小tid笔记，记录各种技术性文章，为大家提供简单、有效的、易上手的各种技术和便捷功能，有问题随时欢迎留言提问</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">TiD,小tid,小tid笔记,tidnotes,技术,wordpress,前端,js</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">TiDra</span></span><br><span class="line"><span class="attr">language:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">zh-CN</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">en</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">zh-HK</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">zh-TW</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://www.tidnotes.top</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新增以下内容</span></span><br><span class="line"><span class="comment"># 网站图标，更多尺寸等图标请使用 import 方式批量导入</span></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">/custom/logo.svg</span></span><br></pre></td></tr></table></figure><div class="note info"><p><strong>关于一键部署</strong></p><p>如需自动提交到git&#x2F;github</p><ol><li><p>安装git插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li><li><p>配置 <code>_config.yml</code> </p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/Tidra/tidra.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></li><li><p>部署站点</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo deploy</span><br></pre></td></tr></table></figure></li></ol></div><h2 id="修改主题前"><a href="#修改主题前" class="headerlink" title="修改主题前"></a>修改主题前</h2><h3 id="1-配置文件说明"><a href="#1-配置文件说明" class="headerlink" title="1. 配置文件说明"></a>1. 配置文件说明</h3><p> <code>_config.yml</code> 用于修改全站配置， <code>_config.volantis.yml</code> 用于修改主题内容（该文件优先级最高）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> _config.volantis.yml</span><br></pre></td></tr></table></figure><h3 id="2-自定义内容注入"><a href="#2-自定义内容注入" class="headerlink" title="2. 自定义内容注入"></a>2. 自定义内容注入</h3><ol><li>可以通过 <code>source/_volantis</code> 下的以下文件中修改样式、添加自定义脚本等，具体如下：</li></ol><table><thead><tr><th align="center">文件名</th><th align="left">描述</th></tr></thead><tbody><tr><td align="center">first.styl</td><td align="left">将样式以硬编码形式直接写入HTML</td></tr><tr><td align="center">style.styl</td><td align="left">延迟异步加载样式</td></tr><tr><td align="center">dark.styl</td><td align="left">暗黑模式地强制覆盖样式</td></tr><tr><td align="center">darkVar.styl</td><td align="left">暗黑模式的CSS变量</td></tr><tr><td align="center">headBegin.ejs</td><td align="left"><code>&lt;head&gt;</code> 标签开头注入自定义内容</td></tr><tr><td align="center">headEnd.ejs</td><td align="left"><code>&lt;head&gt;</code> 标签末尾注入自定义内容</td></tr><tr><td align="center">header.ejs</td><td align="left">导航栏 <code>.nav-main</code> 末尾注入自定义内容</td></tr><tr><td align="center">topMeta.ejs</td><td align="left">侧边栏 <code>#l_side</code> 末尾注入自定义内容</td></tr><tr><td align="center">bottomMeta.ejs</td><td align="left"><code>topMetas</code> 末尾注入自定义内容</td></tr><tr><td align="center">postEnd.ejs</td><td align="left">页尾注入自定义内容</td></tr><tr><td align="center">bodyBegin.ejs</td><td align="left"><code>&lt;body&gt;</code> 标签开头注入自定义内容</td></tr><tr><td align="center">bodyEnd.ejs</td><td align="left"><code>&lt;body&gt;</code> 标签末尾注入自定义内容</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> <span class="built_in">source</span>/_volantis</span><br></pre></td></tr></table></figure><ol start="2"><li>自定义样式、代码统一存放在 <code>source/custom</code> 方便管理，后面引用只需要用 <code>/custom/文件名</code> 就可以检索到对应的文件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> <span class="built_in">source</span>/_volantis</span><br></pre></td></tr></table></figure><h2 id="主题设置"><a href="#主题设置" class="headerlink" title="主题设置"></a>主题设置</h2><p>主题设置内容在 <code>_config.volantis.yml</code> ，具体每项配置可以查看安装主题目录下的 <code>_config.yml</code> ，在根目录上的配置会覆盖主题目录以及根目录下的 <code>_config.yml</code> 配置</p><h3 id="1-导航栏（Navigation-Bar）"><a href="#1-导航栏（Navigation-Bar）" class="headerlink" title="1. 导航栏（Navigation Bar）"></a>1. 导航栏（Navigation Bar）</h3><blockquote><p>导航栏开了暗黑模式，可以到插件部分查看。</p></blockquote><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注意事项：建议规范全站路径 URL 最后带一个 &quot;/&quot; 例如 &quot;about/&quot;</span></span><br><span class="line"><span class="attr">navbar:</span></span><br><span class="line">  <span class="attr">visiable:</span> <span class="string">auto</span> <span class="comment"># always, auto</span></span><br><span class="line">  <span class="attr">logo:</span> <span class="comment"># choose [img] or [icon + title]</span></span><br><span class="line">    <span class="attr">img:</span> <span class="string">/custom/logo.svg</span> <span class="comment"># https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png</span></span><br><span class="line">    <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">title:</span></span><br><span class="line">  <span class="attr">menu:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">主页</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-rss</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">更多</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-ellipsis-v</span></span><br><span class="line">      <span class="attr">rows:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">分类</span></span><br><span class="line">          <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-folder-open</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">categories/</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">标签</span></span><br><span class="line">          <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-tags</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">tags/</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">归档</span></span><br><span class="line">          <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-archive</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">archives/</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hr</span> <span class="comment"># 分割线</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">友链</span></span><br><span class="line">          <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-link</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">friends/</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">关于</span></span><br><span class="line">          <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-info-circle</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">about/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">暗黑模式</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-circle-half-stroke</span></span><br><span class="line">      <span class="attr">toggle:</span> <span class="string">darkmode</span></span><br><span class="line">  <span class="attr">search:</span> <span class="string">直接找找...</span></span><br></pre></td></tr></table></figure><h3 id="2-网站与文章封面（Cover）"><a href="#2-网站与文章封面（Cover）" class="headerlink" title="2. 网站与文章封面（Cover）"></a>2. 网站与文章封面（Cover）</h3><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="attr">height_scheme:</span> <span class="string">half</span> <span class="comment"># full, half</span></span><br><span class="line">  <span class="attr">layout_scheme:</span> <span class="string">dock</span> <span class="comment"># blank (留白), search (搜索), dock (坞), featured (精选), focus (焦点)</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">home:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">archive:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">others:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">background:</span> <span class="string">/custom/bg.jpg</span></span><br><span class="line">  <span class="attr">logo:</span> <span class="comment"># /custom/logo.svg</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">&#x27;小TiD笔记&#x27;</span></span><br><span class="line">  <span class="attr">subtitle:</span> <span class="string">&#x27;一个有想法的网站&#x27;</span></span><br><span class="line">  <span class="attr">search:</span> <span class="string">&#x27;- 搜搜有意思的 -&#x27;</span> <span class="comment"># search bar placeholder</span></span><br><span class="line">  <span class="attr">features:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">博客</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="comment">#</span></span><br><span class="line">      <span class="attr">img:</span> <span class="string">volantis-static/media/twemoji/assets/svg/1f4f0.svg</span> <span class="comment">#  https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f4f0.svg</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">归档</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="comment">#</span></span><br><span class="line">      <span class="attr">img:</span> <span class="string">volantis-static/media/twemoji/assets/svg/1f5c3.svg</span> <span class="comment"># https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f5c3.svg</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">archives/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">友链</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="comment">#</span></span><br><span class="line">      <span class="attr">img:</span> <span class="string">volantis-static/media/twemoji/assets/svg/1f516.svg</span> <span class="comment">#  https://cdn.jsdelivr.net/gh/twitter/twemoji@13.0/assets/svg/1f516.svg</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">friends/</span></span><br></pre></td></tr></table></figure><h3 id="3-侧边栏（Sidebar）"><a href="#3-侧边栏（Sidebar）" class="headerlink" title="3. 侧边栏（Sidebar）"></a>3. 侧边栏（Sidebar）</h3><div class="note guide"><p>这里开启了字数统计、访问统计、音乐三个插件</p></div><div class="note warning"><p>由于这里已开启访问统计，所以 <code>页脚</code> 处不能再引用 <code>info</code> 以及 <code>analytics</code> ，否则会显示不出来</p></div><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># left right</span></span><br><span class="line">  <span class="comment"># 主页、分类、归档等独立页面</span></span><br><span class="line">  <span class="attr">for_page:</span> [<span class="string">blogger</span>, <span class="string">category</span>, <span class="string">tagcloud</span>, <span class="string">webinfo</span>, <span class="string">music</span>]</span><br><span class="line">  <span class="comment"># layout: docs/post 这类文章页面</span></span><br><span class="line">  <span class="attr">for_post:</span> [<span class="string">toc</span>]</span><br><span class="line">  <span class="comment"># 侧边栏组件库</span></span><br><span class="line">  <span class="attr">widget_library:</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># blogger info widget</span></span><br><span class="line">    <span class="attr">blogger:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">blogger</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">/custom/avatar.jpg</span></span><br><span class="line">      <span class="attr">shape:</span> <span class="string">circle</span> <span class="comment"># circle, rectangle</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/about/</span></span><br><span class="line">      <span class="attr">title:</span> <span class="string">TiDra</span></span><br><span class="line">      <span class="attr">subtitle:</span></span><br><span class="line">      <span class="attr">jinrishici:</span> <span class="literal">true</span> <span class="comment"># Poetry Today. You can set a string, and it will be displayed when loading fails.</span></span><br><span class="line">      <span class="attr">social:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-envelope</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">mailto:admin@tidnotes.top</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">https://github.com/Tidra/</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-headphones-alt</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># toc widget (valid only in articles)</span></span><br><span class="line">    <span class="attr">toc:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">toc</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">      <span class="attr">sticky:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">header:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-list</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">本文目录</span></span><br><span class="line">      <span class="attr">list_number:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">min_depth:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">max_depth:</span> <span class="number">5</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># music</span></span><br><span class="line">    <span class="attr">music:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">music</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># category widget</span></span><br><span class="line">    <span class="attr">category:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">category</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">      <span class="attr">header:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-folder-open</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">文章分类</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">/categories/</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># tagcloud widget</span></span><br><span class="line">    <span class="attr">tagcloud:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">tagcloud</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]</span></span><br><span class="line">      <span class="attr">header:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-tags</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">热门标签</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">/tags/</span></span><br><span class="line">      <span class="attr">min_font:</span> <span class="number">14</span></span><br><span class="line">      <span class="attr">max_font:</span> <span class="number">24</span></span><br><span class="line">      <span class="attr">color:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">start_color:</span> <span class="string">&#x27;#999&#x27;</span></span><br><span class="line">      <span class="attr">end_color:</span> <span class="string">&#x27;#555&#x27;</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># webinfo widget</span></span><br><span class="line">    <span class="attr">webinfo:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">webinfo</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>]</span><br><span class="line">      <span class="attr">header:</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-award</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">站点信息</span></span><br><span class="line">      <span class="attr">type:</span></span><br><span class="line">        <span class="attr">article:</span></span><br><span class="line">          <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">text:</span> <span class="string">&#x27;文章数目：&#x27;</span></span><br><span class="line">          <span class="attr">unit:</span> <span class="string">&#x27;篇&#x27;</span></span><br><span class="line">        <span class="attr">runtime:</span></span><br><span class="line">          <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">data:</span> <span class="string">&#x27;2020/01/01&#x27;</span>    <span class="comment"># 填写建站日期</span></span><br><span class="line">          <span class="attr">text:</span> <span class="string">&#x27;已运行时间：&#x27;</span></span><br><span class="line">          <span class="attr">unit:</span> <span class="string">&#x27;天&#x27;</span></span><br><span class="line">        <span class="attr">wordcount:</span></span><br><span class="line">          <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">text:</span> <span class="string">&#x27;本站总字数：&#x27;</span>   <span class="comment"># 需要启用 wordcount</span></span><br><span class="line">          <span class="attr">unit:</span> <span class="string">&#x27;字&#x27;</span></span><br><span class="line">        <span class="attr">visitcounter:</span></span><br><span class="line">          <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">siteuv:</span></span><br><span class="line">            <span class="attr">text:</span> <span class="string">&#x27;本站访客数：&#x27;</span></span><br><span class="line">            <span class="attr">unit:</span> <span class="string">&#x27;人&#x27;</span></span><br><span class="line">          <span class="attr">sitepv:</span></span><br><span class="line">            <span class="attr">text:</span> <span class="string">&#x27;本站总访问量：&#x27;</span></span><br><span class="line">            <span class="attr">unit:</span> <span class="string">&#x27;次&#x27;</span></span><br><span class="line">        <span class="attr">lastupd:</span></span><br><span class="line">          <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">friendlyShow:</span> <span class="literal">true</span>    <span class="comment"># 更友好的时间显示</span></span><br><span class="line">          <span class="attr">text:</span> <span class="string">&#x27;最后活动时间：&#x27;</span></span><br><span class="line">          <span class="attr">unit:</span> <span class="string">&#x27;日&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="4-文章布局（Article-Layout）"><a href="#4-文章布局（Article-Layout）" class="headerlink" title="4. 文章布局（Article Layout）"></a>4. 文章布局（Article Layout）</h3><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文章布局</span></span><br><span class="line"><span class="attr">article:</span></span><br><span class="line">  <span class="attr">body:</span></span><br><span class="line">    <span class="comment"># 文章顶部信息</span></span><br><span class="line">    <span class="comment"># 从 meta_library 中取</span></span><br><span class="line">    <span class="attr">top_meta:</span> [<span class="string">author</span>, <span class="string">category</span>, <span class="string">date</span>, <span class="string">counter</span>, <span class="string">wordcount</span>]</span><br><span class="line">    <span class="comment"># 文章底部信息</span></span><br><span class="line">    <span class="comment"># 从 meta_library 中取</span></span><br><span class="line">    <span class="attr">bottom_meta:</span> [<span class="string">updated</span>, <span class="string">tags</span>, <span class="string">share</span>]</span><br><span class="line">    <span class="comment"># ----------------</span></span><br><span class="line">    <span class="comment"># 文章页脚组件</span></span><br><span class="line">    <span class="attr">footer_widget:</span></span><br><span class="line">      <span class="comment"># ----------------</span></span><br><span class="line">      <span class="comment"># 参考资料、相关资料等 (for layout: post/docs)</span></span><br><span class="line">      <span class="attr">references:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">参考资料</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-quote-left</span></span><br><span class="line">        <span class="comment"># 在 front-matter 中:</span></span><br><span class="line">        <span class="comment">#   references:</span></span><br><span class="line">        <span class="comment">#     - title: 某篇文章</span></span><br><span class="line">        <span class="comment">#       url: https://</span></span><br><span class="line">        <span class="comment"># 即可显示此组件。</span></span><br><span class="line">      <span class="comment"># ----------------</span></span><br><span class="line">      <span class="comment"># 文章推荐 (for layout: post/docs)</span></span><br><span class="line">      <span class="comment"># 推荐算法需要依赖中文分词工具，nodejieba只支持中英文 npm i nodejieba -S</span></span><br><span class="line">      <span class="attr">recommended_article:</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">layout:</span> [<span class="string">&quot;post&quot;</span>, <span class="string">&quot;docs&quot;</span>]</span><br><span class="line">        <span class="attr">title:</span> <span class="string">推荐阅读</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-bookmark</span></span><br><span class="line">        <span class="attr">max_count:</span> <span class="number">6</span></span><br><span class="line">        <span class="attr">placeholder_img:</span> <span class="string">https://gcore.jsdelivr.net/gh/MHG-LAB/cron@gh-pages/bing/bing.jpg</span></span><br><span class="line">        <span class="comment"># 不展示文章推荐</span></span><br><span class="line">        <span class="comment"># front-matter 使用 skip_recommended_article: true 关闭</span></span><br><span class="line">        <span class="comment"># 不在以下文件夹文章中展示文章推荐 根目录是source/</span></span><br><span class="line">        <span class="attr">skip_dirs:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">wiki/</span></span><br><span class="line">      <span class="comment"># ----------------</span></span><br><span class="line">      <span class="comment"># 相关文章，需要安装插件 (for layout: post)</span></span><br><span class="line">      <span class="comment"># npm i hexo-related-popular-posts</span></span><br><span class="line">      <span class="attr">related_posts:</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">相关文章</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fa-solid</span> <span class="string">fa-bookmark</span></span><br><span class="line">        <span class="attr">max_count:</span> <span class="number">5</span></span><br><span class="line">        <span class="comment"># 设为空则不使用文章头图</span></span><br><span class="line">        <span class="attr">placeholder_img:</span> <span class="string">https://gcore.jsdelivr.net/gh/MHG-LAB/cron@gh-pages/bing/bing.jpg</span></span><br><span class="line">      <span class="comment"># ----------------</span></span><br><span class="line">      <span class="comment"># 版权声明组件 (for layout: post)</span></span><br><span class="line">      <span class="attr">copyright:</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">permalink:</span> <span class="string">&#x27;本文永久链接是：&#x27;</span></span><br><span class="line">        <span class="attr">content:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">&#x27;博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议&#x27;</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">permalink</span></span><br><span class="line">         <span class="comment"># 自定义版权组件：精细到文章的版权声明</span></span><br><span class="line">        <span class="attr">custom:</span> <span class="literal">false</span> <span class="comment"># 开启后替代上方内容的版权显示</span></span><br><span class="line">        <span class="attr">customData:</span></span><br><span class="line">          <span class="attr">default:</span> <span class="string">type1</span>  <span class="comment"># 默认授权声明</span></span><br><span class="line">          <span class="comment">#############################</span></span><br><span class="line">          <span class="comment"># 你可以在文章的 front-matter 覆盖默认版权声明</span></span><br><span class="line">          <span class="comment"># 配置示例（均可选）： </span></span><br><span class="line">          <span class="comment"># copyright:</span></span><br><span class="line">          <span class="comment">#   type: type3           # 当前文章版权声明类型</span></span><br><span class="line">          <span class="comment">#   author: 张三          # 本文作者</span></span><br><span class="line">          <span class="comment">#   ref:                  # 原文出处</span></span><br><span class="line">          <span class="comment">#     title:              # 原文出处 - 标题</span></span><br><span class="line">          <span class="comment">#     url:                # 原文出处 - 链接</span></span><br><span class="line">          <span class="comment">#############################</span></span><br><span class="line">          <span class="attr">rules:</span></span><br><span class="line">            <span class="attr">type1:</span> </span><br><span class="line">              <span class="attr">text:</span> <span class="string">&lt;a</span> <span class="string">href=&quot;https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh#&quot;</span> <span class="string">target=&quot;_blank&quot;&gt;CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span><span class="string">&lt;/a&gt;</span></span><br><span class="line">              <span class="attr">desc:</span> <span class="string">署名-非商业性使用-相同方式共享</span> <span class="number">4.0</span> <span class="string">国际。</span></span><br><span class="line">            <span class="attr">type2:</span> </span><br><span class="line">              <span class="attr">text:</span> <span class="string">禁止转载引用</span></span><br><span class="line">              <span class="attr">desc:</span> <span class="string">除非获得原作者的单独授权，任何第三方不得转载！</span></span><br><span class="line">            <span class="attr">type3:</span> </span><br><span class="line">              <span class="attr">text:</span> <span class="string">原作许可协议</span></span><br><span class="line">              <span class="attr">desc:</span> <span class="string">本文转载自他站，转载或引用本文时，请遵守原作许可协议！</span></span><br><span class="line">            <span class="attr">type4:</span> </span><br><span class="line">              <span class="attr">text:</span> <span class="string">来自互联网</span></span><br><span class="line">              <span class="attr">desc:</span> <span class="string">本文来自互联网，未知来源，侵权请联系删除。</span></span><br><span class="line">            <span class="attr">type5:</span></span><br><span class="line">              <span class="attr">text:</span> <span class="string">允许规范转载</span></span><br><span class="line">              <span class="attr">desc:</span> <span class="string">转载请保留本文转载地址，著作权归作者所有！</span></span><br><span class="line">            <span class="attr">type6:</span></span><br><span class="line">              <span class="attr">text:</span> <span class="string">允许付费转载</span></span><br><span class="line">              <span class="attr">desc:</span> <span class="string">您可以联系作者通过付费方式获得授权。</span></span><br><span class="line">            <span class="comment"># 还能自行添加更多</span></span><br><span class="line">    <span class="comment"># ----------------</span></span><br><span class="line">    <span class="comment"># meta library</span></span><br><span class="line">    <span class="attr">meta_library:</span></span><br><span class="line">      <span class="attr">author:</span></span><br><span class="line">        <span class="attr">avatar:</span> <span class="string">/custom/avatar.jpg</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">TiDra</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">/</span></span><br></pre></td></tr></table></figure><h3 id="5-评论（Comments）"><a href="#5-评论（Comments）" class="headerlink" title="5. 评论（Comments）"></a>5. 评论（Comments）</h3><p>使用giscus作为评论</p><ol><li>该仓库是 <code>公开的</code> ，否则访客将无法查看 discussion。</li><li><a href="https://github.com/apps/giscus"><code>giscus app</code></a> 已安装，否则访客将无法评论和回应。</li><li><a href="https://docs.github.com/en/github/administering-a-repository/managing-repository-settings/enabling-or-disabling-github-discussions-for-a-repository"><code>Discussions</code></a> 功能已在你的仓库中启用。</li><li>前往 <a href="https://giscus.app/zh-CN"><code>giscus.app</code></a> 网站获取以下信息。<figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">&lt;i</span> <span class="string">class=&#x27;fa-solid</span> <span class="string">fa-comments&#x27;&gt;&lt;/i&gt;</span> <span class="string">评论</span></span><br><span class="line">  <span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">giscus</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># giscus</span></span><br><span class="line">  <span class="comment"># https://giscus.app</span></span><br><span class="line">  <span class="comment"># https://github.com/laymonage/giscus</span></span><br><span class="line">  <span class="attr">giscus:</span></span><br><span class="line">    <span class="comment"># 以下配置按照 yml 格式增删填写即可</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">xxxxxxxxxxx</span></span><br><span class="line">    <span class="attr">repo-id:</span> <span class="string">xxxxxx</span></span><br><span class="line">    <span class="attr">category:</span> <span class="string">Announcements</span></span><br><span class="line">    <span class="attr">category-id:</span> <span class="string">xxxxxxxxxx</span></span><br><span class="line">    <span class="attr">mapping:</span> <span class="string">&quot;pathname&quot;</span></span><br><span class="line">    <span class="attr">reactions-enabled:</span> <span class="string">&quot;1&quot;</span></span><br><span class="line">    <span class="attr">emit-metadata:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="attr">lang:</span> <span class="string">&quot;zh-CN&quot;</span></span><br><span class="line">    <span class="comment"># 以上配置按照 yml 格式增删填写即可</span></span><br><span class="line">    <span class="attr">theme:</span></span><br><span class="line">      <span class="attr">light:</span> <span class="string">&quot;light&quot;</span></span><br><span class="line">      <span class="attr">dark:</span> <span class="string">&quot;noborder_dark&quot;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="6-页脚（Site-Footer）"><a href="#6-页脚（Site-Footer）" class="headerlink" title="6. 页脚（Site Footer）"></a>6. 页脚（Site Footer）</h3><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">site_footer:</span></span><br><span class="line">  <span class="attr">layout:</span> [<span class="string">social</span>, <span class="string">license</span>, <span class="string">copyright</span>]</span><br><span class="line">  <span class="attr">social:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">icon:</span> <span class="comment">#fa-solid fa-rss</span></span><br><span class="line">      <span class="attr">url:</span></span><br><span class="line">    <span class="comment"># or</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/common/logo.svg</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">    <span class="comment"># or</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">avatar:</span></span><br><span class="line">      <span class="attr">url:</span></span><br><span class="line">  <span class="comment"># site source</span></span><br><span class="line">  <span class="attr">source:</span> <span class="string">https://github.com/Tidra/tidra.github.io/</span></span><br><span class="line">  <span class="comment"># analytics using busuanzi</span></span><br><span class="line">  <span class="attr">analytics:</span> <span class="string">&gt;</span></span><br><span class="line"><span class="string">    &lt;span&gt;本站总访问量为 &lt;span id=&#x27;busuanzi_value_site_pv&#x27;&gt;&lt;i class=&quot;fa-solid fa-loader fa-spin fa-fw&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;/span&gt; 次&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;span&gt;访客数为 &lt;span id=&#x27;busuanzi_value_site_uv&#x27;&gt;&lt;i class=&quot;fa-solid fa-loader fa-spin fa-fw&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;/span&gt; 人&lt;/span&gt;</span></span><br><span class="line"><span class="string"></span>  <span class="comment"># site copyright</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="string">&#x27;[Copyright © since 2024 小TiD笔记](/)&#x27;</span></span><br><span class="line">  <span class="comment"># You can add your own property here. (Support markdown, for example: br: &#x27;&lt;br&gt;&#x27;)</span></span><br><span class="line">  <span class="attr">br:</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="7-自定义样式（Custom-css）"><a href="#7-自定义样式（Custom-css）" class="headerlink" title="7. 自定义样式（Custom css）"></a>7. 自定义样式（Custom css）</h3><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_css:</span></span><br><span class="line">  <span class="attr">gap:</span></span><br><span class="line">    <span class="attr">h2:</span> <span class="string">48px</span> <span class="comment"># Spacing above H2 (only px unit)</span></span><br><span class="line">    <span class="attr">h3:</span> <span class="string">24px</span> <span class="comment"># Spacing above H3 (only px unit)</span></span><br><span class="line">    <span class="attr">h4:</span> <span class="string">16px</span> <span class="comment"># Spacing above H4 (only px unit)</span></span><br><span class="line">    <span class="attr">p:</span> <span class="string">1em</span> <span class="comment"># Paragraph spacing between paragraphs</span></span><br><span class="line">    <span class="attr">line_height:</span> <span class="number">1.5</span> <span class="comment"># normal, 1.5, 1.75, 2 ...</span></span><br><span class="line">  <span class="attr">fontsize:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">16px</span></span><br><span class="line">    <span class="attr">h1:</span> <span class="number">1.</span><span class="string">5rem</span> <span class="comment"># 不推荐用在文章中</span></span><br><span class="line">    <span class="attr">h2:</span> <span class="number">1.</span><span class="string">5rem</span></span><br><span class="line">    <span class="attr">h3:</span> <span class="number">1.</span><span class="string">25rem</span></span><br><span class="line">    <span class="attr">h4:</span> <span class="number">1.</span><span class="string">125rem</span></span><br><span class="line">    <span class="attr">h5:</span> <span class="string">1rem</span></span><br><span class="line">    <span class="attr">h6:</span> <span class="string">1rem</span></span><br><span class="line">    <span class="attr">list:</span> <span class="string">.9375rem</span></span><br><span class="line">    <span class="attr">meta:</span> <span class="string">.875rem</span></span><br><span class="line">    <span class="attr">code:</span> <span class="string">.875rem</span></span><br><span class="line">    <span class="attr">footnote:</span> <span class="string">.78125rem</span></span><br><span class="line">  <span class="attr">fontfamily:</span></span><br><span class="line">    <span class="attr">logofont:</span></span><br><span class="line">      <span class="attr">fontfamily:</span> <span class="string">&#x27;LiuJianMaoCao, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial&#x27;</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&#x27;LiuJianMaoCao&#x27;</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://cdn.jsdelivr.net/gh/inkss/common@1/fonts/canva/LiuJianMaoCao.woff2</span></span><br><span class="line">      <span class="attr">weight:</span> <span class="string">normal</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">normal</span></span><br><span class="line">    <span class="attr">bodyfont:</span></span><br><span class="line">      <span class="attr">fontfamily:</span> <span class="string">&#x27;&quot;OPPO Sans Medium&quot;, UbuntuMono, &quot;Varela Round&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, Helvetica, Arial&#x27;</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&#x27;OPPO Sans Medium&#x27;</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/custom/OPPOSans-Medium.woff2</span></span><br><span class="line">      <span class="attr">weight:</span> <span class="string">normal</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">normal</span></span><br><span class="line">    <span class="attr">codefont:</span></span><br><span class="line">      <span class="attr">fontfamily:</span> <span class="string">&#x27;consolas, Menlo, UbuntuMono, Monaco&#x27;</span></span><br><span class="line">      <span class="comment"># name: &#x27;Monaco&#x27;</span></span><br><span class="line">      <span class="comment"># url: volantis-static/media/fonts/Monaco/Monaco.ttf # https://cdn.jsdelivr.net/gh/volantis-x/cdn-fonts/Monaco/Monaco.ttf</span></span><br><span class="line">      <span class="comment"># weight: normal</span></span><br><span class="line">      <span class="comment"># style: normal</span></span><br></pre></td></tr></table></figure><h3 id="8-自定义右键菜单（Rightmenu）"><a href="#8-自定义右键菜单（Rightmenu）" class="headerlink" title="8. 自定义右键菜单（Rightmenu）"></a>8. 自定义右键菜单（Rightmenu）</h3><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 自定义右键</span></span><br><span class="line"><span class="attr">rightmenus:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="9-SEO相关"><a href="#9-SEO相关" class="headerlink" title="9. SEO相关"></a>9. SEO相关</h3><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">############################### Open Graph ############################### &gt; start</span></span><br><span class="line"><span class="comment"># https://ogp.me/</span></span><br><span class="line"><span class="comment"># https://hexo.io/zh-cn/docs/helpers#open-graph</span></span><br><span class="line"><span class="attr">open_graph:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">/custom/log.svg</span></span><br><span class="line">  <span class="attr">twitter_card:</span> <span class="string">summary</span> <span class="comment"># summary_large_image , summary</span></span><br><span class="line">  <span class="comment">#twitter_id:</span></span><br><span class="line">  <span class="comment">#twitter_site:</span></span><br><span class="line"><span class="comment">############################### Open Graph ############################### &gt; end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">############################### Structured Data ############################### &gt; start</span></span><br><span class="line"><span class="comment"># SEO 入门文档: https://developers.google.com/search/docs</span></span><br><span class="line"><span class="comment"># https://schema.org.cn/</span></span><br><span class="line"><span class="comment"># 结构化数据用于更改搜索结果的显示效果</span></span><br><span class="line"><span class="comment"># 目前内置的结构化数据: blogposting, breadcrumblist, organization, person, website</span></span><br><span class="line"><span class="comment"># 目前内置的富媒体搜索结果: 路径(面包屑导航), 徽标(Logo), 站点链接搜索框(SearchAction)</span></span><br><span class="line"><span class="comment"># https://developers.google.com/search/docs/advanced/structured-data/intro-structured-data</span></span><br><span class="line"><span class="comment"># 富媒体搜索结果测试: https://search.google.com/test/rich-results</span></span><br><span class="line"><span class="attr">structured_data:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 以下是覆盖配置, 默认配置见 scripts/helpers/structured-data/lib/config.js</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">    <span class="attr">person:</span></span><br><span class="line">      <span class="attr">sns:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://github.com/Tidra</span></span><br><span class="line">    <span class="attr">logo:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/custom/log.svg</span></span><br><span class="line">      <span class="attr">width:</span> <span class="number">192</span></span><br><span class="line">      <span class="attr">height:</span> <span class="number">192</span></span><br><span class="line"><span class="comment">############################### Structured Data ############################### &gt; end</span></span><br></pre></td></tr></table></figure><h2 id="插件（Plugins）"><a href="#插件（Plugins）" class="headerlink" title="插件（Plugins）"></a>插件（Plugins）</h2><p>插件全部都在标签 <code>plugins:</code> 下</p><h3 id="1-搜索（Search）"><a href="#1-搜索（Search）" class="headerlink" title="1. 搜索（Search）"></a>1. 搜索（Search）</h3><p>6.0默认开启</p><ol><li><p>需要先安装插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-generator-json-content</span><br></pre></td></tr></table></figure></li><li><p>如需配置，如下</p><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">hexo</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="2-暗黑模式"><a href="#2-暗黑模式" class="headerlink" title="2. 暗黑模式"></a>2. 暗黑模式</h3><h4 id="普通使用"><a href="#普通使用" class="headerlink" title="普通使用"></a>普通使用</h4><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="comment"># 暗黑模式 darkmode</span></span><br><span class="line">  <span class="attr">darkmode:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h4 id="增加自定义过度动画"><a href="#增加自定义过度动画" class="headerlink" title="增加自定义过度动画"></a>增加自定义过度动画</h4><ol><li><p>开启jquery</p><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="comment"># jquery</span></span><br><span class="line">  <span class="attr">globalJquery:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>新增js文件 <code>source/custom/darkmode.js</code> </p><figure class="highlight js"><figcaption><span>source/custom/darkmode.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">BackTOP</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;#btn&quot;</span>).<span class="title function_">hide</span>();</span><br><span class="line">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        $(<span class="variable language_">window</span>).<span class="title function_">scroll</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> ($(<span class="variable language_">window</span>).<span class="title function_">scrollTop</span>() &gt; <span class="number">50</span>) &#123;</span><br><span class="line">                $(<span class="string">&quot;#btn&quot;</span>).<span class="title function_">fadeIn</span>(<span class="number">200</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $(<span class="string">&quot;#btn&quot;</span>).<span class="title function_">fadeOut</span>(<span class="number">200</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        $(<span class="string">&quot;#btn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            $(<span class="string">&#x27;body,html&#x27;</span>).<span class="title function_">animate</span>(&#123;</span><br><span class="line">                    <span class="attr">scrollTop</span>: <span class="number">0</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="number">500</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        $(<span class="string">&quot;#say&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            $(<span class="string">&#x27;body,html&#x27;</span>).<span class="title function_">animate</span>(&#123;</span><br><span class="line">                    <span class="attr">scrollTop</span>: $(<span class="string">&#x27;html, body&#x27;</span>).<span class="title function_">get</span>(<span class="number">0</span>).<span class="property">scrollHeight</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="number">500</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;#readmode&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;read-mode&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SiderMenu</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;#main-container&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;open&#x27;</span>);</span><br><span class="line">    $(<span class="string">&#x27;.iconflat&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;width&#x27;</span>, <span class="string">&#x27;50px&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;50px&#x27;</span>);</span><br><span class="line">    $(<span class="string">&#x27;.openNav&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;50px&#x27;</span>);</span><br><span class="line">    $(<span class="string">&#x27;#main-container,#mo-nav,.openNav&#x27;</span>).<span class="title function_">toggleClass</span>(<span class="string">&#x27;open&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">switchNightMode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;&lt;div class=&quot;Cuteen_DarkSky&quot;&gt;&lt;div class=&quot;Cuteen_DarkPlanet&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span>).<span class="title function_">appendTo</span>($(<span class="string">&quot;body&quot;</span>)), <span class="built_in">setTimeout</span>(</span><br><span class="line">        <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            (volantis.<span class="property">dark</span>.<span class="property">mode</span> == <span class="string">&quot;dark&quot;</span>) </span><br><span class="line">            ? </span><br><span class="line">            ($(<span class="string">&quot;html&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;DarkMode&quot;</span>),</span><br><span class="line">            $(<span class="string">&#x27;#modeicon&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&quot;xlink:href&quot;</span>, <span class="string">&quot;#icon-sun&quot;</span>)) </span><br><span class="line">            : </span><br><span class="line">            ($(<span class="string">&quot;html&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;DarkMode&quot;</span>),</span><br><span class="line">            $(<span class="string">&#x27;#modeicon&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&quot;xlink:href&quot;</span>, <span class="string">&quot;#icon-_moon&quot;</span>)), </span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                $(<span class="string">&quot;.Cuteen_DarkSky&quot;</span>).<span class="title function_">fadeOut</span>(<span class="number">1e3</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                    $(<span class="variable language_">this</span>).<span class="title function_">remove</span>()</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;, <span class="number">2e3</span>)</span><br><span class="line">        &#125;), <span class="number">50</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkNightMode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> ($(<span class="string">&quot;html&quot;</span>).<span class="title function_">hasClass</span>(<span class="string">&quot;n-f&quot;</span>)) &#123;</span><br><span class="line">        $(<span class="string">&quot;html&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;day&quot;</span>);</span><br><span class="line">        $(<span class="string">&quot;html&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;DarkMode&quot;</span>);</span><br><span class="line">        $(<span class="string">&#x27;#modeicon&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&quot;xlink:href&quot;</span>, <span class="string">&quot;#icon-sun&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ($(<span class="string">&quot;html&quot;</span>).<span class="title function_">hasClass</span>(<span class="string">&quot;d-f&quot;</span>)) &#123;</span><br><span class="line">        $(<span class="string">&quot;html&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;DarkMode&quot;</span>);</span><br><span class="line">        $(<span class="string">&quot;html&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;day&quot;</span>);</span><br><span class="line">        $(<span class="string">&#x27;#modeicon&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&quot;xlink:href&quot;</span>, <span class="string">&quot;#icon-_moon&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (volantis.<span class="property">dark</span>.<span class="property">mode</span> == <span class="string">&quot;dark&quot;</span>) &#123;</span><br><span class="line">        $(<span class="string">&quot;html&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;DarkMode&quot;</span>);</span><br><span class="line">        $(<span class="string">&#x27;#modeicon&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&quot;xlink:href&quot;</span>, <span class="string">&quot;#icon-sun&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="string">&quot;html&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;DarkMode&quot;</span>);</span><br><span class="line">        $(<span class="string">&#x27;#modeicon&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&quot;xlink:href&quot;</span>, <span class="string">&quot;#icon-_moon&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">BackTOP</span>();</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    volantis.<span class="property">dark</span>.<span class="title function_">push</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="title function_">switchNightMode</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;, &#123;<span class="attr">once</span>: <span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure></li><li><p>新增css文件 <code>source/custom/darkmode.css</code> </p><figure class="highlight css"><figcaption><span>source/custom/darkmode.css</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#RightDownBtn</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">1.875rem</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">1.875rem</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.3125rem</span> <span class="number">0.625rem</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0.1875rem</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span> ease all;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">align-items</span>: flex-end;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">display</span>: -moz-flex;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#RightDownBtn</span>&gt;<span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-id">#RightDownBtn</span>&gt;<span class="selector-tag">label</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1.5em</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1.5em</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0.3125rem</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">2s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">25</span>, .<span class="number">46</span>, .<span class="number">45</span>, .<span class="number">94</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* font color */</span></span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-id">#page</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-id">#colophon</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-id">#vcomments</span> <span class="selector-class">.vbtn</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-class">.art-content</span> <span class="selector-id">#archives</span> <span class="selector-class">.al_mon_list</span> <span class="selector-class">.al_mon</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-class">.art-content</span> <span class="selector-id">#archives</span> <span class="selector-class">.al_mon_list</span> <span class="selector-tag">span</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-tag">body</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-class">.art-content</span> <span class="selector-id">#archives</span> <span class="selector-class">.al_mon_list</span> <span class="selector-class">.al_mon</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-class">.art-content</span> <span class="selector-id">#archives</span> <span class="selector-class">.al_mon_list</span> <span class="selector-tag">span</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-tag">button</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-class">.art</span> <span class="selector-class">.art-content</span> <span class="selector-id">#archives</span> <span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-tag">textarea</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-tag">strong</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-tag">p</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-tag">li</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-class">.label</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">6</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-id">#page</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-tag">body</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-id">#colophon</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-id">#main-container</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-id">#page</span> <span class="selector-class">.yya</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-id">#content</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-id">#contentss</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-id">#footer</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#292a2d</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-tag">strong</span>,</span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">brightness</span>(.<span class="number">7</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* sun and noon */</span></span><br><span class="line"><span class="selector-class">.Cuteen_DarkSky</span>,</span><br><span class="line"><span class="selector-class">.Cuteen_DarkSky</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">88888888</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Cuteen_DarkSky</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">#feb8b0</span>, <span class="number">#fef9db</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Cuteen_DarkSky</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">2s</span> ease all;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">#4c3f6d</span>, <span class="number">#6c62bb</span>, <span class="number">#93b1ed</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.DarkMode</span> <span class="selector-class">.Cuteen_DarkSky</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Cuteen_DarkPlanet</span> &#123;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">99999999</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">    -webkit-<span class="attribute">animation</span>: CuteenPlanetMove <span class="number">2s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="attribute">animation</span>: CuteenPlanetMove <span class="number">2s</span> <span class="built_in">cubic-bezier</span>(.<span class="number">7</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="attribute">transform-origin</span>: center bottom</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> CuteenPlanetMove &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> CuteenPlanetMove &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Cuteen_DarkPlanet</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">35%</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">40%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">9.375rem</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">9.375rem</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">#fefefe</span>, <span class="number">#fffbe8</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在头部引入自定义js和css</p><figure class="highlight plaintext"><figcaption><span>source/_volantis/bodyEnd.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;/custom/darkmode.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/custom/darkmode.css&quot; type=&quot;text/css&quot;/&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="3-字数统计和访问统计"><a href="#3-字数统计和访问统计" class="headerlink" title="3. 字数统计和访问统计"></a>3. 字数统计和访问统计</h3><ol><li><p>字数统计需要先安装统计插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-wordcount</span><br></pre></td></tr></table></figure></li><li><p>开启字数统计、访问统计</p><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="comment"># 字数统计</span></span><br><span class="line">  <span class="attr">wordcount:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 访问统计</span></span><br><span class="line">  <span class="attr">busuanzi:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="4-音乐模块"><a href="#4-音乐模块" class="headerlink" title="4. 音乐模块"></a>4. 音乐模块</h3><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">  <span class="comment"># 音乐模块</span></span><br><span class="line">  <span class="attr">aplayer:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="自定义样式"><a href="#自定义样式" class="headerlink" title="自定义样式"></a>自定义样式</h2><h3 id="基础样式变更"><a href="#基础样式变更" class="headerlink" title="基础样式变更"></a>基础样式变更</h3><ol><li><p>通用模式</p><figure class="highlight styl"><figcaption><span>source/_volantis/style.styl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// log大小</span></span><br><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 侧边栏-作者栏下的图标布局居中</span></span><br><span class="line"><span class="selector-class">.widget</span><span class="selector-class">.blogger</span> <span class="selector-class">.content</span> <span class="selector-class">.social-wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    -webkit-<span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改手机端侧边栏-作者栏下的字体颜色</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.widget</span><span class="selector-class">.blogger</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="built_in">var</span>(--color-text);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置背景图片</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>; <span class="comment">// 解决阅读进度条无法显示问题</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(/custom/bg.svg) no-repeat;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--color-site-body);</span><br><span class="line">    <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">    <span class="attribute">background-size</span>: auto <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: center bottom;</span><br><span class="line">    <span class="attribute">background-blend-mode</span>: color-burn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置封面图片虚化</span></span><br><span class="line"><span class="selector-class">.cover-bg</span><span class="selector-class">.lazyload</span><span class="selector-class">.placeholder</span><span class="selector-class">.loaded</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">mask-image</span>: <span class="built_in">linear-gradient</span>(to top, transparent, black <span class="number">15%</span>);</span><br><span class="line">    <span class="attribute">mask-image</span>: <span class="built_in">linear-gradient</span>(to top, transparent, black <span class="number">15%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>暗黑模式</p><figure class="highlight styl"><figcaption><span>source/_volantis/dark.styl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// logo颜色</span></span><br><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">hue-rotate</span>(<span class="number">320deg</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 评论区</span></span><br><span class="line"><span class="comment">// main &#123;</span></span><br><span class="line"><span class="comment">//    --color-fg-default: #d9d9d9de;--color-canvas-default: #fff0;--color-canvas-subtle: #ffffff03;--color-canvas-inset: #00000030;--color-btn-primary-bg: #444;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// block块颜色（包括代码、引用背景）</span></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attr">--color-block</span>: <span class="number">#43434336</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="首页动态诗词"><a href="#首页动态诗词" class="headerlink" title="首页动态诗词"></a>首页动态诗词</h3><p>参考 <a href="https://blog.dearxuan.com/2023/01/07/Volantis%E9%AD%94%E6%94%B9%E6%95%99%E7%A8%8B/#%E9%A6%96%E9%A1%B5%E5%8A%A8%E6%80%81%E8%AF%97%E8%AF%8D%E9%80%9A%E7%94%A8">Volantis魔改教程</a></p><blockquote><div id="binft"></div></blockquote><ol><li><p>在volantis的配置文件里修改 <code>subtitle</code></p><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">############################### Cover ############################### &gt; start</span></span><br><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">subtitle:</span> <span class="string">&lt;div</span> <span class="string">id=&quot;binft&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">  <span class="string">...</span></span><br></pre></td></tr></table></figure></li><li><p>以defer方式引入以下js,注意把里面的诗词改成自己的</p><figure class="highlight js"><figcaption><span>source/custom/binft.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> binft = <span class="keyword">function</span> (<span class="params">r</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> isTransparent = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getRandomColor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(isTransparent)&#123;</span><br><span class="line">            isTransparent = <span class="literal">false</span>;</span><br><span class="line">            <span class="comment">//此处修改字体颜色,最后的 0 和 1 不要改</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;rgba(255,255,255,0)&quot;</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            isTransparent = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;rgba(255,255,255,1)&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">n</span>(<span class="params">r</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> n = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>(), i = <span class="number">0</span>; r &gt; i; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> oneword = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;span&quot;</span>);</span><br><span class="line">            oneword.<span class="property">textContent</span> = <span class="string">&quot;_&quot;</span>; <span class="comment">// 此处是末尾字符,如果想用光标样式可以改为&quot;|&quot;</span></span><br><span class="line">            oneword.<span class="property">style</span>.<span class="property">color</span> = <span class="title function_">getRandomColor</span>();</span><br><span class="line">            n.<span class="title function_">appendChild</span>(oneword);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">i</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> t = wordList[c.<span class="property">skillI</span>];</span><br><span class="line">        c.<span class="property">step</span> ? c.<span class="property">step</span>-- : (c.<span class="property">step</span> = refreshDelayTime, c.<span class="property">prefixP</span> &lt; l.<span class="property">length</span> ? (c.<span class="property">prefixP</span> &gt;= <span class="number">0</span> &amp;&amp; (c.<span class="property">text</span> += l[c.<span class="property">prefixP</span>]), c.<span class="property">prefixP</span>++) : <span class="string">&quot;forward&quot;</span> === c.<span class="property">direction</span> ? c.<span class="property">skillP</span> &lt; t.<span class="property">length</span> ? (c.<span class="property">text</span> += t[c.<span class="property">skillP</span>], c.<span class="property">skillP</span>++) : c.<span class="property">delay</span> ? c.<span class="property">delay</span>-- : (c.<span class="property">direction</span> = <span class="string">&quot;backward&quot;</span>, c.<span class="property">delay</span> = showTotalWordDelayTime) : c.<span class="property">skillP</span> &gt; <span class="number">0</span> ? (c.<span class="property">text</span> = c.<span class="property">text</span>.<span class="title function_">slice</span>(<span class="number">0</span>, -<span class="number">1</span>), c.<span class="property">skillP</span>--) : (c.<span class="property">skillI</span> = (c.<span class="property">skillI</span> + <span class="number">1</span>) % wordList.<span class="property">length</span>, c.<span class="property">direction</span> = <span class="string">&quot;forward&quot;</span>)), r.<span class="property">textContent</span> = c.<span class="property">text</span>, r.<span class="title function_">appendChild</span>(<span class="title function_">n</span>(c.<span class="property">prefixP</span> &lt; l.<span class="property">length</span> ? <span class="title class_">Math</span>.<span class="title function_">min</span>(maxLength, maxLength + c.<span class="property">prefixP</span>) : <span class="title class_">Math</span>.<span class="title function_">min</span>(maxLength, t.<span class="property">length</span> - c.<span class="property">skillP</span>))), <span class="built_in">setTimeout</span>(i, d)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> l = <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="comment">//此处改成你自己的诗词</span></span><br><span class="line">    wordList = [ </span><br><span class="line">            <span class="string">&quot;有花堪折直需折,莫待无花空折枝.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;闲居少邻并,草径入荒园.鸟宿池边树,僧敲月下门.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;侯门一入深如海,从此萧郎是路人.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;才见岭头云似盖,已惊岩下雪如尘.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;人间万事消磨尽,只有清香似旧时.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;日暮酒醒人已远,满天风雨下西楼.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;落灯花,棋未收,叹新丰逆旅淹留.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;软风吹过窗纱,心期便隔天涯.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;迷惑失故路,薄暮无宿栖.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;不见白头相携老,只许与君共天明.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;晓迎秋露一枝新,不占园中最上春.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;荷尽已无擎雨盖,菊残犹有傲霜枝.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;春未绿,鬓先丝.人间别久不成悲.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;江东子弟多才俊,卷土重来未可知.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;莫听穿林打叶声,何妨吟啸且徐行.&quot;</span>,</span><br><span class="line">            <span class="string">&quot;在天愿作比翼鸟,在地愿为连理枝.&quot;</span>,</span><br><span class="line">        ].<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">r</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> r + <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    showTotalWordDelayTime = <span class="number">2</span>,</span><br><span class="line">    refreshDelayTime = <span class="number">1</span>,</span><br><span class="line">    maxLength = <span class="number">1</span>,</span><br><span class="line">    d = <span class="number">75</span>,</span><br><span class="line">    c = &#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">prefixP</span>: -maxLength,</span><br><span class="line">        <span class="attr">skillI</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">skillP</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">direction</span>: <span class="string">&quot;forward&quot;</span>,</span><br><span class="line">        <span class="attr">delay</span>: showTotalWordDelayTime,</span><br><span class="line">        <span class="attr">step</span>: refreshDelayTime</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">i</span>()</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">binft</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;binft&#x27;</span>));</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;初始化&quot;&gt;&lt;a href=&quot;#初始化&quot; class=&quot;headerlink&quot; title=&quot;初始化&quot;&gt;&lt;/a&gt;初始化&lt;/h2&gt;&lt;p&gt;安装hexo并且配置主题volantis&lt;/p&gt;
&lt;h3 id=&quot;1-安装hexo并初始化&quot;&gt;&lt;a href=&quot;#1-安装hexo并</summary>
      
    
    
    
    <category term="前端" scheme="https://www.tidnotes.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Hexo相关" scheme="https://www.tidnotes.top/categories/%E5%89%8D%E7%AB%AF/Hexo%E7%9B%B8%E5%85%B3/"/>
    
    <category term="工具" scheme="https://www.tidnotes.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Hexo" scheme="https://www.tidnotes.top/tags/Hexo/"/>
    
    <category term="Volantis" scheme="https://www.tidnotes.top/tags/Volantis/"/>
    
    <category term="主题" scheme="https://www.tidnotes.top/tags/%E4%B8%BB%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>iPhone/MAC添加中国法定节假日日历</title>
    <link href="https://www.tidnotes.top/post/iphone-mac-add-chinese-holiday/"/>
    <id>https://www.tidnotes.top/post/iphone-mac-add-chinese-holiday/</id>
    <published>2021-04-17T14:21:49.000Z</published>
    <updated>2024-04-16T13:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>新系统已经自动添加“中国节假日”订阅，以下方法仅供参考</p></blockquote><!---more----><p>iphone和MAC可以自定义添加法定假日的日历，但发现网上使用的如下订阅源已无法使用。<br><a href="webcal://p10-calendars.icloud.com/published/2/MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q">webcal:&#x2F;&#x2F;p10-calendars.icloud.com&#x2F;published&#x2F;2&#x2F;MTI3Njk0MTQxNzEyNzY5NFRvxM53AOH-Px17vHeUETlZdUggoyEt2KnFiIqHg40FkRXfcQJjYoa2dULRarI9z4UlbHxK-kLOohfiRVSSP7Q</a></p><p>另外，icloud提供日历订阅源（如下）。<br><a href="https://calendars.icloud.com/holidays/cn_zh.ics">https://calendars.icloud.com/holidays/cn_zh.ics</a></p><p>所以我把日历订阅源提交到服务器中，网址如下。供大家使用<br><strong>下载：</strong><a href="/code/cn_zh.ics">https://www.tidnotes.top/code/cn_zh.ics</a><br><strong>订阅：</strong><a href="webcal://www.tidnotes.top/code/cn_zh.ics">webcal:&#x2F;&#x2F;www.tidnotes.top/code/cn_zh.ics</a></p><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><h3 id="iPhone订阅方法："><a href="#iPhone订阅方法：" class="headerlink" title="iPhone订阅方法："></a>iPhone订阅方法：</h3><p>打开手机[设置] -&gt; [日历] -&gt; [账户] -&gt; [添加账户] -&gt; [其他] -&gt; [添加已订阅的日历] -&gt; [将<a href="#web">上方的网址</a>粘贴进去]</p><h3 id="MAC日历订阅方法："><a href="#MAC日历订阅方法：" class="headerlink" title="MAC日历订阅方法："></a>MAC日历订阅方法：</h3><p>打开日历应用，点击左上角的[文件] -&gt; [新建日历订阅] -&gt; [粘贴<a href="#web">上方的网址</a>]</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;新系统已经自动添加“中国节假日”订阅，以下方法仅供参考&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!---more----&gt;

&lt;p&gt;iphone和MAC可以自定义添加法定假日的日历，但发现网上使用的如下订阅源已无法使用。&lt;br&gt;&lt;a href=&quot;we</summary>
      
    
    
    
    <category term="工具" scheme="https://www.tidnotes.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="iphone" scheme="https://www.tidnotes.top/tags/iphone/"/>
    
    <category term="mac" scheme="https://www.tidnotes.top/tags/mac/"/>
    
    <category term="日历" scheme="https://www.tidnotes.top/tags/%E6%97%A5%E5%8E%86/"/>
    
    <category term="订阅源" scheme="https://www.tidnotes.top/tags/%E8%AE%A2%E9%98%85%E6%BA%90/"/>
    
  </entry>
  
  <entry>
    <title>OpenWrt原生动态DNS实现DNSPod支持</title>
    <link href="https://www.tidnotes.top/post/openwrt-ddns-dnspod/"/>
    <id>https://www.tidnotes.top/post/openwrt-ddns-dnspod/</id>
    <published>2020-06-11T13:18:45.000Z</published>
    <updated>2024-04-16T07:14:16.171Z</updated>
    
    <content type="html"><![CDATA[<p>使用 <code>openwrt</code> 可以自定义安装原生的动态 dns插件（Dynamic DNS），但是并不支持<br> <code>DNSPod</code> 的 <code>ddns</code> 自动更新ip。</p><p>对于目前这个问题，一般可以通过编写脚本来实现，或者可以添加 <code>DNSPod</code> 的功能支持。</p><p>目前发现，L大的LEDE源码中已经集成了该插件源码（<a href="https://github.com/coolsnowwolf/lede/tree/master/package/lean/ddns-scripts_dnspod">https://github.com/coolsnowwolf/lede/tree/master/package/lean/ddns-scripts_dnspod</a>），并且做了优化集成了 <code>.cn</code> 和 <code>.com</code> 的脚本维护者是：Small_5。还有<a href="https://github.com/nixonli">nixonli</a>也编写了一个简单的代码支持（<a href="https://github.com/nixonli/ddns-scripts_dnspod">https://github.com/nixonli/ddns-scripts_dnspod</a>）。</p><p>下面是介绍以nixonli的代码使用方法。  </p><blockquote><p><strong>注意：如果ddns显示的日志中文部分出现问题，可以参考《<a href="/2020/06/01/ddns-writelog/">关于DDNS日志输出中文问题</a>》修改。</strong></p></blockquote><p>以下方法需要以下的插件支持，请先安装：</p><ul><li><code>ddns</code></li><li><code>curl</code></li><li><code>sed</code></li></ul><h2 id="方法一：添加代码文件"><a href="#方法一：添加代码文件" class="headerlink" title="方法一：添加代码文件"></a>方法一：添加代码文件</h2><p>编辑添加文件 <code>/usr/lib/ddns/update_dnspod_cn.sh</code> 。以下代码是根据nixonli的代码修改了一部分提示。</p><figure class="highlight bash"><figcaption><span>/usr/lib/ddns/update_dnspod_cn.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#检查传入参数</span></span><br><span class="line">[ -z <span class="string">&quot;<span class="variable">$username</span>&quot;</span> ] &amp;&amp; write_log 14 <span class="string">&quot;配置错误![用户名]不能为空&quot;</span></span><br><span class="line">[ -z <span class="string">&quot;<span class="variable">$password</span>&quot;</span> ] &amp;&amp; write_log 14 <span class="string">&quot;配置错误![密码]不能为空&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#检查外部工具curl,sed</span></span><br><span class="line"><span class="built_in">command</span> -v curl &gt;/dev/null 2&gt;&amp;1  write_log 13 <span class="string">&quot;需要curl支持,请先安装&quot;</span></span><br><span class="line"><span class="built_in">command</span> -v sed &gt;/dev/null 2&gt;&amp;1  write_log 13 <span class="string">&quot;需要 sed 支持，请先安装&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 变量声明</span></span><br><span class="line"><span class="built_in">local</span> __HOST __DOMAIN __TYPE __RECIP __RECID DATFILE</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 从 $domain 分离主机和域名</span></span><br><span class="line">[ <span class="string">&quot;<span class="variable">$&#123;domain:0:2&#125;</span>&quot;</span> == <span class="string">&quot;@.&quot;</span> ] &amp;&amp; domain=<span class="string">&quot;<span class="variable">$&#123;domain/./&#125;</span>&quot;</span> <span class="comment"># 主域名处理</span></span><br><span class="line">[ <span class="string">&quot;<span class="variable">$domain</span>&quot;</span> == <span class="string">&quot;<span class="variable">$&#123;domain/@/&#125;</span>&quot;</span> ] &amp;&amp; domain=<span class="string">&quot;<span class="variable">$&#123;domain/./@&#125;</span>&quot;</span> <span class="comment"># 未找到分隔符，兼容常用域名格式</span></span><br><span class="line">__HOST=<span class="string">&quot;<span class="variable">$&#123;domain%%@*&#125;</span>&quot;</span></span><br><span class="line">__DOMAIN=<span class="string">&quot;<span class="variable">$&#123;domain#*@&#125;</span>&quot;</span></span><br><span class="line">[ -z <span class="string">&quot;<span class="variable">$__HOST</span>&quot;</span> -o <span class="string">&quot;<span class="variable">$__HOST</span>&quot;</span> == <span class="string">&quot;<span class="variable">$__DOMAIN</span>&quot;</span> ] &amp;&amp; __HOST=<span class="string">&quot;@&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 设置记录类型</span></span><br><span class="line">[ <span class="variable">$use_ipv6</span> -eq 0 ] &amp;&amp; __TYPE=<span class="string">&quot;A&quot;</span>  __TYPE=<span class="string">&quot;AAAA&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#添加解析记录</span></span><br><span class="line"><span class="function"><span class="title">add_domain</span></span>() &#123;</span><br><span class="line">DATFILE=`curl -s -d <span class="string">&quot;login_token=<span class="variable">$username</span>,<span class="variable">$password</span>&amp;format=json&amp;domain=<span class="variable">$__DOMAIN</span>&amp;sub_domain=<span class="variable">$__HOST</span>&amp;record_type=<span class="variable">$__TYPE</span>&amp;record_line_id=0&amp;value=<span class="variable">$&#123;__IP&#125;</span>&quot;</span> <span class="string">&quot;https://dnsapi.cn/Record.Create&quot;</span>`</span><br><span class="line">value=`jsonfilter -s <span class="string">&quot;<span class="variable">$DATFILE</span>&quot;</span> -e <span class="string">&quot;@.status.code&quot;</span>`</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$value</span> == 1 ];<span class="keyword">then</span></span><br><span class="line">write_log 7 <span class="string">&quot;添加新解析记录IP:[<span class="variable">$__HOST</span>],[<span class="variable">$__TYPE</span>],[<span class="variable">$&#123;__IP&#125;</span>]成功!&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">write_log 13 <span class="string">&quot;添加解析记录IP:[<span class="variable">$__HOST</span>],[<span class="variable">$__TYPE</span>],[<span class="variable">$&#123;__IP&#125;</span>]失败! 返回code:<span class="variable">$value</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">#修改解析记录</span></span><br><span class="line"><span class="function"><span class="title">update_domain</span></span>() &#123;</span><br><span class="line">DATFILE=`curl -s -d <span class="string">&quot;login_token=<span class="variable">$username</span>,<span class="variable">$password</span>&amp;format=json&amp;domain=<span class="variable">$__DOMAIN</span>&amp;record_id=<span class="variable">$__RECID</span>&amp;value=<span class="variable">$&#123;__IP&#125;</span>&amp;record_type=<span class="variable">$__TYPE</span>&amp;record_line_id=0&amp;sub_domain=<span class="variable">$__HOST</span>&quot;</span> <span class="string">&quot;https://dnsapi.cn/Record.Modify&quot;</span>`</span><br><span class="line">value=`jsonfilter -s <span class="string">&quot;<span class="variable">$DATFILE</span>&quot;</span> -e <span class="string">&quot;@.status.code&quot;</span>`</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$value</span> == 1 ];<span class="keyword">then</span></span><br><span class="line">write_log 7 <span class="string">&quot;修改解析记录host:[<span class="variable">$__HOST</span>],type:[<span class="variable">$__TYPE</span>],ip:[<span class="variable">$&#123;__IP&#125;</span>]成功!&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">write_log 13 <span class="string">&quot;修改解析记录host:[<span class="variable">$__HOST</span>],type:[<span class="variable">$__TYPE</span>],ip:[<span class="variable">$&#123;__IP&#125;</span>]失败! 返回code:<span class="variable">$value</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">#获取域名解析记录</span></span><br><span class="line"><span class="function"><span class="title">describe_domain</span></span>() &#123;</span><br><span class="line">DATFILE=`curl -s -d <span class="string">&quot;login_token=<span class="variable">$username</span>,<span class="variable">$password</span>&amp;format=json&amp;domain=<span class="variable">$__DOMAIN</span>&quot;</span> <span class="string">&quot;https://dnsapi.cn/Record.List&quot;</span>`</span><br><span class="line">value=`jsonfilter -s <span class="string">&quot;<span class="variable">$DATFILE</span>&quot;</span> -e <span class="string">&quot;@.records[@.name=&#x27;<span class="variable">$__HOST</span>&#x27;].name&quot;</span>`</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$value</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">write_log 4 <span class="string">&quot;解析记录:[<span class="variable">$__HOST</span>]不存在,类型: HOST&quot;</span></span><br><span class="line">ret=1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">value=`jsonfilter -s <span class="string">&quot;<span class="variable">$DATFILE</span>&quot;</span> -e <span class="string">&quot;@.records[@.name=&#x27;<span class="variable">$__HOST</span>&#x27;].type&quot;</span>`</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$value</span>&quot;</span> != <span class="string">&quot;<span class="variable">$__TYPE</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">write_log 4 <span class="string">&quot;当前解析类型:[<span class="variable">$__TYPE</span>], 获得不匹配类型: TYPE&quot;</span></span><br><span class="line">ret=2; <span class="built_in">continue</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">__RECID=`jsonfilter -s <span class="string">&quot;<span class="variable">$DATFILE</span>&quot;</span> -e <span class="string">&quot;@.records[@.name=&#x27;<span class="variable">$__HOST</span>&#x27;].id&quot;</span>`</span><br><span class="line">write_log 7 <span class="string">&quot;获得解析记录ID:[<span class="variable">$__RECID</span>], 类型: ID&quot;</span></span><br><span class="line">__RECIP=`jsonfilter -s <span class="string">&quot;<span class="variable">$DATFILE</span>&quot;</span> -e <span class="string">&quot;@.records[@.name=&#x27;<span class="variable">$__HOST</span>&#x27;].value&quot;</span>`</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$__RECIP</span>&quot;</span> != <span class="string">&quot;<span class="variable">$&#123;__IP&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">write_log 6 <span class="string">&quot;地址需要修改,本地地址:[<span class="variable">$&#123;__IP&#125;</span>]&quot;</span></span><br><span class="line">ret=2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">return</span> <span class="variable">$ret</span></span><br><span class="line">&#125;</span><br><span class="line">describe_domain</span><br><span class="line">ret=$?</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$ret</span> == 1 ];<span class="keyword">then</span></span><br><span class="line"><span class="built_in">sleep</span> 3 &amp;&amp; add_domain</span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$ret</span> == 2 ];<span class="keyword">then</span></span><br><span class="line"><span class="built_in">sleep</span> 3 &amp;&amp; update_domain</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">write_log 15 <span class="string">&quot;本地IP：“<span class="variable">$&#123;__IP&#125;</span>” 解析记录IP：“<span class="variable">$__RECIP</span>”地址不需要修改&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">return</span> 0</span><br></pre></td></tr></table></figure><p>编辑文件 <code>/etc/ddns/services</code> ，添加以下内容。</p><figure class="highlight bash"><figcaption><span>/etc/ddns/services</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dnspod.cn&quot;</span><span class="string">&quot;update_dnspod_cn.sh&quot;</span></span><br></pre></td></tr></table></figure><p>编辑文件 <code>/etc/ddns/services_ipv6</code> ，添加以下内容。</p><figure class="highlight bash"><figcaption><span>/etc/ddns/services_ipv6</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dnspod.cn&quot;</span><span class="string">&quot;update_dnspod_cn.sh&quot;</span></span><br></pre></td></tr></table></figure><p>完成上述操作就可以在ddns内选择dnspod进行域名解析了。</p><blockquote><p><strong>注意：update_dnspod_cn.sh文件必须有可执行权限；services和services_ipv6文件最后一行必须是空行，所以上面的内容必须是倒数第二行往上。</strong></p></blockquote><h2 id="方法二：直接安装插件"><a href="#方法二：直接安装插件" class="headerlink" title="方法二：直接安装插件"></a>方法二：直接安装插件</h2><p>下载插件的安装包（<a href="https://www.nixonli.com/wp-content/uploads/2019/08/d89579eb74acd37.zip">opwnwrt x86 ddns-scripts_dnspod</a>），或者通过自行编译，编译代码见原作者的github：<a href="https://github.com/nixonli/ddns-scripts_dnspod">https://github.com/nixonli/ddns-scripts_dnspod</a>。</p><p>得到安装包后，到openwrt的后台，进入 <strong>系统→软件包（Software）</strong> ，上传文件包（Upload Package）等安装完即可。</p><blockquote><p>本文根据Nixonli博客的<a href="https://www.nixonli.com/23133.html">openwrt 原生动态DNS(DDNS) 支持DnsPod解析</a>编写，其中更改了部分的代码问题。</p><p>对于update_dnspod_cn.sh中的代码可以根据自己需要更改，复杂功能可以查看LEDE的源码，那个更加符合ddns的原来设计，不过代码大小会多一点。想要简单实现可以参考<a href="/2020/06/02/dnspod-ddns/">[Linux]自定义脚本实现DNSPod DDNS</a>。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;使用 &lt;code&gt;openwrt&lt;/code&gt; 可以自定义安装原生的动态 dns插件（Dynamic DNS），但是并不支持&lt;br&gt; &lt;code&gt;DNSPod&lt;/code&gt; 的 &lt;code&gt;ddns&lt;/code&gt; 自动更新ip。&lt;/p&gt;
&lt;p&gt;对于目前这个问题，一般可以通过</summary>
      
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="工具" scheme="https://www.tidnotes.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    <category term="Linux" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/Linux/"/>
    
    
    <category term="linux" scheme="https://www.tidnotes.top/tags/linux/"/>
    
    <category term="ddns" scheme="https://www.tidnotes.top/tags/ddns/"/>
    
    <category term="openwrt" scheme="https://www.tidnotes.top/tags/openwrt/"/>
    
    <category term="dnspod" scheme="https://www.tidnotes.top/tags/dnspod/"/>
    
  </entry>
  
  <entry>
    <title>[Linux]自定义脚本实现DNSPod DDNS</title>
    <link href="https://www.tidnotes.top/post/dnspod-ddns/"/>
    <id>https://www.tidnotes.top/post/dnspod-ddns/</id>
    <published>2020-06-02T06:55:46.000Z</published>
    <updated>2024-04-16T07:12:37.151Z</updated>
    
    <content type="html"><![CDATA[<p>OpenWrt 原生的 DDNS 并不支持 DNSPod，所以自行查了一下 DNSPod 的 API，自行写了一个shell脚本。</p><p>本脚本实现了简单的更新功能，体积极小，代码简单，可以用作参考来修改适合自己的脚本，后续我会根据需求再完善一下全部的功能。</p><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><p>首先新建一个shell文件，本文以 <code>ddns_dnspod.sh</code> 为例。将下面的代码复制到新建的shell脚本中。</p><figure class="highlight bash"><figcaption><span>ddns_dnspod.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">LOGIN_TOKEN=<span class="string">&#x27;****,************&#x27;</span></span><br><span class="line">DOMAIN=<span class="string">&#x27;tidnotes.top&#x27;</span></span><br><span class="line">RECORD_ID=<span class="string">&#x27;****&#x27;</span></span><br><span class="line">SUB_DOMAIN=<span class="string">&#x27;www&#x27;</span></span><br><span class="line">RECORD_TYPE=AAAA</span><br><span class="line">RECORD_NAME=<span class="variable">$&#123;SUB_DOMAIN&#125;</span>.<span class="variable">$&#123;DOMAIN&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 远端IP</span></span><br><span class="line"><span class="keyword">if</span> nslookup <span class="variable">$RECORD_NAMEgrep</span> Address &gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">  <span class="comment">#IPV6</span></span><br><span class="line">  remote_ip=`nslookup <span class="variable">$&#123;RECORD_NAME&#125;</span>grep -Eo <span class="string">&#x27;[0-9a-f]+(:[0-9a-f:]+)+&#x27;</span>`</span><br><span class="line">  <span class="comment">#IPV4</span></span><br><span class="line">  <span class="comment">#remote_ip=`nslookup $&#123;RECORD_NAME&#125;grep &#x27;Address &#x27;grep -Eo &#x27;[0-9]+(\.[0-9a-f\.]+)+&#x27; head -n1`</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Remote IP: &quot;</span><span class="variable">$remote_ip</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 本地IP</span></span><br><span class="line"><span class="keyword">if</span> ifconfig pppoe-wan&gt;/dev/null ; <span class="keyword">then</span></span><br><span class="line">  <span class="comment">#IPV6</span></span><br><span class="line">  local_ip=`ifconfig pppoe-wangrep <span class="string">&#x27;inet6 addr: 24.*&#x27;</span>grep -Eo <span class="string">&#x27;24[0-9a-f:]+&#x27;</span>`</span><br><span class="line">  <span class="comment">#IPV4</span></span><br><span class="line">  <span class="comment">#local_ip=`ifconfig pppoe-wangrep &#x27;inet&#x27;grep -Eo &#x27;[0-9]+(\.[0-9a-f\.]+)+&#x27; head -n1`</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Local IP : &quot;</span><span class="variable">$local_ip</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Command: &#x27;ifconfig pppoe-wan&#x27; failed&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 1;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$remote_ip</span> != <span class="variable">$local_ip</span> ]; <span class="keyword">then</span></span><br><span class="line">  curl -X POST https://dnsapi.cn/Record.Modify -d <span class="string">&quot;login_token=<span class="variable">$&#123;LOGIN_TOKEN&#125;</span>&amp;format=json&amp;domain=<span class="variable">$&#123;DOMAIN&#125;</span>&amp;record_id=<span class="variable">$&#123;RECORD_ID&#125;</span>&amp;sub_domain=<span class="variable">$&#123;SUB_DOMAIN&#125;</span>&amp;value=<span class="variable">$&#123;local_ip&#125;</span>&amp;record_type=<span class="variable">$&#123;RECORD_TYPE&#125;</span>&amp;record_line=%e9%bb%98%e8%ae%a4&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Same IPs, skip unchanged&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>将脚本中一些参数改为对应的内容：</p><ul><li>LOGIN_TOKEN：由DnsPod密钥提供，由 <code>ID,Token</code> 组合而成，用英文的逗号分割，原本的账号密码鉴定方式已经弃用。</li><li>DOMAIN：根域名。</li><li>SUB_DOMAIN：子域名。</li><li>RECORD_TYPE：记录类型，ipv4用“A”，ipv6用“AAAA”。</li><li>RECORD_ID：需要更改的域名对应的ID，可以利用下面代码查询。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST https://dnsapi.cn/Record.List -d <span class="string">&#x27;login_token=$&#123;LOGIN_TOKEN&#125;&amp;format=json&amp;domain=$&#123;DOMAIN&#125;&amp;sub_domain=$&#123;SUB_DOMAIN&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>本脚本用的是ipv6类型的，使用ipv4的记得改为ipv4相应的代码和内容。脚本主要实现了域名IP的更新，没有加入新增功能，后续有时间的话会进一步更新这个脚本，大家可以用这个脚本来做一个参考修改。</p><h3 id="设置定时任务"><a href="#设置定时任务" class="headerlink" title="设置定时任务"></a>设置定时任务</h3><p>利用 OpenWrt 的 <code>crontab</code> 实现定时更新。</p><p>对脚本文件更改权限，我的脚本文件放在 <code>/root/crontab/</code> 中：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/crontable/</span><br><span class="line"><span class="built_in">chmod</span> +x ddns_dnspod.sh</span><br></pre></td></tr></table></figure><p>然后进入在 OpenWrt 后台，选择 <code>系统→计划任务</code>，输入下面语句：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 2 * * * /root/crontable/ddns_dnspod.sh</span><br></pre></td></tr></table></figure><p>然后重启路由或者重启 <code>cron</code> 即可定时在每天凌晨2点执行一次脚本，想要其他时间可以按需更改。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;OpenWrt 原生的 DDNS 并不支持 DNSPod，所以自行查了一下 DNSPod 的 API，自行写了一个shell脚本。&lt;/p&gt;
&lt;p&gt;本脚本实现了简单的更新功能，体积极小，代码简单，可以用作参考来修改适合自己的脚本，后续我会根据需求再完善一下全部的功能。&lt;/p&gt;</summary>
      
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="工具" scheme="https://www.tidnotes.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    <category term="Linux" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/Linux/"/>
    
    
    <category term="linux" scheme="https://www.tidnotes.top/tags/linux/"/>
    
    <category term="ddns" scheme="https://www.tidnotes.top/tags/ddns/"/>
    
    <category term="openwrt" scheme="https://www.tidnotes.top/tags/openwrt/"/>
    
    <category term="dnspod" scheme="https://www.tidnotes.top/tags/dnspod/"/>
    
  </entry>
  
  <entry>
    <title>关于DDNS日志输出中文问题</title>
    <link href="https://www.tidnotes.top/post/ddns-writelog/"/>
    <id>https://www.tidnotes.top/post/ddns-writelog/</id>
    <published>2020-05-31T17:41:14.000Z</published>
    <updated>2024-04-16T07:12:27.405Z</updated>
    
    <content type="html"><![CDATA[<p>最近在使用 OpenWrt 的 DDNS 发现，如果使用 <code>write_log</code> 来实现日志输出，中文不会显示出来，会出现格式错误。对 <code>dynamic_dns_functions.sh</code> 的源代码进行细读发现，<code>write_log()</code> 函数会调用 <code>urlencode()</code> 函数，而该函数是不支持中文的。</p><p>对该函数改为支持中文的URL编码即可，将 <code>urlencode()&#123;&#125;</code> 改写代码如下：  </p><blockquote><p>注：<code>dynamic_dns_functions.sh</code> 文件地址一般为 <code>/usr/lib/ddns/</code></p></blockquote><figure class="highlight bash"><figcaption><span>dynamic_dns_functions.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">urlencode</span></span>() &#123;</span><br><span class="line"><span class="built_in">local</span> __ENC</span><br><span class="line">[ <span class="variable">$#</span> -ne 2 ] &amp;&amp; write_log 12 <span class="string">&quot;Error calling &#x27;urlencode()&#x27; - wrong number of parameters&quot;</span></span><br><span class="line">__ENC=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$2</span>&quot;</span>  awk <span class="string">&#x27;BEGIN &#123;</span></span><br><span class="line"><span class="string">        split (&quot;1 2 3 4 5 6 7 8 9 A B C D E F&quot;, hextab, &quot; &quot;)</span></span><br><span class="line"><span class="string">        hextab [0] = 0</span></span><br><span class="line"><span class="string">        for (i=1; i&lt;=255; ++i) &#123;</span></span><br><span class="line"><span class="string">            ord [ sprintf (&quot;%c&quot;, i) &quot;&quot; ] = i + 0</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        encoded = &quot;&quot;</span></span><br><span class="line"><span class="string">        for (i=1; i&lt;=length($0); ++i) &#123;</span></span><br><span class="line"><span class="string">            c = substr ($0, i, 1)</span></span><br><span class="line"><span class="string">            if ( c ~ /[a-zA-Z0-9.-]/ ) &#123;</span></span><br><span class="line"><span class="string">                encoded = encoded c             # safe character</span></span><br><span class="line"><span class="string">            &#125; else if ( c == &quot; &quot; ) &#123;</span></span><br><span class="line"><span class="string">                encoded = encoded &quot;+&quot;   # special handling</span></span><br><span class="line"><span class="string">            &#125; else &#123;</span></span><br><span class="line"><span class="string">                # unsafe character, encode it as a two-digit hex-number</span></span><br><span class="line"><span class="string">                lo = ord [c] % 16</span></span><br><span class="line"><span class="string">                hi = int (ord [c] / 16);</span></span><br><span class="line"><span class="string">                encoded = encoded &quot;%&quot; hextab [hi] hextab [lo]</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        print encoded</span></span><br><span class="line"><span class="string">    &#125;&#x27;</span>)</span><br><span class="line"><span class="built_in">eval</span> <span class="string">&quot;<span class="variable">$1</span>=\&quot;<span class="variable">$__ENC</span>\&quot;&quot;</span></span><br><span class="line"><span class="built_in">return</span> 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>目前试过了多种方法，还是需要将 <code>urlencode()</code> 函数增加中文支持，直接更改 <code>write_log()</code> 函数还是会报错，应该是ddns某些内容需要进行url编码才能正确读取。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近在使用 OpenWrt 的 DDNS 发现，如果使用 &lt;code&gt;write_log&lt;/code&gt; 来实现日志输出，中文不会显示出来，会出现格式错误。对 &lt;code&gt;dynamic_dns_functions.sh&lt;/code&gt; 的源代码进行细读发现，&lt;code&gt;wri</summary>
      
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="问题解决" scheme="https://www.tidnotes.top/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
    <category term="Linux" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/Linux/"/>
    
    
    <category term="linux" scheme="https://www.tidnotes.top/tags/linux/"/>
    
    <category term="ddns" scheme="https://www.tidnotes.top/tags/ddns/"/>
    
    <category term="openwrt" scheme="https://www.tidnotes.top/tags/openwrt/"/>
    
  </entry>
  
  <entry>
    <title>Github fork后同步更新</title>
    <link href="https://www.tidnotes.top/post/github-fork-update/"/>
    <id>https://www.tidnotes.top/post/github-fork-update/</id>
    <published>2020-03-11T08:30:59.000Z</published>
    <updated>2024-04-16T07:12:48.006Z</updated>
    
    <content type="html"><![CDATA[<p>github 有一个 fork 功能，相当于拷贝一份别人的项目到自己的仓库中，但是并不会随原项目更新而更新自己 fork 来的项目中。</p><p>目前，github还没有一键更新的功能，可以使用 <strong>“New pull request”</strong> 来实现。</p><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><p>1、选择自己仓库中fork的项目，点击 <strong>“New pull request”</strong> 。</p><p><a href="/custom/img/AXV6@IQUQGYB1VWM22I.png"><img src="/custom/img/AXV6@IQUQGYB1VWM22I.png" class="lazyload" data-srcset="/custom/img/AXV6@IQUQGYB1VWM22I.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Github fork后同步更新  点击 “New pull request”"></a></p><p>2、页面跳转到以下页面，左边选择为自己的仓库项目。</p><p><a href="/custom/img/@U8WOUC7AL_LCJ3GNU1FF.png"><img src="/custom/img/@U8WOUC7AL_LCJ3GNU1FF.png" class="lazyload" data-srcset="/custom/img/@U8WOUC7AL_LCJ3GNU1FF.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Github fork后同步更新  选择自己的仓库项目"></a></p><p>3、等待页面跳转到<strong>master</strong>页面，点击 <strong>“compare across forks”</strong>。</p><p><a href="/custom/img/4Z29KK99VA2ITMW7.png"><img src="/custom/img/4Z29KK99VA2ITMW7-1024x487.png" class="lazyload" data-srcset="/custom/img/4Z29KK99VA2ITMW7-1024x487.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Github fork后同步更新  点击 “compare across forks”"></a></p><p>4、步骤3后会出现以下页面，<strong>左边选择自己的项目，右边选择源项目</strong>。</p><p><a href="/custom/img/ZCCNOC9Q59IFH0W2SNX6G.png"><img src="/custom/img/ZCCNOC9Q59IFH0W2SNX6G.png" class="lazyload" data-srcset="/custom/img/ZCCNOC9Q59IFH0W2SNX6G.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Github fork后同步更新  左边选择自己的项目，右边选择源项目"></a></p><p>5、选择后，页面会显示源项目更新的内容，点击 <strong>“Create pull request”</strong>。</p><p><a href="/custom/img/9QANF@H4IMWLTLTVNF.png"><img src="/custom/img/9QANF@H4IMWLTLTVNF.png" class="lazyload" data-srcset="/custom/img/9QANF@H4IMWLTLTVNF.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Github fork后同步更新  点击 “Create pull request”"></a></p><p>6、内容随自己需求编写，或直接点击 <strong>“Create pull request”</strong>。</p><p><a href="/custom/img/W68VJ5K63MD@HMXN.png"><img src="/custom/img/W68VJ5K63MD@HMXN.png" class="lazyload" data-srcset="/custom/img/W68VJ5K63MD@HMXN.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Github fork后同步更新  直接点击 “Create pull request”"></a></p><p>7、页面会变成下图样子，找到点击 <strong>“Merge pull request”</strong>，进行数据合并。</p><p><a href="/custom/img/4K5C_HJ9Z@B6Q6L509P-1024x724.png"><img src="/custom/img/4K5C_HJ9Z@B6Q6L509P-1024x724.png" class="lazyload" data-srcset="/custom/img/4K5C_HJ9Z@B6Q6L509P-1024x724.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Github fork后同步更新  点击 “Merge pull request”"></a></p><p>8、点击 <strong>“Confirm merga”</strong>，进行合并，最后完成更新。</p><p><a href="/custom/img/62A8YUJLHWN3FKNW.png"><img src="/custom/img/62A8YUJLHWN3FKNW-1024x524.png" class="lazyload" data-srcset="/custom/img/62A8YUJLHWN3FKNW-1024x524.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Github fork后同步更新  点击 “Conflrm merga”，进行合并"></a></p><p>根据上述步骤，即可以实现fork项目的更新。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;github 有一个 fork 功能，相当于拷贝一份别人的项目到自己的仓库中，但是并不会随原项目更新而更新自己 fork 来的项目中。&lt;/p&gt;
&lt;p&gt;目前，github还没有一键更新的功能，可以使用 &lt;strong&gt;“New pull request”&lt;/strong&gt; 来</summary>
      
    
    
    
    <category term="工具" scheme="https://www.tidnotes.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="GitHub" scheme="https://www.tidnotes.top/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>Markdown基本语法</title>
    <link href="https://www.tidnotes.top/post/markdown-edit/"/>
    <id>https://www.tidnotes.top/post/markdown-edit/</id>
    <published>2020-03-05T19:04:23.000Z</published>
    <updated>2024-04-16T07:07:08.296Z</updated>
    
    <content type="html"><![CDATA[<p>最近写GitHub上的README.md文件，要用到Markdown语法，所以本文总结一下用于写 <code>.md</code>，<code>.markdown</code> 结尾的文档的基本语法。</p><p>网上有不少在线的Markdown编辑器，本人一般用GitHub直接编写然后在线预览，或者用UltraEdit编辑器实时预览。</p><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><strong><a href="#%E6%A0%87%E9%A2%98">标题</a></strong></li><li><strong><a href="#%E6%A0%BC%E5%BC%8F">格式</a></strong><ul><li><a href="#%E6%8D%A2%E8%A1%8C">换行</a>、<a href="#%E5%AD%97%E4%BD%93">字体</a>、<a href="#%E5%88%86%E5%89%B2%E7%BA%BF">分割线</a>、<a href="#%E5%88%A0%E9%99%A4%E7%BA%BF">删除线</a>、<a href="#%E4%B8%8B%E5%88%92%E7%BA%BF">下划线</a></li></ul></li><li><strong><a href="#%E5%88%97%E8%A1%A8">列表</a><strong>、</strong><a href="#%E5%BC%95%E7%94%A8">区块（引用）</a></strong></li><li><strong><a href="#%E4%BB%A3%E7%A0%81">代码</a></strong></li><li><strong><a href="#%E9%93%BE%E6%8E%A5">链接</a><strong>、</strong><a href="#%E5%9B%BE%E7%89%87">图片</a></strong></li><li><strong><a href="#%E8%A1%A8%E6%A0%BC">表格</a></strong></li><li><strong><a href="#%E5%85%BC%E5%AE%B9">兼容</a></strong></li></ul><h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><p>可以用 <code>=</code> 标记一级标题、<code>-</code> 标记二级标题，或者用 <code>#</code> 标记各级标题（符号后有空格）。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">一级标题</span></span><br><span class="line"><span class="section">=================</span></span><br><span class="line"><span class="section">二级标题</span></span><br><span class="line"><span class="section">-----------------</span></span><br><span class="line"></span><br><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"><span class="section">#### 四级标题</span></span><br><span class="line"><span class="section">##### 五级标题</span></span><br><span class="line"><span class="section">###### 六级标题</span></span><br></pre></td></tr></table></figure><details open><summary> 效果 </summary>              <div class='content'>              <h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h1 id="一级标题-1"><a href="#一级标题-1" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题-1"><a href="#二级标题-1" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6>              </div>            </details><h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><h3 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h3><p><strong>两个以上空格加上回车</strong>，或者在段落后面使用一个空行来表示重新开始一个段落。 具体可以看下下面的演示图。</p><h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">*斜体文本*</span></span><br><span class="line"><span class="emphasis">_斜体文本_</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**粗体文本**</span></span><br><span class="line"><span class="strong">__粗体文本__</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**<span class="emphasis">*粗斜体文本*</span>**</span></span><br><span class="line"><span class="strong">__<span class="emphasis">_粗斜体文本_</span>__</span></span><br></pre></td></tr></table></figure><details open><summary> 效果 </summary>              <div class='content'>              <p><em>斜体文本</em><br><em>斜体文本</em></p><p><strong>粗体文本</strong><br><strong>粗体文本</strong></p><p><em><strong>粗斜体文本</strong></em><br><em><strong>粗斜体文本</strong></em></p>              </div>            </details><h3 id="分隔线"><a href="#分隔线" class="headerlink" title="分隔线"></a>分隔线</h3><p>在一行中用三个以上的星号、减号、底线来建立一个分隔线</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">***</span></span><br><span class="line"><span class="strong">* * *</span></span><br><span class="line"><span class="strong">**</span><span class="strong">***</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">- - -</span></span><br><span class="line"><span class="strong">----------</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">_ _ _</span></span><br><span class="line"><span class="strong">__<span class="emphasis">_</span></span></span><br></pre></td></tr></table></figure><h3 id="删除线"><a href="#删除线" class="headerlink" title="删除线"></a>删除线</h3><p>在文字的两端加上两个波浪线 <code>~~</code> 即可，部分编辑器单个波浪线也可。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~删除线~</span><br><span class="line">~~删除线~~</span><br></pre></td></tr></table></figure><h3 id="下划线"><a href="#下划线" class="headerlink" title="下划线"></a>下划线</h3><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>下划线<span class="language-xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p><strong>无序列表</strong>使用星号(<code>*</code>)、加号(<code>+</code>)或是减号(<code>-</code>)作为列表标记，<strong>有序列表</strong>使用数字并加上 <code>.</code> 号来表示。注意符号后有空格，可嵌套使用。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> 第一项</span><br><span class="line"><span class="bullet">*</span> 第二项</span><br><span class="line"><span class="bullet">+</span> 第一项</span><br><span class="line"><span class="bullet">+</span> 第二项</span><br><span class="line"><span class="bullet">-</span> 第一项</span><br><span class="line"><span class="bullet">-</span> 第二项</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 第一项</span><br><span class="line"><span class="bullet">2.</span> 第二项</span><br><span class="line"><span class="bullet">3.</span> 第三项</span><br><span class="line"></span><br><span class="line">嵌套</span><br><span class="line"><span class="bullet">1.</span> 第一层</span><br><span class="line"><span class="bullet">    -</span> 第二层</span><br><span class="line"><span class="bullet">        *</span> 第三层</span><br><span class="line"><span class="bullet">2.</span> 第一层</span><br><span class="line"><span class="bullet">    +</span> 第二层</span><br><span class="line"><span class="bullet">        1.</span> 第三层</span><br></pre></td></tr></table></figure><details open><summary> 效果 </summary>              <div class='content'>              <ul><li>第一项</li><li>第二项</li></ul><ul><li>第一项</li><li>第二项</li></ul><ul><li>第一项</li><li>第二项</li></ul><ol><li>第一项</li><li>第二项</li><li>第三项</li></ol><p>嵌套</p><ol><li>第一层<ul><li>第二层<ul><li>第三层</li></ul></li></ul></li><li>第一层<ul><li>第二层<ol><li>第三层</li></ol></li></ul></li></ol>              </div>            </details><h2 id="区块（引用）"><a href="#区块（引用）" class="headerlink" title="区块（引用）"></a>区块（引用）</h2><p>区块引用是在段落开头使用 <code>&gt;</code> 符号 ，然后后面紧跟一个 <strong>空格</strong> 。注意换行使用两空格和直接空行的区别。区块也可以嵌套使用，也可以和列表混合嵌套。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; 区块引用</span></span><br><span class="line"><span class="quote">&gt; 第一行后没用两空格的内容  </span></span><br><span class="line"><span class="quote">&gt; 第二行用了两空格用于换行</span></span><br><span class="line"><span class="quote">&gt; </span></span><br><span class="line"><span class="quote">&gt; 上一行行空行效果</span></span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; 最外层</span></span><br><span class="line"><span class="quote">&gt; &gt; 第一层嵌套</span></span><br><span class="line"><span class="quote">&gt; &gt; &gt; 第二层嵌套</span></span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; 区块中使用列表</span></span><br><span class="line"><span class="quote">&gt; 1. 第一项</span></span><br><span class="line"><span class="quote">&gt; 2. 第二项</span></span><br><span class="line"><span class="quote">&gt;     + 第一项</span></span><br><span class="line"><span class="quote">&gt;         &gt; 引用  </span></span><br><span class="line"><span class="quote">&gt;         &gt; 内容</span></span><br><span class="line"><span class="quote">&gt;     + 第二项</span></span><br></pre></td></tr></table></figure><details open><summary> 效果 </summary>              <div class='content'>              <blockquote><p>区块引用<br>第一行后没用两空格的内容<br>第二行用了两空格用于换行</p><p>上一行行空行效果</p></blockquote><blockquote><p>最外层</p><blockquote><p>第一层嵌套</p><blockquote><p>第二层嵌套</p></blockquote></blockquote></blockquote><blockquote><p>区块中使用列表</p><ol><li>第一项</li><li>第二项<ul><li>第一项<blockquote><p>引用<br>内容</p></blockquote></li><li>第二项</li></ul></li></ol></blockquote>              </div>            </details><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>段落上的一个函数或片段的代码可以用反引号把它包起来（<code>`</code>）。代码区块使用 **4 个空格** 或者一个 **制表符（Tab 键）** ，或者用 <code>```</code> 包裹一段代码，并指定一种语言（也可以不指定）。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">`printf()`</span> 函数</span><br><span class="line"></span><br><span class="line"><span class="section">### 代码区块</span></span><br><span class="line"></span><br><span class="line"><span class="code">    function a() &#123;</span></span><br><span class="line"><span class="code">       retrun 0;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">```javascript</span></span><br><span class="line"><span class="code">$(document).ready(function () &#123;</span></span><br><span class="line"><span class="code">    alert(&#x27;Hi!&#x27;);</span></span><br><span class="line"><span class="code">&#125;);</span></span><br><span class="line"><span class="code">```</span></span><br></pre></td></tr></table></figure><details open><summary> 效果 </summary>              <div class='content'>              <p><code>printf()</code> 函数</p><h3 id="代码区块"><a href="#代码区块" class="headerlink" title="代码区块"></a>代码区块</h3><pre><code>function a() {   retrun 0;}</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;Hi!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[链接名称](链接地址)</span><br><span class="line"></span><br><span class="line">&lt;链接地址&gt;</span><br><span class="line">&lt;https://www.tidnotes.top&gt;</span><br><span class="line"></span><br><span class="line">这个链接用 1 作为网址变量: [Google][1]  </span><br><span class="line">这个链接用 tidnotes 作为网址变量: [TiD][tidnotes]  </span><br><span class="line">然后在文档的结尾为变量赋值（网址）</span><br><span class="line"></span><br><span class="line">[1]: https://www.google.com/</span><br><span class="line">[tidnotes]: https://www.tidnotes.top/</span><br></pre></td></tr></table></figure><details open><summary> 效果 </summary>              <div class='content'>              <p><a href="%E9%93%BE%E6%8E%A5%E5%9C%B0%E5%9D%80">链接名称</a></p><p>&lt;链接地址&gt;<br><a href="https://www.tidnotes.top/">https://www.tidnotes.top</a></p><p>这个链接用 1 作为网址变量: <a href="https://www.google.com/">Google</a><br>这个链接用 tidnotes 作为网址变量: <a href="https://www.tidnotes.top/">TiD</a><br>然后在文档的结尾为变量赋值（网址）</p>              </div>            </details><h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![alt 属性文本](图片地址)</span><br><span class="line"></span><br><span class="line">![alt 属性文本](图片地址 &quot;可选标题&quot;)</span><br></pre></td></tr></table></figure><details open><summary> 效果 </summary>              <div class='content'>              <p><img src="/%E5%9B%BE%E7%89%87%E5%9C%B0%E5%9D%80" class="lazyload" data-srcset="/%E5%9B%BE%E7%89%87%E5%9C%B0%E5%9D%80" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="alt 属性文本"></p><p><img src="/%E5%9B%BE%E7%89%87%E5%9C%B0%E5%9D%80" class="lazyload" data-srcset="/%E5%9B%BE%E7%89%87%E5%9C%B0%E5%9D%80" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="alt 属性文本" title="可选标题"></p>              </div>            </details><blockquote><p><code>Markdown</code> 不能定义图片大小，可以用 <code>&lt;img&gt;</code> 标签来插入图片。</p></blockquote><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><p>使用 <code>|</code> 来分隔不同的单元格，使用 <code>-</code> 来分隔表头和其他行。</p><ul><li><code>-:</code> 设置内容和标题栏居右对齐。</li><li><code>:-</code> 设置内容和标题栏居左对齐。</li><li><code>:-:</code> 设置内容和标题栏居中对齐。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">|  表头   | 表头   |</span><br><span class="line">|  -----  | ------ |</span><br><span class="line">| 单元格  | 单元格 |</span><br><span class="line">| 单元格  | 单元格 |</span><br><span class="line"></span><br><span class="line">| 对齐方式：左对齐 | 对齐方式：右对齐 | 对齐方式：居中对齐 |</span><br><span class="line">| :----- | -----: | :------: |</span><br><span class="line">| 单元格 | 单元格 | 单元格   |</span><br><span class="line">| 单元格 | 单元格 | 单元格   |</span><br></pre></td></tr></table></figure><details open><summary> 效果 </summary>              <div class='content'>              <table><thead><tr><th>表头</th><th>表头</th></tr></thead><tbody><tr><td>单元格</td><td>单元格</td></tr><tr><td>单元格</td><td>单元格</td></tr></tbody></table></br></br><table><thead><tr><th align="left">对齐方式：左对齐</th><th align="right">对齐方式：右对齐</th><th align="center">对齐方式：居中对齐</th></tr></thead><tbody><tr><td align="left">单元格</td><td align="right">单元格</td><td align="center">单元格</td></tr><tr><td align="left">单元格</td><td align="right">单元格</td><td align="center">单元格</td></tr></tbody></table>              </div>            </details><h2 id="兼容"><a href="#兼容" class="headerlink" title="兼容"></a>兼容</h2><p><code>Markdown</code> 是支持 <code>HTML</code> 的，想要更好的显示效果可以使用 <code>HTML</code> 的写法来编辑文本。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近写GitHub上的README.md文件，要用到Markdown语法，所以本文总结一下用于写 &lt;code&gt;.md&lt;/code&gt;，&lt;code&gt;.markdown&lt;/code&gt; 结尾的文档的基本语法。&lt;/p&gt;
&lt;p&gt;网上有不少在线的Markdown编辑器，本人一般用GitH</summary>
      
    
    
    
    <category term="工具" scheme="https://www.tidnotes.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="GitHub" scheme="https://www.tidnotes.top/tags/GitHub/"/>
    
    <category term="Markdown" scheme="https://www.tidnotes.top/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>[SQL]ORACLE中SQLLDR关于空格的问题</title>
    <link href="https://www.tidnotes.top/post/sql-sqlldr-kong/"/>
    <id>https://www.tidnotes.top/post/sql-sqlldr-kong/</id>
    <published>2020-03-02T08:12:37.000Z</published>
    <updated>2024-04-15T02:09:12.878Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>关于Oracle中使用 <code>SQLLDR</code> 有时候会出现关于空格保留或去除的问题，就这个问题的解决方案有不少，但如果是由于参数设置问题，可能就本文所说的问题解决。</p><p>参考文章： <a href="http://blog.sina.com.cn/s/blog_701218960100l0gt.html">http://blog.sina.com.cn/s/blog_701218960100l0gt.html</a></p></blockquote><p>使用 <code>SQLLDR</code> 加载入库，一般就使用分隔符取值或者定长取值。使用 <strong>分隔符取值</strong> 时，空格是会保留的，而使用 <strong>定长取值</strong> 的时候就会自动去除空格（本文所说空格指内容前后的空格，不包括文字中的空格）。</p><span id="more"></span><h2 id="关于参数“PRESERVE-BLANKS”"><a href="#关于参数“PRESERVE-BLANKS”" class="headerlink" title="关于参数“PRESERVE BLANKS”"></a>关于参数“<code>PRESERVE BLANKS</code>”</h2><p><code>SQLLDR</code> 中有一个参数“<code>PRESERVE BLANKS</code>”，用于控制定长时的空格保留。</p><p>当 <em><strong>input file</strong></em> 是分隔符时，_<strong>control file</strong>_ 中的 <em><code>PRESERVE BLANKS</code></em> 无效；<br>当 <em><strong>input file</strong></em> 是定长时，_<strong>control file</strong>_ 中的 <em><code>PRESERVE BLANKS</code></em> 有效。</p><p>所以，<strong>定长取值</strong> 时，可以加 <code>PRESERVE BLANKS</code> 这个参数，_保留空格入库_。</p><p>可以在 <code>TRUNCATE INTO TABLE</code> 中加入该参数，全部字段都保留空格，如：</p><figure class="highlight sql"><figcaption><span>ctl文件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA </span><br><span class="line">CHARACTERSET <span class="string">&#x27;UTF8&#x27;</span></span><br><span class="line">INFILE <span class="string">&#x27;/home/a.dat&#x27;</span> </span><br><span class="line"><span class="keyword">TRUNCATE</span> PRESERVE BLANKS <span class="keyword">INTO</span> <span class="keyword">TABLE</span> A</span><br><span class="line">(</span><br><span class="line">a <span class="built_in">POSITION</span>(<span class="number">1</span>:<span class="number">5</span>), </span><br><span class="line">b <span class="built_in">POSITION</span>(<span class="number">6</span>:<span class="number">11</span>), </span><br><span class="line">d <span class="built_in">POSITION</span>(<span class="number">12</span>:<span class="number">13</span>) </span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>也可以在字段后加如该参数，只保留该字段空格，如：</p><figure class="highlight sql"><figcaption><span>ctl文件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA </span><br><span class="line">INFILE <span class="string">&#x27;/home/a.dat&#x27;</span> </span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">INTO</span> <span class="keyword">TABLE</span> A</span><br><span class="line"> (</span><br><span class="line"> a <span class="built_in">POSITION</span>(<span class="number">1</span>:<span class="number">5</span>), </span><br><span class="line"> b <span class="built_in">POSITION</span>(<span class="number">6</span>:<span class="number">11</span>)  PRESERVE BLANKS , </span><br><span class="line"> d <span class="built_in">POSITION</span>(<span class="number">12</span>:<span class="number">13</span>) </span><br><span class="line"> )</span><br></pre></td></tr></table></figure><h2 id="利用-trim-去除空格"><a href="#利用-trim-去除空格" class="headerlink" title="利用 trim() 去除空格"></a>利用 <code>trim()</code> 去除空格</h2><p>定长取值默认是自动去除空格的，而分隔符取值则会保留空格入库。所以，去除空格可以利用<br> <code>trim()</code> 函数。如：</p><figure class="highlight sql"><figcaption><span>ctl文件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA </span><br><span class="line">CHARACTERSET <span class="string">&#x27;UTF8&#x27;</span></span><br><span class="line">INFILE <span class="string">&#x27;/home/a.txt&#x27;</span> </span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">INTO</span> <span class="keyword">TABLE</span> A</span><br><span class="line">FIELDS TERMINATED <span class="keyword">BY</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">(</span><br><span class="line">a &quot;trim(:a)&quot;, </span><br><span class="line">b &quot;trim(:b)&quot;, </span><br><span class="line">d &quot;trim(:d)&quot;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>对于SQLLDR保留或去除空格，可以分按如下操作：</p><ul><li><strong>定长：</strong><ul><li>保留：加入参数 <code>PRESERVE BLANKS</code></li><li>去除：默认去除，无需操作</li></ul></li><li><strong>分隔符：</strong><ul><li>保留：默认保留</li><li>去除：使用 <code>trim()</code> 函数</li></ul></li></ul>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;关于Oracle中使用 &lt;code&gt;SQLLDR&lt;/code&gt; 有时候会出现关于空格保留或去除的问题，就这个问题的解决方案有不少，但如果是由于参数设置问题，可能就本文所说的问题解决。&lt;/p&gt;
&lt;p&gt;参考文章： &lt;a href=&quot;http://blog.sina.com.cn/s/blog_701218960100l0gt.html&quot;&gt;http://blog.sina.com.cn/s/blog_701218960100l0gt.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;使用 &lt;code&gt;SQLLDR&lt;/code&gt; 加载入库，一般就使用分隔符取值或者定长取值。使用 &lt;strong&gt;分隔符取值&lt;/strong&gt; 时，空格是会保留的，而使用 &lt;strong&gt;定长取值&lt;/strong&gt; 的时候就会自动去除空格（本文所说空格指内容前后的空格，不包括文字中的空格）。&lt;/p&gt;</summary>
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="问题解决" scheme="https://www.tidnotes.top/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
    <category term="SQL" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/SQL/"/>
    
    
    <category term="oracle" scheme="https://www.tidnotes.top/tags/oracle/"/>
    
    <category term="sql" scheme="https://www.tidnotes.top/tags/sql/"/>
    
    <category term="sqlldr" scheme="https://www.tidnotes.top/tags/sqlldr/"/>
    
  </entry>
  
  <entry>
    <title>[SQL]关于锁表以及解决方法</title>
    <link href="https://www.tidnotes.top/post/sql-unlock/"/>
    <id>https://www.tidnotes.top/post/sql-unlock/</id>
    <published>2020-02-14T18:11:18.000Z</published>
    <updated>2024-04-15T02:09:24.917Z</updated>
    
    <content type="html"><![CDATA[<p>数据库锁表，指在数据库里，同一个数据可能有多个人来读取或更改，为了防止更改的时候别人也同时更改，所以要 <strong>锁住表</strong> 防止别人更改。</p><p>简单来说，锁表主要发生在以下几种情况：</p><ol><li>锁表主要发生在 <code>insert</code> 、 <code>update</code> 、 <code>delete</code> 中；</li><li>在执行上面语句时，没有执行 <code>commite</code> 、回滚或退出数据库用户时，在另一进程执行上述语句会进入资源正忙的异常（即卡死），此时已锁表；</li><li>多个更改语句一起执行，而不是顺序执行时回锁表；</li><li><code>insert</code> 等超多个语句一直执行，而不 <code>commite</code> ，会发生锁表。</li></ol><p>以上情况只是简单的锁表情况，还有很多复杂的情况就不一一列举出来。如果出现 <code>insert</code> 等SQL语句执行时，长时间无反应甚至卡死状态，很有可能发生了锁表。</p><h2 id="Oracle锁表解决"><a href="#Oracle锁表解决" class="headerlink" title="Oracle锁表解决"></a>Oracle锁表解决</h2><p>查看当前系统锁表情况</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> v$locked_object a,v$session b </span><br><span class="line"><span class="keyword">where</span> a.session_id <span class="operator">=</span> b.sid;</span><br></pre></td></tr></table></figure><p>得到的数据库中所有DML语句（指对数据库中表记录的操作）产生的所锁，包括行锁和表锁。<strong>解决死锁</strong> 主要是要表中的 <code>sid</code> 、 <code>serial#</code> 两个字段。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- sid 和 serial# 是上面sql语句得到的数值</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> kill session <span class="string">&#x27;sid,serial#&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="MySQL锁表解决"><a href="#MySQL锁表解决" class="headerlink" title="MySQL锁表解决"></a>MySQL锁表解决</h2><p>查锁表的进程</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> PROCESSLIST;</span><br></pre></td></tr></table></figure><p>找到锁表的那个进程的 <strong>Id</strong>，然后杀掉被锁的表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ID 即被锁进程的ID值</span></span><br><span class="line">KILL ID;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;数据库锁表，指在数据库里，同一个数据可能有多个人来读取或更改，为了防止更改的时候别人也同时更改，所以要 &lt;strong&gt;锁住表&lt;/strong&gt; 防止别人更改。&lt;/p&gt;
&lt;p&gt;简单来说，锁表主要发生在以下几种情况：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;锁表主要发生在 &lt;code&gt;in</summary>
      
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="问题解决" scheme="https://www.tidnotes.top/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
    <category term="SQL" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/SQL/"/>
    
    
    <category term="oracle" scheme="https://www.tidnotes.top/tags/oracle/"/>
    
    <category term="sql" scheme="https://www.tidnotes.top/tags/sql/"/>
    
    <category term="mysql" scheme="https://www.tidnotes.top/tags/mysql/"/>
    
    <category term="锁表" scheme="https://www.tidnotes.top/tags/%E9%94%81%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>[Linux]关于grep、awk、sed命令</title>
    <link href="https://www.tidnotes.top/post/linux-grep-awk-sed/"/>
    <id>https://www.tidnotes.top/post/linux-grep-awk-sed/</id>
    <published>2020-02-04T14:31:15.000Z</published>
    <updated>2024-04-16T07:13:56.067Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>对于一些文件字段或文件名等截取或重命名等操作，我们一般会用到正则等方法实现，Linux中的 <a href="#grep">grep</a>、<a href="#awk">awk</a>、<a href="#sed">sed</a> 命令同样能得到上述的效果，本文主要是介绍这三者的区别和用法。</p><p>本文参考文章：<a href="https://blog.csdn.net/song_aq/article/details/78527571">linux命令小记（grep、awk、sed）</a></p></blockquote><h2 id="grep命令"><a href="#grep命令" class="headerlink" title="grep命令"></a>grep命令</h2><p><code>grep</code>（global search regular expression(RE) and print out the line，全面搜索正则表达式并把行打印出来）是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。</p><h3 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h3><ul><li><code>-c</code> 计算匹配的列数。</li><li><code>-C&lt;显示列数&gt;或-&lt;显示列数&gt;</code> 除了显示匹配的那一列之外，并显示该列之前后的内容。</li><li><code>-d&lt;进行动作&gt;</code> 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep命令将回报信息并停止动作。</li><li><code>-e&lt;范本样式&gt;</code> 指定字符串作为查找文件内容的范本样式。</li><li><code>-E</code> 将范本样式为延伸的普通表示法来使用，意味着使用能使用扩展正则表达式。</li><li><code>-f&lt;范本文件&gt;</code> 指定范本文件，其内容有一个或多个范本样式，让grep查找符合范本条件的文件内容，格式为每一列的范本样式。</li><li><code>-F</code> 将范本样式视为固定字符串的列表。</li><li><code>-h</code> 在显示匹配的那一列之前，不标示该列所属的文件名称。</li><li><code>-H</code> 在显示匹配的那一列之前，标示该列的文件名称。</li><li><code>-i</code> 忽略字符大小写的差别。</li><li><code>-l</code> 列出文件内容匹配的文件名称。</li><li><code>-L</code> 列出文件内容不匹配的文件名称。</li><li><code>-n</code> 在显示匹配的那一列之前，标示出该列的编号。</li><li><code>-q</code> 不显示任何信息。</li><li><code>-R/-r</code> 此参数的效果和指定“-d recurse”参数相同。</li><li><code>-s</code> 不显示错误信息。</li><li><code>-v</code> 反转查找。</li><li><code>-y</code> 此参数效果跟“-i”相同。</li><li><code>-o</code> 只输出文件中匹配到的部分。</li></ul><blockquote><p>补充：<a href="https://man.linuxde.net/egrep"><code>egrep</code></a> 命令用于在文件内查找指定的字符串，egrep执行效果与 <code>grep -E</code> 相似。<a href="https://man.linuxde.net/fgrep"><code>fgrep</code></a> 命令和 <code>grep -F</code> 命令是一样的，但出错和用法消息不同，<code>-s</code> 标志功能也不同。</p></blockquote><h3 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h3><p>在文件中搜索一个单词，命令会返回一个包含 <code>“match_pattern”</code> 的文本行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">grep match_pattern file_name</span><br><span class="line">grep <span class="string">&quot;match_pattern&quot;</span> file_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多文件查找</span></span><br><span class="line">grep <span class="string">&quot;match_pattern&quot;</span> file_1 file_2 file_3 ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 标记匹配颜色</span></span><br><span class="line">grep <span class="string">&quot;match_pattern&quot;</span> file_name --color=auto</span><br></pre></td></tr></table></figure><p>使用正则匹配：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&quot;[1-9]+&quot;</span></span><br><span class="line">egrep <span class="string">&quot;[1-9]+&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只输出文件中匹配到的部分</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;this is a test line.&#x27;</span>  grep -o -E <span class="string">&quot;[a-z]+\.&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;this is a test line.&#x27;</span>  egrep -o <span class="string">&quot;[a-z]+\.&quot;</span></span><br><span class="line">&gt; line.</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略大小写</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span>  grep -i <span class="string">&quot;HELLO&quot;</span></span><br><span class="line">&gt; hello</span><br></pre></td></tr></table></figure><p>多个匹配样式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> this is a text line  grep -e <span class="string">&quot;is&quot;</span> -e <span class="string">&quot;line&quot;</span> -o</span><br><span class="line">&gt; is</span><br><span class="line">&gt; line</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以使用-f选项来匹配多个样式，在样式文件中逐行写出需要匹配的字符。</span></span><br><span class="line"><span class="built_in">cat</span> patfile</span><br><span class="line">&gt; aaa</span><br><span class="line">&gt; bbb</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> aaa bbb ccc ddd eee  grep -f patfile -o</span><br><span class="line">&gt; aaa</span><br><span class="line">&gt; bbb</span><br></pre></td></tr></table></figure><p>在多级目录中对文本进行递归搜索：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .表示当前目录</span></span><br><span class="line">grep <span class="string">&quot;text&quot;</span> . -r -n</span><br><span class="line"></span><br><span class="line"><span class="comment">#只在目录中所有的.php和.html文件中递归搜索字符&quot;main()&quot;</span></span><br><span class="line">grep <span class="string">&quot;main()&quot;</span> . -r --include *.&#123;php,html&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#在搜索结果中排除所有README文件</span></span><br><span class="line">grep <span class="string">&quot;main()&quot;</span> . -r --exclude <span class="string">&quot;README&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#在搜索结果中排除filelist文件列表里的文件</span></span><br><span class="line">grep <span class="string">&quot;main()&quot;</span> . -r --exclude-from filelist</span><br></pre></td></tr></table></figure><h2 id="awk命令"><a href="#awk命令" class="headerlink" title="awk命令"></a>awk命令</h2><p><a href="https://man.linuxde.net/awk"><code>awk</code></a> 是一种编程语言，用于在linux&#x2F;unix下对文本和数据进行处理。数据可以来自标准输入( <code>stdin</code> )、一个或多个文件，或其它命令的输出。它支持用户自定义函数和动态正则表达式等先进功能，是linux&#x2F;unix下的一个强大编程工具。</p><h3 id="常用命令和选项"><a href="#常用命令和选项" class="headerlink" title="常用命令和选项"></a>常用命令和选项</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk [options] <span class="string">&#x27;script&#x27;</span> var=value file(s)</span><br><span class="line">awk [options] -f scriptfile var=value file(s)</span><br></pre></td></tr></table></figure><h4 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h4><ul><li><code>-F fs</code> fs指定输入分隔符，fs可以是字符串或正则表达式，如 <code>-F :</code> 。</li><li><code>-v var=value</code> 赋值一个用户定义变量，将外部变量传递给 <code>awk</code> 。</li><li><code>-f scripfile</code> 从脚本文件中读取 <code>awk</code> 命令。</li><li><code>-m[fr] val</code> 对 <code>val</code> 值设置内在限制，<code>-mf</code> 选项限制分配给val的最大块数目；<code>-mr</code> 选项限制记录的最大数目。这两个功能是Bell实验室版 <code>awk</code> 的扩展功能，在标准 <code>awk</code> 中不适用。</li></ul><h4 id="awk内置变量（预定义变量）"><a href="#awk内置变量（预定义变量）" class="headerlink" title="awk内置变量（预定义变量）"></a>awk内置变量（预定义变量）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$n</span> 当前记录的第n个字段，比如n为1表示第一个字段，n为2表示第二个字段。 </span><br><span class="line"><span class="variable">$0</span> 这个变量包含执行过程中当前行的文本内容。</span><br><span class="line">ARGC 命令行参数的数目。</span><br><span class="line">ARGV 包含命令行参数的数组。</span><br><span class="line">FILENAME 当前输入文件的名。</span><br><span class="line">FS 字段分隔符（默认是任何空格）。</span><br><span class="line">NF 表示字段数，在执行过程中对应于当前的字段数。</span><br><span class="line">NR 表示记录数，在执行过程中对应于当前的行号。</span><br><span class="line">OFMT 数字的输出格式（默认值是%.6g）。</span><br><span class="line">OFS 输出字段分隔符（默认值是一个空格）。</span><br><span class="line">ORS 输出记录分隔符（默认值是一个换行符）。</span><br><span class="line">RS 记录分隔符（默认是一个换行符）。</span><br></pre></td></tr></table></figure><h3 id="简单用法"><a href="#简单用法" class="headerlink" title="简单用法"></a>简单用法</h3><p>打印每一行的第二、第三和最后一个字段：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123; print $2,$3,$NF &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure><p>打印第一行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;NR==1&#123;print&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure><p>统计文件中的行数：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;END&#123; print NR &#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure><p>指定分隔符：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 111__222__333  awk <span class="string">&#x27;BEGIN&#123;FS=&quot;__&quot;&#125;&#123;print $1&#125;&#x27;</span></span><br><span class="line">&gt;111</span><br><span class="line"><span class="built_in">echo</span> 111__222__333  awk -F <span class="string">&quot;__&quot;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line">&gt;111</span><br></pre></td></tr></table></figure><p>匹配：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出正则匹配&quot;match_pattern&quot;的一行</span></span><br><span class="line">awk <span class="string">&#x27;/match_pattern/&#x27;</span> filename</span><br><span class="line">&gt;</span><br><span class="line"><span class="comment"># 输出正则匹配第二个字段的行</span></span><br><span class="line">awk <span class="string">&#x27;&#123;if($2~/^80$/)print&#125;&#x27;</span> filename</span><br><span class="line">&gt;</span><br><span class="line"><span class="comment"># 输出正则不匹配第二个字段的行</span></span><br><span class="line">awk <span class="string">&#x27;&#123;if($2!~/^80$/)print&#125;&#x27;</span> filename</span><br><span class="line">&gt;</span><br><span class="line"><span class="comment"># 输出第二个字段为&quot;match_pattern&quot;的行</span></span><br><span class="line">awk <span class="string">&#x27;&#123;if($2==&quot;match_pattern&quot;)print&#125;&#x27;</span> filename</span><br></pre></td></tr></table></figure><h2 id="sed命令"><a href="#sed命令" class="headerlink" title="sed命令"></a>sed命令</h2><p><a href="https://man.linuxde.net/sed"><code>sed</code></a> 操作的是一个输入文件在内存的一个副本，对副本内容进行编辑活动，如果没有重定向到一个文件，会将文件修改的结果输出到屏幕。和 <a href="#awk"><code>awk</code></a> 一样，不会修改输入文件的内容。</p><h3 id="基本命令和选项"><a href="#基本命令和选项" class="headerlink" title="基本命令和选项"></a>基本命令和选项</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed [options] <span class="string">&#x27;command&#x27;</span> file(s)</span><br><span class="line">sed [options] -f scriptfile file(s)</span><br></pre></td></tr></table></figure><h4 id="选项-1"><a href="#选项-1" class="headerlink" title="选项"></a>选项</h4><ul><li><code>-e&lt;script&gt;或--expression=&lt;script&gt;</code> 以选项中的指定的script来处理输入的文本文件；</li><li><code>-f&lt;script文件&gt;或--file=&lt;script文件&gt;</code> 以选项中指定的script文件来处理输入的文本文件；</li><li><code>-h或--help</code> 显示帮助；</li><li><code>-n或--quiet或--silent</code> 仅显示script处理后的结果；</li><li><code>-V或--version</code> 显示版本信息。</li></ul><h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><ul><li><code>a\</code> 在当前行下面插入文本。</li><li><code>i\</code> 在当前行上面插入文本。</li><li><code>c\</code> 把选定的行改为新的文本。</li><li><code>d</code> 删除，删除选择的行。</li><li><code>s</code> 替换指定字符。</li><li><code>p</code> 打印模板块的行。</li><li><code>r file</code> 从file中读行。</li><li><code>w file</code> 写并追加模板块到file末尾。</li><li><code>!</code> 表示后面的命令对所有没有被选定的行发生作用。</li><li><code>=</code> 打印当前行号码。</li></ul><h4 id="替换标记"><a href="#替换标记" class="headerlink" title="替换标记"></a>替换标记</h4><ul><li><code>g</code> 表示行内全面替换。</li><li><code>p</code> 表示打印行。</li><li><code>w</code> 表示把行写入一个文件。</li><li><code>x</code> 表示互换模板块中的文本和缓冲区中的文本。</li><li><code>y</code> 表示把一个字符翻译为另外的字符（但是不用于正则表达式）。</li><li><code>\n</code> 第n个匹配字符串。</li><li><code>&amp;</code> 已匹配所有字符串。</li></ul><h4 id="元字符集"><a href="#元字符集" class="headerlink" title="元字符集"></a>元字符集</h4><ul><li><code>^</code> 匹配行开始，如：<code>/^sed/</code> 匹配所有以sed开头的行。</li><li><code>$</code> 匹配行结束，如：<code>/sed$/</code> 匹配所有以sed结尾的行。</li><li><code>.</code> 匹配一个非换行符的任意字符，如：<code>/s.d/</code> 匹配s后接一个任意字符，最后是d。</li><li><code>*</code> 匹配0个或多个字符，如：<code>/*sed/</code> 匹配所有模板是一个或多个空格后紧跟sed的行。</li><li><code>\[\]</code> 匹配一个指定范围内的字符，如：<code>/\[ss\]ed/</code> 匹配sed和Sed。</li><li><code>\[^\]</code> 匹配一个不在指定范围内的字符，如：<code>/\[^A-RT-Z\]ed/</code> 匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行。</li><li><code>\(..\)</code> 匹配子串，保存匹配的字符，如：<code>s/\(love\)able/\1rs</code> ，loveable被替换成lovers。</li><li><code>&amp;</code> 保存搜索字符用来替换其他字符，如：<code>s/love/\*\*&amp;\*\*/</code> ，love这成**love**。</li><li><code>\&lt;</code> 匹配单词的开始，如：<code>/\&lt;love/</code> 匹配包含以love开头的单词的行。</li><li><code>\&gt;</code> 匹配单词的结束，如：<code>/love\&gt;/</code> 匹配包含以love结尾的单词的行。</li><li><code>x\&#123;m\&#125;</code> 重复字符x，m次，如：<code>/0\&#123;5\&#125;/</code> 匹配包含5个0的行。</li><li><code>x\&#123;m,\&#125;</code> 重复字符x，至少m次，如：<code>/0\&#123;5,\&#125;/</code> 匹配至少有5个0的行。</li><li><code>x\&#123;m,n\&#125;</code> 重复字符x，至少m次，不多于n次，如：<code>/0\&#123;5,10\&#125;/</code> 匹配5~10个0的行。</li></ul><h3 id="常用用法"><a href="#常用用法" class="headerlink" title="常用用法"></a>常用用法</h3><p>替换文本中的字符串：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/book/books/&#x27;</span> file</span><br><span class="line"></span><br><span class="line"><span class="comment"># -n选项和p命令一起使用表示只打印那些发生替换的行</span></span><br><span class="line">sed -n <span class="string">&#x27;s/test/TEST/p&#x27;</span> file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接编辑文件选项-i，会匹配file文件中每一行的第一个book替换为books</span></span><br><span class="line">sed -i <span class="string">&#x27;s/book/books/g&#x27;</span> file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当需要从第N处匹配开始替换时，可以使用 /Ng</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;sksksksksksk&#x27;</span>  sed <span class="string">&#x27;s/sk/SK/3g&#x27;</span></span><br><span class="line">&gt; skskSKSKSKSK</span><br></pre></td></tr></table></figure><p>删除操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除空白行</span></span><br><span class="line">sed <span class="string">&#x27;/^$/d&#x27;</span> file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除文件的第2行</span></span><br><span class="line">sed <span class="string">&#x27;2d&#x27;</span> file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除文件的第2行到末尾所有行</span></span><br><span class="line">sed <span class="string">&#x27;2,$d&#x27;</span> file</span><br></pre></td></tr></table></figure><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>如果只是过滤文本，可使用 <code>grep</code> ，其效率要比其他的高很多。<code>sed</code> 默认只处理模式空间，不处理原数据，如果你处理的数据是针对行处理的，可以使用 <code>sed</code> 。如果对处理的数据需要生成报告之类的信息，或者你处理的数据是按列进行处理的，最好使用 <code>awk</code> 。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;对于一些文件字段或文件名等截取或重命名等操作，我们一般会用到正则等方法实现，Linux中的 &lt;a href=&quot;#grep&quot;&gt;grep&lt;/a&gt;、&lt;a href=&quot;#awk&quot;&gt;awk&lt;/a&gt;、&lt;a href=&quot;#sed&quot;&gt;sed&lt;/a&gt; 命令同样能得到</summary>
      
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="工具" scheme="https://www.tidnotes.top/categories/%E5%B7%A5%E5%85%B7/"/>
    
    <category term="Linux" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/Linux/"/>
    
    
    <category term="linux" scheme="https://www.tidnotes.top/tags/linux/"/>
    
    <category term="awk" scheme="https://www.tidnotes.top/tags/awk/"/>
    
    <category term="grep" scheme="https://www.tidnotes.top/tags/grep/"/>
    
    <category term="sed" scheme="https://www.tidnotes.top/tags/sed/"/>
    
  </entry>
  
  <entry>
    <title>[Linux]*.sh文件执行方式</title>
    <link href="https://www.tidnotes.top/post/linux-sh/"/>
    <id>https://www.tidnotes.top/post/linux-sh/</id>
    <published>2020-01-12T16:51:16.000Z</published>
    <updated>2024-04-16T07:14:01.881Z</updated>
    
    <content type="html"><![CDATA[<p><code>*.sh</code> 即Shell脚本文件，一般为 Bourne Shell（<code>/usr/bin/sh</code> 或 <code>/bin/sh</code>）和 Bourne Again Shell（<code>/bin/bash</code>），所以，像 <strong><code>#!/bin/sh</code></strong> ，它同样也可以改为 <strong><code>#!/bin/bash</code></strong> 。</p><p><strong>1. 作为可执行程序</strong></p><p>假设脚本保存在 <code>test.sh</code>，先要 <code>cd</code> 到相应目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使脚本具有执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> +x ./test.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#相对路径执行</span></span><br><span class="line">./test.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#绝对路径执行</span></span><br><span class="line">/etc/test.sh</span><br></pre></td></tr></table></figure><p>在当前shell执行脚本，即将 <code>test.sh</code> 当成一个文件执行，此时需要 <code>test.sh</code> 的运行权限（<strong>x权限</strong>）。</p><p><strong>2. 作为解释器参数</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh test.sh</span><br><span class="line">bash test.sh</span><br></pre></td></tr></table></figure><p>新建一个shell执行 <code>test.sh</code> 脚本里面的命令，不需要执行权限，有读取权限（<strong>r权限</strong>）即可。</p><p><strong>3. 点命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">. test.sh</span><br><span class="line"><span class="built_in">source</span> test.sh</span><br></pre></td></tr></table></figure><p><strong><code>.</code></strong> 和 <code>source</code> 是同一个命令，简称点命令。在当前shell执行test.sh里面的命令，不需要执行权限，有读取权限（<strong>r权限</strong>）即可。</p><p><strong>注意：</strong> <strong><code>.</code></strong> 和文件名间有空格。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;code&gt;*.sh&lt;/code&gt; 即Shell脚本文件，一般为 Bourne Shell（&lt;code&gt;/usr/bin/sh&lt;/code&gt; 或 &lt;code&gt;/bin/sh&lt;/code&gt;）和 Bourne Again Shell（&lt;code&gt;/bin/bash&lt;/code&gt;</summary>
      
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="Linux" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/Linux/"/>
    
    
    <category term="linux" scheme="https://www.tidnotes.top/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>[Linux]shell脚本实现ftp/sftp上传下载总结</title>
    <link href="https://www.tidnotes.top/post/linux-shell-ftp/"/>
    <id>https://www.tidnotes.top/post/linux-shell-ftp/</id>
    <published>2020-01-05T13:25:38.000Z</published>
    <updated>2024-04-16T07:14:06.001Z</updated>
    
    <content type="html"><![CDATA[<p>最近在使用shell脚本时，需要使用到 <code>ftp</code> 进行上传和下载，趁最近一段时间还算有空，总结一下 <code>ftp</code> 和 <code>sftp</code> 的一些Linux命令和利用shell脚本实现 <code>ftp</code> 和 <code>sftp</code> 批量上传下载的方法。</p><span id="more"></span><h2 id="FTP-和-SFTP-区别"><a href="#FTP-和-SFTP-区别" class="headerlink" title="FTP 和 SFTP 区别"></a><code>FTP</code> 和 <code>SFTP</code> 区别</h2><p><strong>在linux系统中，最常见的文件传输的方式莫过于 <code>ftp</code> 和 <code>sftp</code> 了。</strong></p><p><strong><code>FTP</code>（File Transfer Protocol），即文件传输协议，用于Internet上控制文件的双向传输。</strong></p><p><code>FTP</code> 在linux系统中，传输默认的端口为21端口，通常以ASCII码和二进制的方式传输数据，支持主动模式和被动模式两种方式。</p><p><strong><code>SFTP</code>（Secure File Transfer Protocol），即文件加密传输协议</strong>。</p><p><code>SFTP</code> 在linux系统中，传输默认的端口为22端口，这种传输方式更为安全，传输双方既要进行密码安全验证，还要进行基于密钥的安全验证，有效的防止了“中间人”的威胁和攻击。</p><p><strong>两个比较起来，ftp传输会比sftp传输速率快，毕竟sftp牺牲了一定的效率，以保证传输过程的安全。</strong></p><h2 id="FTP-常用命令"><a href="#FTP-常用命令" class="headerlink" title="FTP 常用命令"></a><code>FTP</code> 常用命令</h2><h4 id="1-初始或连接-ftp"><a href="#1-初始或连接-ftp" class="headerlink" title="1.初始或连接 - ftp"></a>1.初始或连接 - <code>ftp</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftp [-pinegvtd] [Host]</span><br></pre></td></tr></table></figure><p><strong>参数：</strong></p><ul><li><code>-p</code> 启用被动模式。</li><li><code>-i</code> 传送多个文件时禁用交互提示。 </li><li><code>-n</code> 在建立初始连接后禁止自动登录功能。 </li><li><code>-e</code> 禁用行读取。</li><li><code>-g</code> 禁用文件名组合。Glob 允许使用星号 (*) 和问号 (?) 作为本地文件和路径名的通配符字符。</li><li><code>-v</code> 详细模式，显示指令执行过程。</li><li><code>-t</code> 启用数据包跟踪。</li><li><code>-d</code> 启用调试、显示在 <strong>FTP</strong> 客户端和 <strong>FTP</strong> 服务器之间传递的所有<strong>命令</strong>。 </li><li><code>Host</code> 指定要连接的计算机名、IP 地址或 IPv6 地址。如果指定了主机名或地址，则其必须是<strong>命令</strong>行的最后一个参数。</li></ul><blockquote><p><strong>注意：</strong> 该命令为 0.17 版本的 <code>ftp</code> 命令，不同版本间有细微的差异，其中 <code>[-dignv]</code> 5个命令为通用命令，各版本一致。具体可以使用 <code>ftp -help</code> 这一命令查看。</p></blockquote><blockquote><p><strong>提示：</strong> 部分版本会用 <code>[-A]</code> 命令，如果出现 “<strong>connect: 没有到主机的路由</strong>”这一问题，可以使用 <code>[-A]</code> 命令解决。</p></blockquote><h4 id="2-连接FTP-open"><a href="#2-连接FTP-open" class="headerlink" title="2. 连接FTP - open"></a>2. 连接FTP - <code>open</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open Host [port]</span><br></pre></td></tr></table></figure><p><strong>参数：</strong> <code>port</code> 为端口号，<code>Host</code> 同上。</p><p>如果使用上述 <strong><a href="#ftp"><code>ftp</code></a></strong> 命令时已经加上 <code>Host</code> 参数则不需要再使用该命令。</p><h4 id="3-登录用户-user"><a href="#3-登录用户-user" class="headerlink" title="3.登录用户 - user"></a>3.登录用户 - <code>user</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user username [password] [account]</span><br></pre></td></tr></table></figure><p><strong>参数：</strong></p><ul><li><code>username</code> 用户名。</li><li><code>password</code> 密码。如果没有填写，但必须填写，<code>ftp</code> 会提示输入密码。</li><li><code>account</code> 登录到远程计算机所使用的帐户。如果没有填写 <code>account</code> ，但是需要填写，<code>ftp</code> 会提示您输入帐户。</li></ul><h4 id="4-结束-close-disconnect-bye-quit"><a href="#4-结束-close-disconnect-bye-quit" class="headerlink" title="4.结束 - close&#x2F;disconnect&#x2F;bye&#x2F;!&#x2F;quit"></a>4.结束 - <code>close</code>&#x2F;<code>disconnect</code>&#x2F;<code>bye</code>&#x2F;<code>!</code>&#x2F;<code>quit</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">close</span><br><span class="line">disconnect</span><br><span class="line"><span class="built_in">bye</span></span><br><span class="line">by</span><br><span class="line">!</span><br><span class="line">quit</span><br></pre></td></tr></table></figure><p><code>close</code> 和 <code>disconnect</code> ，只结束与远程服务器的 <code>FTP</code> 会话，还留在 <code>FTP</code> 程序内。<code>bye</code>（或 <code>by</code>）、 <code>!</code> 、 <code>quit</code> ，关闭 <code>FTP</code> 对话并退出 <code>FTP</code> 。</p><h4 id="5-编码-ascii-binary"><a href="#5-编码-ascii-binary" class="headerlink" title="5.编码 - ascii&#x2F;binary"></a>5.编码 - <code>ascii</code>&#x2F;<code>binary</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ascii</span><br><span class="line">binary</span><br><span class="line">bi</span><br></pre></td></tr></table></figure><p><code>FTP</code> 支持两种文件传送类型，ASCII 码和二进制码（<code>binary</code> 或 <code>bi</code>）。</p><h4 id="6-更改目录-cd-cdup-lcd"><a href="#6-更改目录-cd-cdup-lcd" class="headerlink" title="6.更改目录 - cd&#x2F;cdup&#x2F;lcd"></a>6.更改目录 - <code>cd</code>&#x2F;<code>cdup</code>&#x2F;<code>lcd</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> remote-dir</span><br><span class="line">cdup</span><br><span class="line">lcd [directory]</span><br></pre></td></tr></table></figure><ul><li><code>cd</code> 更改的远程计算机上的目录，跳转到 <code>remote-dir</code> 这个目录 。</li><li><code>cdup</code> 更改的远程计算机上的目录，跳到上一层目录。</li><li><code>lcd</code> 更改本地计算机上的目录为 <code>directory</code>。如果没有填写 <code>directory</code>，将显示本地计算机中当前的工作目录。</li></ul><h4 id="7-上传-send-put-mput"><a href="#7-上传-send-put-mput" class="headerlink" title="7.上传 - send&#x2F;put&#x2F;mput"></a>7.上传 - <code>send</code>&#x2F;<code>put</code>&#x2F;<code>mput</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">send local-file [remote-file]</span><br><span class="line">put local-file [remote-file]</span><br><span class="line">mput local-files</span><br></pre></td></tr></table></figure><p><strong>参数：</strong></p><ul><li><code>local-file(s)</code> 复制的本地文件。</li><li><code>remote-file</code> 在远程计算机上使用的名称。如果没有，文件将命名为 <code>local-file</code> 。</li></ul><blockquote><p><code>send</code> 和 <code>put</code> 是上传单个文件， <code>mput</code> 是上传多个文件。</p></blockquote><h4 id="8-下载-get-mget-reget-recv"><a href="#8-下载-get-mget-reget-recv" class="headerlink" title="8.下载 - get&#x2F;mget&#x2F;reget&#x2F;recv"></a>8.下载 - <code>get</code>&#x2F;<code>mget</code>&#x2F;<code>reget</code>&#x2F;<code>recv</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">get remote-file [local-file]</span><br><span class="line">recv remote-file [local-file]</span><br><span class="line">reget remote-file [local-file]</span><br><span class="line">mget remote-files</span><br></pre></td></tr></table></figure><p><strong>参数：</strong></p><ul><li><code>remote-file(s)</code> 复制的远程文件。</li><li><code>local-file</code> 在本地计算机上使用的名称。如果没有，文件将命名为 <code>remote-file</code> 。</li></ul><p><code>get</code> 和 <code>recv</code> 一样，下载单个文件， <code>reget</code> 类似 <code>get</code> ，但若 <code>local-file</code> 存在，则从上次传输中断处续传。 <code>mget</code> 则下载多个文件。</p><h4 id="9-帮助-help"><a href="#9-帮助-help" class="headerlink" title="9.帮助 - ?&#x2F;help"></a>9.帮助 - <code>?</code>&#x2F;<code>help</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">? [<span class="built_in">command</span>]</span><br><span class="line"><span class="built_in">help</span> [<span class="built_in">command</span>]</span><br></pre></td></tr></table></figure><p><strong>参数：</strong> <code>command</code> 是需要帮助的命令的名称。如果没有， <code>ftp</code> 将显示全部远程命令的列表。</p><h2 id="SFTP-常用命令"><a href="#SFTP-常用命令" class="headerlink" title="SFTP 常用命令"></a><code>SFTP</code> 常用命令</h2><h4 id="1-连接登录SFTP-sftp"><a href="#1-连接登录SFTP-sftp" class="headerlink" title="1.连接登录SFTP - sftp"></a>1.连接登录SFTP - <code>sftp</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sftp [user@]host</span><br></pre></td></tr></table></figure><p><strong>参数：</strong> <code>user</code> 是登录的用户名； <code>host</code> 是远程的ip地址。</p><p>执行上面的命令后， linux shell 会提示用户输入密码， 输入password后就可以成功建立 <code>sftp</code> 连接。</p><h4 id="2-帮助-help"><a href="#2-帮助-help" class="headerlink" title="2.帮助 - help"></a>2.帮助 - <code>help</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">help</span></span><br></pre></td></tr></table></figure><h4 id="3-查看当前目录-pwd-lpwd"><a href="#3-查看当前目录-pwd-lpwd" class="headerlink" title="3.查看当前目录 - pwd&#x2F;lpwd"></a>3.查看当前目录 - <code>pwd</code>&#x2F;<code>lpwd</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br><span class="line">lpwd</span><br></pre></td></tr></table></figure><p><code>pwd</code> 是查看远端服务器的目录， 即 <code>sftp</code> 服务器默认的当前目录。 <code>lpwd</code> 是看本地目录。</p><h4 id="4-显示目录文件和子目录的缩写列表-ls-lls"><a href="#4-显示目录文件和子目录的缩写列表-ls-lls" class="headerlink" title="4.显示目录文件和子目录的缩写列表 - ls&#x2F;lls"></a>4.显示目录文件和子目录的缩写列表 - <code>ls</code>&#x2F;<code>lls</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span></span><br><span class="line">lls</span><br></pre></td></tr></table></figure><p><code>ls</code> 是查看远端服务器的。 <code>lls</code> 是看本地的。</p><h4 id="5-上传-put"><a href="#5-上传-put" class="headerlink" title="5.上传 - put"></a>5.上传 - <code>put</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">put [-P] <span class="built_in">local</span> [remote]</span><br><span class="line"></span><br><span class="line"><span class="comment">#如：将本地文件a.txt上传到远程主机/tmp/目录</span></span><br><span class="line">put a.txt /tmp/</span><br></pre></td></tr></table></figure><p>上传多个文件用 <code>*</code> 等模糊匹配命令即可，参数 <code>-P</code> 指把文件的权限和时间戳都复制过来。</p><h4 id="6-下载-get"><a href="#6-下载-get" class="headerlink" title="6.下载 - get"></a>6.下载 - <code>get</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get [-P] <span class="built_in">local</span> [remote]</span><br></pre></td></tr></table></figure><p>用法与 <a href="#sput"><code>put</code></a> 类似。</p><h4 id="7-执行本地命令"><a href="#7-执行本地命令" class="headerlink" title="7. 执行本地命令 - !"></a>7. 执行本地命令 - <code>!</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!cmd</span><br></pre></td></tr></table></figure><p><strong>参数：</strong> <code>cmd</code> 为命令，执行为本地执行，并非远程主机执行。</p><p><code>FTP</code> 有同样的用法，上面没写上。</p><h4 id="8-退出-exit-quit"><a href="#8-退出-exit-quit" class="headerlink" title="8.退出 - exit&#x2F;quit"></a>8.退出 - <code>exit</code>&#x2F;<code>quit</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br><span class="line">quit</span><br><span class="line"><span class="built_in">bye</span></span><br><span class="line">!</span><br></pre></td></tr></table></figure><p>除了 <code>!</code> 是保留进程退回到本地 <code>shell</code> 界面外，其他都是直接退出 <code>SFTP</code> 进程。</p><h4 id="9-移动目录-cd-lcd"><a href="#9-移动目录-cd-lcd" class="headerlink" title="9.移动目录 - cd&#x2F;lcd"></a>9.移动目录 - <code>cd</code>&#x2F;<code>lcd</code></h4><p>同 <code>ftp</code> 的 <a href="#cd"><code>cd</code>&#x2F;<code>lcd</code></a> 命令。</p><h2 id="shell脚本"><a href="#shell脚本" class="headerlink" title="shell脚本"></a>shell脚本</h2><p>所用命令参数可以查看上面的 <a href="#ftp"><code>FTP</code> 命令</a>和 <a href="#sftp"><code>SFTP</code> 命令</a>。</p><h3 id="FTP-实现上传"><a href="#FTP-实现上传" class="headerlink" title="FTP 实现上传"></a><code>FTP</code> 实现上传</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">ftp -n&lt;&lt;!</span><br><span class="line">open 192.168.1.1</span><br><span class="line">user guest 123456</span><br><span class="line">binary</span><br><span class="line"><span class="built_in">cd</span> /home/data</span><br><span class="line">lcd /home/databackup</span><br><span class="line">prompt</span><br><span class="line">mput *</span><br><span class="line">close</span><br><span class="line"><span class="built_in">bye</span></span><br><span class="line">!</span><br></pre></td></tr></table></figure><h3 id="FTP-实现下载"><a href="#FTP-实现下载" class="headerlink" title="FTP 实现下载"></a><code>FTP</code> 实现下载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">ftp -n&lt;&lt;!</span><br><span class="line">open 192.168.1.1</span><br><span class="line">user guest 123456</span><br><span class="line">binary</span><br><span class="line"><span class="built_in">cd</span> /home/data</span><br><span class="line">lcd /home/databackup</span><br><span class="line">prompt</span><br><span class="line">mget *</span><br><span class="line">close</span><br><span class="line"><span class="built_in">bye</span></span><br><span class="line">!</span><br></pre></td></tr></table></figure><h3 id="SFTP-实现上传"><a href="#SFTP-实现上传" class="headerlink" title="SFTP 实现上传"></a><code>SFTP</code> 实现上传</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">sftp guest@192.168.1.1 &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">cd /home/data/</span></span><br><span class="line"><span class="string">lcd /home/databackup/</span></span><br><span class="line"><span class="string">-put 201912</span></span><br><span class="line"><span class="string">-put 202001</span></span><br><span class="line"><span class="string">quit</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h3 id="SFTP-实现下载"><a href="#SFTP-实现下载" class="headerlink" title="SFTP 实现下载"></a><code>SFTP</code> 实现下载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">sftp guest@192.168.1.1 &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">cd /home/data/</span></span><br><span class="line"><span class="string">lcd /home/databackup/</span></span><br><span class="line"><span class="string">-get 201912</span></span><br><span class="line"><span class="string">-get 202001</span></span><br><span class="line"><span class="string">quit</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><ol><li><code>&lt;&lt;</code> 是使用即时文件重定向输入。</li><li><code>!</code> 或 <code>EOF</code> 是即时文件的标志，它必须成对出现，以标识即时文件的开始和结尾。两者在 <code>FTP</code> 和 <code>SFTP</code> 都可以使用。</li><li><code>get</code> 命令前加一个 “<code>-</code>” 以防止其执行错误时 sftp 执行过程被终止。</li></ol><p>上述脚本需要修改 <strong>IP、登录用户名、密码和文件路径（文件名）</strong>，自定义的 <code>FTP</code> （<code>SFTP</code>）命令需要在即时文件的标志（<code>!</code> 或 <code>EOF</code>）中。</p><p><code>FTP</code> 需要实现单文件上传下载，将 <code>mget</code> 改为 <code>get</code> 等单文件命令即可。 <code>SFTP</code> 需要实现批量文件上下传可以将具体文件名改为 <code>*</code> 等模糊匹配标志即可。</p><p><code>SFTP</code> 脚本执行时会出现登录密码输入提醒，需要输入正确的密码才能继续执行。如果需要实现全自动脚本，可以使用 <code>lftp</code> 等命令，或者使用密钥对实现。如果后续有时间会更新这部分内容，敬请关注。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;最近在使用shell脚本时，需要使用到 &lt;code&gt;ftp&lt;/code&gt; 进行上传和下载，趁最近一段时间还算有空，总结一下 &lt;code&gt;ftp&lt;/code&gt; 和 &lt;code&gt;sftp&lt;/code&gt; 的一些Linux命令和利用shell脚本实现 &lt;code&gt;ftp&lt;/code&gt; 和 &lt;code&gt;sftp&lt;/code&gt; 批量上传下载的方法。&lt;/p&gt;</summary>
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="Linux" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/Linux/"/>
    
    
    <category term="linux" scheme="https://www.tidnotes.top/tags/linux/"/>
    
    <category term="ftp" scheme="https://www.tidnotes.top/tags/ftp/"/>
    
    <category term="sftp" scheme="https://www.tidnotes.top/tags/sftp/"/>
    
  </entry>
  
  <entry>
    <title>[Python]关于DataFrame和NumPy数组如何打乱数据</title>
    <link href="https://www.tidnotes.top/post/python-pandas-shuffle/"/>
    <id>https://www.tidnotes.top/post/python-pandas-shuffle/</id>
    <published>2019-11-25T06:24:44.000Z</published>
    <updated>2024-04-16T07:15:11.816Z</updated>
    
    <content type="html"><![CDATA[<p>之前在<a href="/2019/11/24/python-error-sort/">《[Python]关于‘DataFrame’对象没有‘sort’属性》</a>一文中，发现了《Python数据分析与挖掘实战》一书中关于第8章实验代码的一些在新版本的 <code>pandas</code> 库中出现错误，同时给出了相应的解决方案。在第9章的学习中也发现，其中 <code>shuffle</code> （打乱）数据也出现了一些问题。</p><span id="more"></span><p>所以，本文主要是讲解一下关于 <code>pandas</code> 如何打乱数据的一些方法。</p><h2 id="关于-pandas-使用-random-shuffle-data-的错误结果"><a href="#关于-pandas-使用-random-shuffle-data-的错误结果" class="headerlink" title="关于 pandas 使用 random.shuffle(data) 的错误结果"></a>关于 <code>pandas</code> 使用 <code>random.shuffle(data)</code> 的错误结果</h2><p>该书中“第9章 基于水色图像的水质评价”中关于数据打乱引入的包是 <strong><code>random</code></strong> ，利用<br> <code>random.shuffle(data)</code> 后会出现如下结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[[ <span class="number">1.00000000e+00</span>  <span class="number">1.00000000e+00</span>  <span class="number">5.82822907e-01</span> ... -<span class="number">1.26431370e-02</span></span><br><span class="line">  -<span class="number">1.60903640e-02</span> -<span class="number">4.15362390e-02</span>]</span><br><span class="line"> [ <span class="number">1.00000000e+00</span>  <span class="number">1.00000000e+01</span>  <span class="number">6.41659507e-01</span> ...  <span class="number">9.72713600e-03</span></span><br><span class="line">  -<span class="number">3.72381400e-03</span> -<span class="number">3.77944800e-03</span>]</span><br><span class="line"> [ <span class="number">1.00000000e+00</span>  <span class="number">1.00000000e+01</span>  <span class="number">6.41659507e-01</span> ...  <span class="number">9.72713600e-03</span></span><br><span class="line">  -<span class="number">3.72381400e-03</span> -<span class="number">3.77944800e-03</span>]</span><br><span class="line"> ...</span><br><span class="line"> [ <span class="number">4.00000000e+00</span>  <span class="number">8.00000000e+00</span>  <span class="number">4.73493371e-01</span> ...  <span class="number">3.87451300e-03</span></span><br><span class="line">   <span class="number">2.20928100e-03</span>  <span class="number">2.36937400e-03</span>]</span><br><span class="line"> [ <span class="number">2.00000000e+00</span>  <span class="number">3.00000000e+00</span>  <span class="number">4.91916017e-01</span> ...  <span class="number">9.28491600e-03</span></span><br><span class="line">   <span class="number">9.66301000e-03</span>  <span class="number">1.15485330e-02</span>]</span><br><span class="line"> [ <span class="number">4.00000000e+00</span>  <span class="number">1.50000000e+01</span>  <span class="number">4.61240440e-01</span> ... -<span class="number">1.23856500e-03</span></span><br><span class="line">   <span class="number">5.01603000e-04</span>  <span class="number">6.81254900e-03</span>]]</span><br></pre></td></tr></table></figure><p>可以看出，第1行数据和第5行数据是相同的，而原本数据中并没有完全相同的数据，所以说使用 <code>random.shuffle(data)</code> 使数据重复而且缺失了，下面是将全部数据的类别输出以做更进一步的解释：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span></span><br><span class="line"> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span></span><br><span class="line"> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">2.</span></span><br><span class="line"> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">2.</span> <span class="number">2.</span> <span class="number">2.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">1.</span></span><br><span class="line"> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">2.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">3.</span></span><br><span class="line"> <span class="number">3.</span> <span class="number">2.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">3.</span> <span class="number">2.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">2.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">2.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">2.</span></span><br><span class="line"> <span class="number">1.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">2.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">3.</span></span><br><span class="line"> <span class="number">1.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">4.</span> <span class="number">3.</span> <span class="number">2.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">2.</span> <span class="number">1.</span> <span class="number">4.</span> <span class="number">2.</span></span><br><span class="line"> <span class="number">1.</span> <span class="number">4.</span> <span class="number">4.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">3.</span> <span class="number">2.</span> <span class="number">2.</span>]</span><br></pre></td></tr></table></figure><p>可以看出，数据总量是不变的，但是类别缺少了 <strong>类别5</strong> ，所以使用该 <code>shuffle</code> 是会导致后面的结果出现问题的。</p><p>利用 <code>type()</code> 方法查看数据类型可以得知，该 <strong>data</strong> 的数据类型是 <strong>NumPy数组</strong> ，对NumPy数组进行测试可以得知：</p><ul><li><strong><code>random.shuffle(data)</code> 并不完全支持NumPy数组</strong></li></ul><p>经过我的初步实验，结果得出 <code>random.shuffle(data)</code> 对普通的数组等都是支持的，但是对 <strong>NumPy数组</strong> 会出现类如重复、缺失等现象，所以说对于<strong>NumPy数组</strong>并不适合用 <strong><code>random</code></strong> 库来实现数据打乱。</p><p>同样的， <code>pandas</code> 中的**<code>DataFrame</code> 也是不适用这种方式打乱数据的**。</p><h2 id="打乱数据方法"><a href="#打乱数据方法" class="headerlink" title="打乱数据方法"></a>打乱数据方法</h2><h3 id="1、NumPy特有方法"><a href="#1、NumPy特有方法" class="headerlink" title="1、NumPy特有方法"></a>1、NumPy特有方法</h3><p><code>numpy</code> 库中有 <code>np.random.shuffle(x)</code> 和 <code>np.random.permutation(x)</code> 两种打乱顺序的方法。前一个是改变数据自身顺序；后一个是返回一个随机排列，自身数据不变。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#shuffle使用</span></span><br><span class="line">np.random.shuffle(data)</span><br><span class="line"></span><br><span class="line"><span class="comment">#permutation使用</span></span><br><span class="line">data = np.random.permutation(data)</span><br></pre></td></tr></table></figure><h3 id="2、DataFrame特有方法"><a href="#2、DataFrame特有方法" class="headerlink" title="2、DataFrame特有方法"></a>2、DataFrame特有方法</h3><p><code>pandas</code> 库自带有 <code>DataFrame</code> 数据打乱的方法，基本的写法如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设df = DataFrame</span></span><br><span class="line">df.sample(frac=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>其中，参数 <code>frac</code> 是返回数据的比例，1即100%，如果只需要数据的80%，参数即为 <code>frac=0.8</code> 。如果需要打乱后数据集的 <code>index</code> （索引）还是按照正常的排序，则如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.sample(frac=<span class="number">1</span>).reset_index(drop=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h3 id="3、-sklearn-机器学习的库）的-shuffle-方法"><a href="#3、-sklearn-机器学习的库）的-shuffle-方法" class="headerlink" title="3、 sklearn (机器学习的库）的 shuffle 方法"></a>3、 <code>sklearn</code> (机器学习的库）的 <code>shuffle</code> 方法</h3><p><code>sklearn</code> 库中 <code>shuffle</code> 方法是适用于 <code>DataFrame</code> 以及NumPy数组的，它的基本用法如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.utils <span class="keyword">import</span> shuffle</span><br><span class="line">df = shuffle(df)</span><br></pre></td></tr></table></figure><p>个人觉得，在不太清楚数据类型的时候，使用 <code>sklearn</code> 库的 <code>shuffle</code> 方法是最好的。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;之前在&lt;a href=&quot;/2019/11/24/python-error-sort/&quot;&gt;《[Python]关于‘DataFrame’对象没有‘sort’属性》&lt;/a&gt;一文中，发现了《Python数据分析与挖掘实战》一书中关于第8章实验代码的一些在新版本的 &lt;code&gt;pandas&lt;/code&gt; 库中出现错误，同时给出了相应的解决方案。在第9章的学习中也发现，其中 &lt;code&gt;shuffle&lt;/code&gt; （打乱）数据也出现了一些问题。&lt;/p&gt;</summary>
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="Python" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/Python/"/>
    
    
    <category term="Python" scheme="https://www.tidnotes.top/tags/Python/"/>
    
    <category term="dataframe" scheme="https://www.tidnotes.top/tags/dataframe/"/>
    
    <category term="numpy" scheme="https://www.tidnotes.top/tags/numpy/"/>
    
    <category term="pandas" scheme="https://www.tidnotes.top/tags/pandas/"/>
    
  </entry>
  
  <entry>
    <title>[Python]关于‘DataFrame’对象没有‘sort’属性</title>
    <link href="https://www.tidnotes.top/post/python-error-sort/"/>
    <id>https://www.tidnotes.top/post/python-error-sort/</id>
    <published>2019-11-24T13:18:37.000Z</published>
    <updated>2024-04-16T07:15:16.635Z</updated>
    
    <content type="html"><![CDATA[<p>最近在阅读《Python数据分析与挖掘实战》一书，其中发现不少内容没有更新，导致提供的代码直接运行会出现错误。</p><p>下面是第8章《中医证型关联规则挖掘》的 “<strong>代码清单8-1 数据聚类离散化代码</strong>” ：</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans</span><br><span class="line"></span><br><span class="line">datafile = <span class="string">&#x27;../data/data.xls&#x27;</span></span><br><span class="line">processedfile = <span class="string">&#x27;../tmp/data_processed.xls&#x27;</span></span><br><span class="line">typelabel = &#123;<span class="string">u&#x27;肝气郁结证型系数&#x27;</span>:<span class="string">&#x27;A&#x27;</span>, <span class="string">u&#x27;热毒蕴结证型系数&#x27;</span>:<span class="string">&#x27;B&#x27;</span>, <span class="string">u&#x27;冲任失调证型系数&#x27;</span>:<span class="string">&#x27;C&#x27;</span>, <span class="string">u&#x27;气血两虚证型系数&#x27;</span>:<span class="string">&#x27;D&#x27;</span>, <span class="string">u&#x27;脾胃虚弱证型系数&#x27;</span>:<span class="string">&#x27;E&#x27;</span>, <span class="string">u&#x27;肝肾阴虚证型系数&#x27;</span>:<span class="string">&#x27;F&#x27;</span>&#125;</span><br><span class="line">k = <span class="number">4</span></span><br><span class="line"></span><br><span class="line">data = pd.read_excel(datafile)</span><br><span class="line">keys = <span class="built_in">list</span>(typelabel.keys())</span><br><span class="line">result = pd.DataFrame()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(keys)):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">u&#x27;正在进行“%s”的聚类...&#x27;</span> % keys[i])</span><br><span class="line">        kmodel = KMeans(n_clusters=k, n_jobs=<span class="number">4</span>)</span><br><span class="line">        kmodel.fit(data[[keys[i]]].as_matrix())</span><br><span class="line"></span><br><span class="line">        r1 = pd.DataFrame(kmodel.cluster_centers_, columns=[typelabel[keys[i]]])</span><br><span class="line">        r2 = pd.Series(kmodel.labels_).value_counts()</span><br><span class="line">        r2 = pd.DataFrame(r2, columns=[typelabel[keys[i]] + <span class="string">&#x27;n&#x27;</span>])</span><br><span class="line">        r = pd.concat([r1, r2], axis=<span class="number">1</span>).sort(typelabel[keys[i]])</span><br><span class="line">        r.index = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">        r[typelabel[keys[i]]] = pd.rolling_mean(r[typelabel[keys[i]]], <span class="number">2</span>)</span><br><span class="line">        r[typelabel[keys[i]]][<span class="number">1</span>] = <span class="number">0.0</span></span><br><span class="line">        result = result.append(r.T)</span><br><span class="line"></span><br><span class="line">    result = result.sort()</span><br><span class="line">    result.to_excel(processedfile)</span><br></pre></td></tr></table></figure><p>其中，第25、31行中会出现 <strong>‘DataFrame’ object has no attribute ‘sort’</strong> 错误，第27行会出现 <strong>module ‘pandas’ has no attribute ‘rolling_mean’</strong> 的错误。</p><h2 id="关于-‘DataFrame’-object-has-no-attribute-‘sort’"><a href="#关于-‘DataFrame’-object-has-no-attribute-‘sort’" class="headerlink" title="关于 ‘DataFrame’ object has no attribute ‘sort’"></a>关于 <strong>‘DataFrame’ object has no attribute ‘sort’</strong></h2><p><strong>sort</strong> 已经弃用，代替使用的是 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_values.html"><code>sort_values</code></a> 或者 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_index.html"><code>sort_index</code></a> 。</p><ul><li><strong>sort_values</strong> 基本用法：<ul><li>根据“col1”排序：<code>df.sort_values(by=[&#39;col1&#39;])</code></li><li>根据多个排序：<code>df.sort_values(by=[&#39;col1&#39;, &#39;col2&#39;])</code></li><li>倒叙排序（省略为默认正序）：<code>df.sort_values(by=&#39;col1&#39;, ascending=False)</code></li><li>缺省值NaNs显示在前（省略默认在后）：<code>`df.sort_values(by=&#39;col1&#39;, ascending=False, na_position=&#39;first&#39;)`</code></li><li><strong>注意：只有by是必须的，其他可缺省。</strong></li></ul></li><li><strong>sort_index</strong> 基本用法：<ul><li>直接使用，不需要添加参数：<code>df.sort_index()</code></li></ul></li></ul><h2 id="关于-module-‘pandas’-has-no-attribute-‘rolling-mean’"><a href="#关于-module-‘pandas’-has-no-attribute-‘rolling-mean’" class="headerlink" title="关于 module ‘pandas’ has no attribute ‘rolling_mean’"></a>关于 module ‘pandas’ has no attribute ‘rolling_mean’</h2><p>pandas包中关于“rolling_mean”已经更新用法，代替使用的是 <a href="https://pandas.pydata.org/pandas-docs/version/0.23/generated/pandas.DataFrame.rolling.html"><code>rolling</code></a>。</p><p>“rolling_mean” 的用法应该对应为<code>df.rolling(2).mean()</code>。</p><h2 id="修改版代码"><a href="#修改版代码" class="headerlink" title="修改版代码"></a>修改版代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans</span><br><span class="line"></span><br><span class="line">datafile = <span class="string">&#x27;../data/data.xls&#x27;</span></span><br><span class="line">processedfile = <span class="string">&#x27;../tmp/data_processed.xls&#x27;</span></span><br><span class="line">typelabel = &#123;<span class="string">u&#x27;肝气郁结证型系数&#x27;</span>:<span class="string">&#x27;A&#x27;</span>, <span class="string">u&#x27;热毒蕴结证型系数&#x27;</span>:<span class="string">&#x27;B&#x27;</span>, <span class="string">u&#x27;冲任失调证型系数&#x27;</span>:<span class="string">&#x27;C&#x27;</span>, <span class="string">u&#x27;气血两虚证型系数&#x27;</span>:<span class="string">&#x27;D&#x27;</span>, <span class="string">u&#x27;脾胃虚弱证型系数&#x27;</span>:<span class="string">&#x27;E&#x27;</span>, <span class="string">u&#x27;肝肾阴虚证型系数&#x27;</span>:<span class="string">&#x27;F&#x27;</span>&#125;</span><br><span class="line">k = <span class="number">4</span></span><br><span class="line"></span><br><span class="line">data = pd.read_excel(datafile)</span><br><span class="line">keys = <span class="built_in">list</span>(typelabel.keys())</span><br><span class="line">result = pd.DataFrame()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(keys)):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">u&#x27;正在进行“%s”的聚类...&#x27;</span> % keys[i])</span><br><span class="line">        kmodel = KMeans(n_clusters=k, n_jobs=<span class="number">4</span>)</span><br><span class="line">        kmodel.fit(data[[keys[i]]].as_matrix())</span><br><span class="line"></span><br><span class="line">        r1 = pd.DataFrame(kmodel.cluster_centers_, columns=[typelabel[keys[i]]])</span><br><span class="line">        r2 = pd.Series(kmodel.labels_).value_counts()</span><br><span class="line">        r2 = pd.DataFrame(r2, columns=[typelabel[keys[i]] + <span class="string">&#x27;n&#x27;</span>])</span><br><span class="line">        r = pd.concat([r1, r2], axis=<span class="number">1</span>).sort_values(typelabel[keys[i]])</span><br><span class="line">        r.index = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">        r[typelabel[keys[i]]] = r[typelabel[keys[i]]].rolling(<span class="number">2</span>).mean()</span><br><span class="line">        r[typelabel[keys[i]]][<span class="number">1</span>] = <span class="number">0.0</span></span><br><span class="line">        result = result.append(r.T)</span><br><span class="line"></span><br><span class="line">    result = result.sort_index()</span><br><span class="line">    result.to_excel(processedfile)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;最近在阅读《Python数据分析与挖掘实战》一书，其中发现不少内容没有更新，导致提供的代码直接运行会出现错误。&lt;/p&gt;
&lt;p&gt;下面是第8章《中医证型关联规则挖掘》的 “&lt;strong&gt;代码清单8-1 数据聚类离散化代码&lt;/strong&gt;” ：&lt;/p&gt;</summary>
    
    
    
    <category term="编程" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="问题解决" scheme="https://www.tidnotes.top/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
    <category term="Python" scheme="https://www.tidnotes.top/categories/%E7%BC%96%E7%A8%8B/Python/"/>
    
    
    <category term="Python" scheme="https://www.tidnotes.top/tags/Python/"/>
    
    <category term="dataframe" scheme="https://www.tidnotes.top/tags/dataframe/"/>
    
    <category term="sort" scheme="https://www.tidnotes.top/tags/sort/"/>
    
  </entry>
  
</feed>
